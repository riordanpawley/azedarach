{"version":3,"file":"prompt.js","names":["Terminal","Doc","Effect","Effectable","dual","Pipeable","Action","PromptSymbolKey","PromptTypeId","Symbol","for","proto","CommitPrototype","_Output","_","commit","run","pipe","pipeArguments","arguments","isPrompt","u","allTupled","arg","length","succeed","map","x","result","i","curr","flatMap","tuple","a","all","Array","isArray","entries","Object","value","rest","slice","key","prompt","record","custom","initialState","handlers","op","create","_tag","render","process","clear","self","f","onSuccess","fnUntraced","terminal","input","readInput","runWithInput","mapError","QuitException","scoped","suspend","runLoop","loop","state","isEffect","action","NextFrame","msg","orDie","display","event","take","effect","ensuring","cursorShow","style"],"sources":["../../../src/internal/prompt.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}