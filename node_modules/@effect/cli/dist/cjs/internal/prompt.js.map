{"version":3,"file":"prompt.js","names":["Terminal","_interopRequireWildcard","require","Doc","Effect","Effectable","_Function","Pipeable","_action","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","PromptSymbolKey","PromptTypeId","exports","Symbol","for","proto","CommitPrototype","_Output","_","commit","run","pipe","pipeArguments","arguments","isPrompt","u","allTupled","arg","length","succeed","map","x","result","curr","flatMap","tuple","a","all","Array","isArray","entries","value","rest","slice","key","prompt","record","custom","initialState","handlers","op","create","_tag","render","process","clear","dual","self","onSuccess","fnUntraced","terminal","input","readInput","runWithInput","mapError","QuitException","scoped","suspend","runLoop","loop","state","isEffect","action","Action","NextFrame","msg","orDie","display","event","take","effect","ensuring","cursorShow","style"],"sources":["../../../src/internal/prompt.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}