{"version":3,"file":"AtomRef.js","names":["Equal","_interopRequireWildcard","require","_GlobalValue","Hash","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","make","value","AtomRefImpl","collection","items","CollectionImpl","keyState","globalValue","count","generate","ReadonlyRefImpl","key","constructor","symbol","that","equals","hash","listeners","listenerCount","notify","a","subscribe","push","index","indexOf","pop","map","MapRefImpl","prop","PropRefImpl","update","parent","transform","previous","next","_prop","Array","isArray","newArray","slice","item","makeRef","ref","Proxy","target","p","_receiver","insertAt","splice","remove","toArray"],"sources":["../../src/AtomRef.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}