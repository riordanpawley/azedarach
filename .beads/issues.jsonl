{"id":"az-yphg","title":"prompt injection fails on some newlines","description":"```\n~/prog/azedarach-az-ktbd on Ôêò az-ktbd  via ü•ü v1.3.4 in ‚ùÑÔ∏è (nix-shell-env)\nÛ±û© claude \"work on bead az-ktbd (bug): Space+m merge fails silently - need visibl\ne error feedback\n‚àô\n‚àô ## Description\n‚àô When pressing Space+m to merge a branch to main, the operation can fail silent\nly without any visible feedback to the user. This makes debugging difficult.\n‚àô\n‚àô ## Design Notes\n‚àô ## Problem\n‚àô\n‚àô When Space+m merge fails, there's no visible indication of why. The user press\nes the keys and nothing happens - no error toast, no status message, nothing.\n‚àô\n‚àô ## Observed Failure Modes\n‚àô\n‚àô 1. **Untracked files on main blocking merge** - Git refuses to merge if untrac\nked files would be overwritten\n‚àô 2. **Task not found in board** - `getActionTargetTask()` returns undefined sil\nently\n‚àô 3. **Session state is idle** - Shows error toast but might be missed\n‚àô 4. **Merge conflict check fails** - Should show error but might not be visible\n‚àô\n‚àô ## Investigation Points\n‚àô\n‚àô 1. Check all early return paths in `PRHandlersService.mergeToMain()`:\n‚àô    - Line 253: `if (!task) return` - **SILENT**\nzsh: event not found: task)\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T10:15:26.227281+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-22T10:28:39.416791+11:00"}
{"id":"az-xqvh","title":"Extend BeadsClient schema with dependency fields","description":"Update IssueSchema in BeadsClient.ts to include:\n- `dependent_count: Schema.Number.pipe(Schema.optional)`\n- `dependency_count: Schema.Number.pipe(Schema.optional)`\n- `dependents: Schema.Array(DependencyRefSchema).pipe(Schema.optional)`\n- `dependencies: Schema.Array(DependencyRefSchema).pipe(Schema.optional)`\n\nCreate DependencyRefSchema with: id, title, status, dependency_type, issue_type (optional)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:01.855608+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:31.113453+11:00","dependencies":[{"issue_id":"az-xqvh","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:21.510037+11:00","created_by":"daemon"}]}
{"id":"az-9ch","title":"Worktree init hooks (direnv, env vars, custom commands)","description":"Allow configuring commands to run when a worktree is created or session is started. Common use cases: direnv allow, setting env vars, installing deps, etc.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T12:13:03.534484+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T17:24:21.906802+11:00","dependencies":[{"issue_id":"az-9ch","depends_on_id":"az-pnx","type":"blocks","created_at":"2025-12-12T12:13:09.239776+11:00","created_by":"daemon"}]}
{"id":"az-lj54","title":"allow configuration of base branch e.g. space f should compare base branch (may not be main)","description":"in chefy update .azedarach.json to set base branch to preview","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T14:57:24.692666+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T19:33:31.575121+11:00"}
{"id":"az-f1j7","title":"Create OrchestrationOverlay component","description":"New component: src/ui/OrchestrationOverlay.tsx\n\nProps: epicTitle, children, selectedIds, focusIndex\n\nUI:\n- Header with epic title\n- Task list with selection markers ([x]/[ ]/---)\n- Status column (OPEN/IN_PROGRESS/BLOCKED)\n- Focus highlight\n- Footer: \"Selected: X/Y spawnable\"\n- Keybinding hints: Enter:Spawn Space:Toggle Esc:Back\n\nStyling:\n- Spawnable tasks: normal color\n- Non-spawnable: grayed/dimmed\n- Selected: checkbox [x]\n- Focused: highlight bg","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:05.131601+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:31.83202+11:00","dependencies":[{"issue_id":"az-f1j7","depends_on_id":"az-9870","type":"blocks","created_at":"2025-12-19T01:43:51.329879+11:00","created_by":"daemon"},{"issue_id":"az-f1j7","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:25.230451+11:00","created_by":"daemon"}]}
{"id":"az-8mp","title":"Fix TUI height in tmux and improve session scrolling","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T00:37:17.384839+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T00:37:34.04098+11:00"}
{"id":"az-tgc","title":"Agent Mail configuration and environment","description":"Add configuration support for Agent Mail settings.\n\nDesign:\n- Environment variables:\n  - BEADS_AGENT_MAIL_URL (optional)\n  - BEADS_AGENT_NAME (defaults to hostname or generated)\n  - BEADS_PROJECT_ID (defaults to git remote or project path hash)\n- Config service using @effect/platform Config\n- Validation with @effect/schema\n- Auto-detect if Agent Mail server is available\n- CLI flag --agent-mail-url to override\n- Show Agent Mail status in TUI StatusBar","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T10:33:13.864792+11:00","updated_at":"2025-12-12T10:33:13.864792+11:00","dependencies":[{"issue_id":"az-tgc","depends_on_id":"az-l7a","type":"blocks","created_at":"2025-12-12T10:33:21.905172+11:00","created_by":"daemon"}]}
{"id":"az-jc3k","title":"since we filtered epic children out of the main board arrow navigation has broken","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:44:19.97566+11:00","updated_at":"2025-12-30T21:31:58.425934+11:00","closed_at":"2025-12-30T21:31:58.425936+11:00"}
{"id":"az-uwtb","title":"dont log az notify errors like this in opencode","notes":"üìé [mjhw1mv7-sf5e.png](.beads/images/az-uwtb/mjhw1mv7-sf5e.png) (clipboard, 12/23/2025, 12:10:23 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T12:10:21.242767+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T13:37:50.624218+11:00"}
{"id":"az-dhpf","title":"indicator to card if a PR exists for it","description":"and if so, space P should open the pr in your browser","notes":"Implementation complete. Key files changed:\n- `src/ui/types.ts` - Added PRInfo type and prInfo field to TaskWithSession\n- `src/services/BoardService.ts` - Added PR cache and fetching in loadTasks()\n- `src/ui/TaskCard.tsx` - Shows üîó indicator in header line\n- `src/services/keyboard/PRHandlersService.ts` - Space+P checks for existing PR, opens browser if found\n- `docs/keybindings.md` - Updated documentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T23:26:58.402898+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T01:29:12.259649+11:00"}
{"id":"az-d1v","title":"look into how tools like ccmonitor keep track of token/context usage","description":"https://github.com/Maciek-roboblog/Claude-Code-Usage-Monitor/tree/main\nthey may have a better way than we currently use to track context usage in a session","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T00:28:23.974311+11:00","updated_at":"2025-12-18T00:28:23.974311+11:00"}
{"id":"az-vn0","title":"i just ended a session and then all beads with active sessions disappeared from the board","description":"i used space x to end the session and after quitting az and restarting it the beads that disappeared are still not back","notes":"## Investigation (2025-12-15)\n\n### Analysis\n\nInvestigated the bug where beads with active sessions disappeared after ending a session with Space+x.\n\n**Key findings:**\n1. Beads ARE present in the database (verified with `bd list` - 76 beads, 26 open, 1 in_progress)\n2. The `SessionManager.stop()` function only removes session tracking, doesn't modify beads\n3. The `bd sync` operation syncs changes FROM worktrees but shouldn't delete beads\n\n**Possible causes identified:**\n1. Error in `BoardService.refresh()` scheduled task causing stale/empty data\n2. Mismatch between session tracking and bead data after sync\n3. Transient issue that's difficult to reproduce\n\n**Root cause could not be definitively identified** - the code looks correct and beads exist in the database.\n\n### Fixes Applied\n\nAdded diagnostic logging to help identify the issue if it recurs:\n\n1. **BoardService.ts**: Added error logging for scheduled refresh failures\n2. **SessionManager.ts**: Added logging around session stop operations:\n   - Log when stopping session\n   - Log when sync completes/fails\n   - Log final session state\n3. **BoardService.ts**: Added warning log when task counts seem inconsistent (0 beads or session mismatch)\n\n### How to Diagnose in Future\n\nIf the bug recurs, check `az.log` for:\n- \"BoardService refresh failed\" - indicates data loading error\n- \"Stopping session for\" / \"Session stopped for\" - tracks session lifecycle\n- \"Sync failed for\" - indicates beads sync issues\n- \"Task load: X beads, Y active sessions\" - tracks data counts\n\n### Status\n\nClosing as \"cannot reproduce\" with diagnostic logging added. The logging will help identify the root cause if the issue occurs again.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T15:40:32.916186+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T17:16:31.935474+11:00"}
{"id":"az-9an","title":"gg command should take me to top of current column not top of open column always","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:52:50.236333+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T01:01:29.643058+11:00"}
{"id":"az-to80","title":"add claude/opencode context mgmt features to az","description":"i want to be able to manage claude/opencode context such as memory files CLAUDE.md and AGENTS.md, skills, hooks, etc\nstart with memory files\nwe will need a new view or overlay for this","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:23:56.967207+11:00","updated_at":"2025-12-31T09:23:56.967207+11:00"}
{"id":"az-vbqj","title":"both of these servers ARE running but not tracked properly in az","notes":"üìé [mjqnzia8-7fam.png](.beads/images/az-vbqj/mjqnzia8-7fam.png) (clipboard, 12/29/2025, 3:34:43 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T15:34:41.102289+11:00","updated_at":"2025-12-29T16:22:35.760924+11:00","closed_at":"2025-12-29T16:22:35.760924+11:00"}
{"id":"az-wn3o","title":"Claude-orchestrated epic mode (subagent approach)","description":"Claude orchestrates an epic using parallel Task tool subagents.\n\n**Entry:** Space+O on epic ‚Üí \"Claude Orchestrate\" option\n\n**Flow:**\n1. Spawn orchestrator with auto-compact enabled\n2. Quality gate identifies safe parallel groupings\n3. Orchestrator spawns subagent batches, monitors progress\n4. Updates beads on completion/blockers\n\n**Stretch:** Configurable subagents vs external sessions (az-zg9j)","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-19T11:09:41.316984+11:00","updated_at":"2025-12-19T11:15:56.423972+11:00","dependencies":[{"issue_id":"az-wn3o","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-19T11:14:30.801875+11:00","created_by":"daemon"}]}
{"id":"az-7oa","title":"Add test coverage for core services","description":"Currently only FileLockManager.test.ts exists. Add tests for:\n\n**High priority (business-critical):**\n- SessionManager - lifecycle, state transitions\n- BeadsClient - CLI parsing, error handling\n- CommandQueueService - serialization, race conditions\n- StateDetector - pattern matching accuracy\n\n**Medium priority:**\n- BoardService - filtering, sorting\n- NavigationService - cursor movement, boundary handling\n- WorktreeManager - git operations\n\nUse Effect's testing utilities and TestClock for time-based tests.","status":"open","priority":2,"issue_type":"chore","created_at":"2025-12-17T15:59:45.163878+11:00","updated_at":"2025-12-17T15:59:45.163878+11:00"}
{"id":"az-lvah","title":"Spike: Evaluate Etch library for terminal primitives","description":"**Goal:** Determine if Etch (github.com/bananaofhappiness/etch) provides what we need for tui_core.\n\n## Questions to Answer\n1. Does Etch handle raw mode entry/exit?\n2. Does Etch parse ANSI escape sequences for input (arrows, function keys)?\n3. Does Etch support true color (24-bit) output?\n4. Does Etch handle alternate screen buffer?\n5. What's the API surface like? Does it fit our architecture?\n\n## Evaluation Criteria\n- **Use Etch if:** Covers 80%+ of terminal I/O needs, actively maintained, ergonomic API\n- **Build from scratch if:** Etch is incomplete/unmaintained, or would require heavy wrapping\n\n## Tasks to Inform\n- az-hkfa (Color) - Can we use Etch's color handling?\n- az-zh3y (Input) - Can we use Etch's input handling?\n- az-5xza (Renderer) - Can we use Etch's output handling?\n\n## Deliverables\n1. Summary of Etch capabilities vs our needs\n2. Recommendation: Use Etch / Wrap Etch / Build custom\n3. If using Etch: API mapping document\n4. If not using Etch: FFI spike needed (see az-xxxx)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T11:40:14.324192+11:00","updated_at":"2025-12-28T12:29:59.365379+11:00","closed_at":"2025-12-28T12:29:59.365379+11:00","dependencies":[{"issue_id":"az-lvah","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:41:50.87631+11:00","created_by":"daemon"}]}
{"id":"az-q5c","title":"Test bead for output check","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T01:23:49.203815+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T01:24:28.486686+11:00"}
{"id":"az-m9vt","title":"after space m completes run type-check and fix and fix and fix any issues with a claude session","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:17.498656+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:32.605035+11:00"}
{"id":"az-esy","title":"Implement inline attachment mode in AttachmentService","description":"src/core/AttachmentService.ts line 204 has TODO for inline attachment.\n\nCurrently only external tmux attachment works. Inline mode should:\n- Capture session output in current terminal\n- Overlay UI on top of session stream\n- Allow quick interactions without leaving TUI","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-17T15:59:44.670743+11:00","updated_at":"2025-12-17T15:59:44.670743+11:00"}
{"id":"az-s1n","title":"add a pre tool use hook to prevent type casting like we have in ~/prog/Chefy","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:45:55.42323+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:08:36.020343+11:00"}
{"id":"az-2p4","title":"the space m to merge feature should move the bead to closed too","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:41:22.254096+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T02:20:57.249256+11:00"}
{"id":"az-8z1i","title":"add ability to preview images in tui","notes":"Research completed:\n- OpenTUI has no built-in image component (text/cell-based FrameBuffer)\n- Terminal capability detection exists for kitty_graphics and sixel\n- terminal-image npm package offers Kitty/iTerm2/Sixel + ANSI fallback\n- Will use terminal-image for cross-terminal support","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:49:35.350993+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T14:42:07.981166+11:00"}
{"id":"az-use","title":"bd sync doesnt have a json output. need to parse it differently","description":"sync failed for [bd id] -\u003e not valid json","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:25:05.897274+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:53:52.433345+11:00"}
{"id":"az-hdrt","title":"move keybind factories pattern to Effect.Service layers","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:45:18.020158+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T17:21:01.651873+11:00"}
{"id":"az-2qy","title":"CLI argument parsing with @effect/cli","description":"Set up CLI entry point with argument parsing for the az command.","notes":"Implemented complete CLI structure with @effect/cli:\n- Created src/cli/index.ts with all commands (default, start, attach, pause, status, sync)\n- Proper Option.Option handling for optional parameters\n- Type-safe argument parsing using Args and Options from @effect/cli\n- Integration with BeadsClient and BunContext\n- Help system auto-generates for all commands\n\nNOTE: Discovered potential issue with @effect/cli 0.72.1 where subcommands show help instead of executing. The CLI structure is correct per official docs, but runtime behavior needs investigation. Commands are properly registered (visible in help output) but not routing correctly.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:26.3098+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T18:03:13.670101+11:00","dependencies":[{"issue_id":"az-2qy","depends_on_id":"az-05y","type":"parent-child","created_at":"2025-12-11T14:46:07.891408+11:00","created_by":"daemon"},{"issue_id":"az-2qy","depends_on_id":"az-ags","type":"blocks","created_at":"2025-12-11T14:46:25.453515+11:00","created_by":"daemon"}]}
{"id":"az-ud48","title":"tui_core: Renderable types - Box, Text, Span and styling","description":"Port OpenTUI's Renderable type system to Gleam. This task focuses on TYPE DEFINITIONS only - layout algorithm is in az-se6w.\n\n## What\nHierarchical objects that can be nested, styled, and rendered.\n\n## Core Types (Gleam)\n```gleam\ntype Renderable {\n  Box(children: List(Renderable), style: BoxStyle)\n  Text(content: String, style: TextStyle)\n  Span(content: String, style: TextStyle)  // Inline within Text\n}\n\ntype BoxStyle {\n  BoxStyle(\n    width: Size, height: Size,\n    padding: Edges, margin: Edges,\n    border: Option(BorderStyle),\n    flex_direction: FlexDirection,  // Row | Column\n    justify_content: Justify,       // Start | End | Center | SpaceBetween | SpaceAround\n    align_items: Align,             // Start | End | Center | Stretch\n    gap: Int,\n    fg: Option(Color), bg: Option(Color),\n  )\n}\n\ntype TextStyle {\n  TextStyle(\n    fg: Option(Color), bg: Option(Color),\n    bold: Bool, dim: Bool, underline: Bool, italic: Bool,\n  )\n}\n\ntype Size { Px(Int) | Pct(Int) | Fill | Auto }\ntype FlexDirection { Row | Column }\ntype Justify { JustifyStart | JustifyEnd | JustifyCenter | SpaceBetween | SpaceAround }\ntype Align { AlignStart | AlignEnd | AlignCenter | Stretch }\ntype Edges { Edges(top: Int, right: Int, bottom: Int, left: Int) }\n\n// Convenience constructors\nfn edges_all(n: Int) -\u003e Edges\nfn edges_xy(x: Int, y: Int) -\u003e Edges\nfn default_box_style() -\u003e BoxStyle\nfn default_text_style() -\u003e TextStyle\n```\n\n## Reference\n- OpenTUI Renderables: packages/core/src/renderables/\n\n## Acceptance Criteria\n- [ ] All types defined and compile\n- [ ] Convenient constructors for common cases\n- [ ] Types are ergonomic to work with\n- [ ] Good documentation/comments","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T11:26:07.864793+11:00","updated_at":"2025-12-28T11:32:54.346946+11:00","dependencies":[{"issue_id":"az-ud48","depends_on_id":"az-xe2h","type":"blocks","created_at":"2025-12-28T11:26:28.76366+11:00","created_by":"daemon"},{"issue_id":"az-ud48","depends_on_id":"az-ebxf","type":"blocks","created_at":"2025-12-28T11:33:58.354626+11:00","created_by":"daemon"},{"issue_id":"az-ud48","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:26:18.729906+11:00","created_by":"daemon"}]}
{"id":"az-92fj","title":"never show epic children on main board, only in drill down","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:16:50.664758+11:00","updated_at":"2025-12-30T13:55:20.103521+11:00","closed_at":"2025-12-30T13:55:20.103521+11:00"}
{"id":"az-6e3","title":"somehow allow starting a session via space s/S with --dangerously-skip-permissions","description":"we dont want to default to it but we should allow the user to do it somehow. not sure what the keybind should be. might need a secondary menu layer or a dialog... or might just need a new action menu keybind","notes":"Implementation plan: 1) Add dangerouslySkipPermissions to StartSessionOptions 2) Update SessionManager.start() to use the flag 3) Add new handler startSessionDangerous() 4) Add ! keybind in action mode 5) Update ActionPalette","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:40:35.565457+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T12:45:17.622659+11:00"}
{"id":"az-zg9j","title":"Stretch: configurable subagents vs external sessions","description":"Future enhancement: make it configurable whether orchestrator uses Task tool subagents or spawns external Claude Code sessions for true parallelism","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-19T11:14:04.695528+11:00","updated_at":"2025-12-19T11:14:04.695528+11:00","dependencies":[{"issue_id":"az-zg9j","depends_on_id":"az-wn3o","type":"parent-child","created_at":"2025-12-19T11:14:21.945128+11:00","created_by":"daemon"},{"issue_id":"az-zg9j","depends_on_id":"az-md0x","type":"blocks","created_at":"2025-12-19T11:14:22.411606+11:00","created_by":"daemon"}]}
{"id":"az-5ck","title":"when i approve claude permissions in bead worktrees i want them to be merged into .claude/settings.json or something","notes":"Analyzed codebase. Plan: Add SessionEnd hook to sync permissions back to main project. Leverages existing WorktreeManager.deepMerge() for merging permission arrays.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:25:31.149667+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T15:49:48.21207+11:00"}
{"id":"az-a15u","title":"when i switch projects it takes a few seconds for the app to become interactable again","description":"i assume it is running a bunch of initialization stuff... not sure why its blocking though\neven if we cant improve this blocking issue we should at least indicate to the user when its ready","notes":"## Implementation Complete\n\n### Changes made:\n1. **BoardService.ts** - Added `isLoading` SubscriptionRef that tracks refresh state\n   - Set to `true` at start of refresh\n   - Set to `false` via `Effect.ensuring` (always runs even on error)\n\n2. **atoms/board.ts** - Added `boardIsLoadingAtom` for React subscription\n\n3. **StatusBar.tsx** - Added loading indicator with yellow \"Loading...\" badge\n   - Shows between view mode indicator and keybindings\n   - Non-intrusive, doesn't block interaction\n\n4. **InputHandlersService.ts** - Made `handleProjectSelectorInput` non-blocking\n   - Overlay pops immediately (instant UI feedback)\n   - Initial toast: \"Switching to: {project}\"\n   - `board.refresh()` runs via `Effect.fork` (background)\n   - Completion toast: \"Loaded: {project}\"\n\n5. **atoms/project.ts** - Updated `switchProjectAtom` to be non-blocking too\n   - Same pattern as InputHandlersService for consistency\n\n### Testing:\n- Type check passes ‚úì\n- Build succeeds ‚úì\n- Manual testing needed: switch projects and verify UI responsiveness","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:03:52.269921+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T11:24:38.432122+11:00"}
{"id":"az-cxow","title":"Integrate orchestration in App.tsx","description":"Update App.tsx to render OrchestrationOverlay when in orchestrate mode:\n\n1. Import OrchestrationOverlay and orchestrate atoms\n2. Add orchestrate mode detection to render logic\n3. Render OrchestrationOverlay with props from atoms\n4. Ensure keyboard events route to orchestrate mode handlers\n\nTest the full flow:\n- Enter on epic ‚Üí detail panel\n- Press 'o' ‚Üí orchestration overlay\n- Navigate, select, confirm\n- Verify spawn toast appears","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:06.779395+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:43.312283+11:00","dependencies":[{"issue_id":"az-cxow","depends_on_id":"az-ek3m","type":"blocks","created_at":"2025-12-19T01:43:53.611806+11:00","created_by":"daemon"},{"issue_id":"az-cxow","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:27.173174+11:00","created_by":"daemon"},{"issue_id":"az-cxow","depends_on_id":"az-f1j7","type":"blocks","created_at":"2025-12-19T01:43:52.458704+11:00","created_by":"daemon"},{"issue_id":"az-cxow","depends_on_id":"az-8ivo","type":"blocks","created_at":"2025-12-19T01:43:53.055371+11:00","created_by":"daemon"}]}
{"id":"az-gwck","title":"when i press space a to attach and az asks if i want to merge, it doesnt merge latest","description":"i literally JUST pressed space a on this in ~/prog/Chefy project when it said something like 59 behind, dialog said i was 40 behind, m to merge, ctrl a a to get back to az, still behind but less behind","notes":"Analyzing attach-merge flow. Identified that PRWorkflow.checkBranchBehindMain and mergeMainIntoBranch lack fetch logic, causing them to operate on stale local base branch. Planning to align with updateFromBase logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T14:50:37.689516+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T13:40:25.898995+11:00"}
{"id":"az-v2ql","title":"ensure cwd is correctly passed down or retrieved via ProjectService at every point","description":"e.g. using space c to chat checks beads in the process.cwd instead of the project cwd still","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:22:54.126139+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:29.909492+11:00"}
{"id":"az-4bah","title":"did we add a ui config menu?","description":"if not can we add it please?\ni want to be able to configure everything within our tui","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T17:23:27.707065+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-24T00:39:45.406799+11:00"}
{"id":"az-kis","title":"Utility modules: paths, logger, tmux helpers","description":"Create foundational utility modules used throughout the codebase.","notes":"Session 2025-12-11:\n\nCOMPLETED:\n- TmuxService Effect service\n- TerminalService Effect service\n- paths.ts pure utility functions\n\nFILES CREATED:\n- src/core/TmuxService.ts (3.6KB) - tmux session management\n- src/core/TerminalService.ts (1.8KB) - terminal detection/launching\n- src/core/paths.ts (868B) - path utilities\n- src/core/example-usage.ts (2.5KB) - usage examples\n\nTMUX SERVICE METHODS:\n- newSession(name, opts?) - Create detached session\n- killSession(name) - Kill session\n- listSessions() - List with metadata (windows, created, attached)\n- hasSession(name) - Check existence\n- sendKeys(session, keys) - Send keystrokes\n- attachCommand(session) - Get attach command string\n\nTERMINAL SERVICE METHODS:\n- detect() - Returns \"ghostty\" | \"iterm\" | \"terminal-app\" | \"unknown\"\n- openWithCommand(cmd) - Opens new terminal window with command\n\nPATH UTILITIES:\n- getProjectName(path) - Extract basename\n- getWorktreePath(projectPath, beadId) - ../ProjectName-\u003cbeadId\u003e/\n- getSessionName(beadId) - Uses bead ID directly\n- normalizePath(path) - path.resolve()\n\nVERIFICATION:\n- All files compile with TypeScript strict mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:44:26.516814+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T17:25:14.137924+11:00","dependencies":[{"issue_id":"az-kis","depends_on_id":"az-05y","type":"parent-child","created_at":"2025-12-11T14:46:08.116031+11:00","created_by":"daemon"},{"issue_id":"az-kis","depends_on_id":"az-ags","type":"blocks","created_at":"2025-12-11T14:46:25.747591+11:00","created_by":"daemon"}]}
{"id":"az-x4e","title":"avoid useEffect, useMemo, useState, etc.","description":"switch from react hooks such as those in the title to fully encapsulating state mgmt in effect services","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T14:24:52.577357+11:00","updated_at":"2025-12-17T15:03:52.386143+11:00","dependencies":[{"issue_id":"az-x4e","depends_on_id":"az-wiu","type":"blocks","created_at":"2025-12-17T15:59:52.10568+11:00","created_by":"daemon"}]}
{"id":"az-wxvn","title":"why is bd sync failing in initCommands?","notes":"üìé [mjc92kmr-m2gt.png](.beads/images/az-wxvn/mjc92kmr-m2gt.png) (clipboard, 12/19/2025, 1:28:25 PM)\n\n### Investigation Steps Completed\n1. Read attached screenshot showing diagnostics panel with initCommands failure\n2. Ran `bd sync` manually - confirmed same error\n3. Checked beads version: 0.30.5 (dev) from nix flake\n4. Compared db schema - dependencies table missing `thread_id`\n5. Found migration 020_edge_consolidation.go adds thread_id\n6. Confirmed `--no-db` mode works as workaround\n7. Fixed by: manually adding column to main db, then deleting worktree's empty db so it recreates from JSONL\n\n### Confirmed: This is a beads upstream bug\nThe migration system should handle older databases gracefully but instead crashes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:28:23.212365+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T14:15:10.682065+11:00"}
{"id":"az-01oo","title":"use better formatting for elapsed time. e.g. hours, days etc not just minutes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T03:50:33.940037+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T01:59:33.604917+11:00"}
{"id":"az-nk1","title":"Add number keys 1-9 for quick session attach","description":"Allow pressing 1-9 keys in normal mode to quickly attach to running sessions.\n\nInspiration: AutoMaker uses 1-9, 0 to view output for first 10 in-progress cards.\n\nImplementation:\n1. In normal mode, number keys 1-9 attach to nth running session\n2. Sessions ordered by: busy first, then waiting, then by start time\n3. Show number indicators on cards when sessions are running\n4. 0 could attach to 10th session or be used for other purpose","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-16T12:00:03Z","updated_at":"2025-12-16T12:00:03Z"}
{"id":"az-vcx5","title":"az got reaaaly slow today in the last hour or two","description":"analyze our commits for potential performance degrading changes and resolve the perf issue\nto be clear, the boards show nothing for AGES 20s+ and then finally load in AND the app just feels laggier\nalso it takes a bit longer than it used to to see newly created tasks in the board\nperf degradation seems correlated to number of beads","notes":"## Changes Made (2025-12-30)\n\n### 1. Batched `bd show` calls for parent epic lookup\n**File:** `src/core/BeadsClient.ts`\n- Added `showMultiple(ids: string[])` method that takes multiple IDs and returns all in one call\n- `bd show id1 id2 id3 --json` is 10x faster than individual calls\n\n**File:** `src/services/BoardService.ts`  \n- Changed `loadTasks()` to use single `beadsClient.showMultiple()` call instead of O(n) `getParentEpic()` calls\n- With 38 issues having dependencies, this saves ~2 seconds (from ~2s to ~0.1s)\n\n### 2. TTL cache for worktree existence checks\n**File:** `src/core/WorktreeManager.ts`\n- Added 2-second TTL cache for `refreshWorktrees()` \n- `exists()`, `get()`, `list()` now use cached data when within TTL\n- `create()`, `remove()` use `forceRefreshWorktrees()` to ensure fresh data\n- Avoids O(n) git worktree list calls during `loadTasks()` (100 issues = 100 calls ‚Üí 1 call)\n\n### 3. Added timing instrumentation\n**File:** `src/services/BoardService.ts`\n- Added timing logs to loadTasks() to verify improvements:\n  - \"loadTasks: N issues fetched in Xms\"\n  - \"loadTasks: N deps resolved in Xms\" \n  - \"loadTasks: Complete in Xms\"\n\n## Expected Performance Improvement\n- Before: 20s+ for initial load with 100 beads\n- After: Should be ~1-2 seconds\n\nThe main bottlenecks were:\n1. O(n) subprocess calls for parent epic lookup (38 √ó 0.1s = ~4s)\n2. O(n) git worktree list calls for existence checks (100 √ó 0.05s = ~5s)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T12:24:27.050454+11:00","updated_at":"2025-12-30T14:03:48.366385+11:00","closed_at":"2025-12-30T14:03:48.366388+11:00"}
{"id":"az-wbj3","title":"simplify tmux az service","description":"instead of multiple tmux sessions per bead we should have 1 session per bead and multiple windows in each session e.g. start a opencode session? just goes to tmux session named [bead-id] (in worktree obviously), and creates a window for that open code session. if the tmux session doesnt exist it creates it and runs initCommands in a window before allowing the opencode session window to be created. space r to start a dev server? same tmux session, new window! name the windows if you can based on their usecase. ask me if you need more details or have any questions","notes":"Design for single-session tmux model:\n1. Unified Session Name: The tmux session name will be exactly the bead ID (e.g., 'az-wbj3').\n2. Windows for Concerns:\n   - 'code': Main AI tool (Claude/OpenCode).\n   - 'dev': Dev server.\n   - 'chat': Chat sessions.\n   - 'background': For one-off background tasks.\n3. WorktreeSessionService Refactor:\n   - Centralize 'get or create session' logic.\n   - Use @az_init_done session option to synchronize window startup.\n   - New windows will wait for initialization (direnv, etc.) before running their commands.\n4. TmuxService Keybindings:\n   - Update 'C-a Tab' to toggle between 'code' and 'dev' windows in the current session.\n5. Path Utility Updates:\n   - Add getBeadSessionName(beadId) to paths.ts.\n   - Add standardized window names.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T13:33:06.78557+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T14:08:33.105144+11:00"}
{"id":"az-eqa2","title":"when attaching, dont show option to merge when a merge is already in progress","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:39:11.244145+11:00","updated_at":"2025-12-30T14:43:28.947738+11:00","closed_at":"2025-12-30T14:43:28.947738+11:00"}
{"id":"az-wwui","title":"Mouse events support","description":"**Status:** Deferred to post-MVP\n\n## Overview\nAdd mouse event handling to the TUI framework. The config already has a `mouse: Bool` field but implementation is deferred.\n\n## Features\n- Mouse click detection (x, y coordinates)\n- Mouse movement tracking (hover)\n- Mouse button identification (left, right, middle)\n- Scroll wheel events\n\n## Implementation Notes\n- Requires ANSI mouse tracking escape sequences\n- Enable: `\\x1b[?1000h` (basic) or `\\x1b[?1003h` (any event)\n- Disable: `\\x1b[?1000l`\n- Events come as escape sequences: `\\x1b[M\u003cbutton\u003e\u003cx\u003e\u003cy\u003e`\n\n## Reference\n- OpenTUI mouse handling (if present)\n- ANSI mouse tracking: https://invisible-island.net/xterm/ctlseqs/ctlseqs.html\n\n## Blocked By\n- Runtime (az-d19m) must be complete first\n\n## Why Deferred\nMouse is not required for Azedarach MVP - keyboard navigation is sufficient for the Kanban board.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-28T12:07:33.635045+11:00","updated_at":"2025-12-28T12:07:33.635045+11:00","dependencies":[{"issue_id":"az-wwui","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T12:07:48.715183+11:00","created_by":"daemon"},{"issue_id":"az-wwui","depends_on_id":"az-d19m","type":"blocks","created_at":"2025-12-28T12:07:48.932984+11:00","created_by":"daemon"}]}
{"id":"az-53o","title":"Notification system (terminal bell, system notifications)","description":"Alert user when sessions need attention.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:24.717497+11:00","updated_at":"2025-12-11T14:54:42.593575+11:00","dependencies":[{"issue_id":"az-53o","depends_on_id":"az-zv6","type":"parent-child","created_at":"2025-12-11T14:46:09.727137+11:00","created_by":"daemon"}]}
{"id":"az-bz8y","title":"goto word (gw) keybind should allow going to any visible task in any column","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:58:13.816499+11:00","updated_at":"2025-12-30T21:22:27.442828+11:00","closed_at":"2025-12-30T21:22:27.442831+11:00"}
{"id":"az-31iv","title":"when initCommands fail they say to look at diagnostics with shift-d but its actually just d","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:16:41.526182+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T13:19:55.884127+11:00"}
{"id":"az-r0z1","title":"backgroundTasks are not being run upon session readyness","description":"when any session's initCommands are done we should be running backgroundTasks in a new window in that session","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T19:07:52.208129+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-24T01:08:34.706143+11:00"}
{"id":"az-cyra","title":"allow pasting into text input","description":"specifically not worknig when using C keybind to create task with ai, that text prompt should accept cmd v to paste","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T16:24:50.874944+11:00","updated_at":"2025-12-31T17:39:19.877815+11:00","closed_at":"2025-12-31T17:39:19.87782+11:00"}
{"id":"az-j95d","title":"our settings.local.json merge feature doesnt work like i wanted","description":"It should work by merging in WorkTree settings.local.json files into main when we merge with space m. making sure to avoid duplicate settings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:04:25.684598+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T11:08:46.056379+11:00"}
{"id":"az-cgf","title":"Add VC command input mode (:)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-14T01:05:15.626687+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T01:10:33.962738+11:00","dependencies":[{"issue_id":"az-cgf","depends_on_id":"az-f4q","type":"blocks","created_at":"2025-12-14T01:05:21.400864+11:00","created_by":"daemon"}]}
{"id":"az-zv6","title":"Automation \u0026 Workflows","description":"Automated workflows: PR creation, state transition hooks, notifications, and beads sync coordination.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:44:04.97152+11:00","updated_at":"2025-12-11T14:44:04.97152+11:00"}
{"id":"az-jjht","title":"when i scroll down with arrow keys in board view, cursor goes off the screen","description":"When navigating with arrow keys (j/k) in the board view, if there are more tasks than can fit on screen, the cursor can move to a position that's not visible. This happens because the viewport windowing logic only scrolls DOWN when the cursor approaches the bottom, but doesn't scroll UP when the cursor is near the top of the list.\n\n**Root cause in Column.tsx (lines 131-137):**\n```typescript\nlet startTaskIdx = 0\nif (selectedIdx \u003e= max - 1) {\n  // Scroll so selection is near bottom of window\n  startTaskIdx = Math.min(selectedIdx - max + 2, taskItems.length - max)\n}\n```\n\nThis logic only adjusts the window when `selectedIdx \u003e= max - 1`, meaning:\n- If you're at task 10 and press UP to go to task 9, and max=5, the window stays at 6-10 even though task 9 is now off-screen above\n- If wrapping occurs (bottom to top), the window doesn't scroll back to show task 0\n\n**Reproduction:**\n1. Have a column with more tasks than fit on screen (e.g., 10 tasks, 5 visible)\n2. Navigate down until cursor is at bottom visible task\n3. Continue pressing down - window scrolls correctly\n4. Press up - cursor moves to previous task but may be off-screen above the window","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T22:38:17.088597+11:00","updated_at":"2025-12-31T09:44:30.261424+11:00","closed_at":"2025-12-31T09:44:30.261427+11:00"}
{"id":"az-06p","title":"TUI polish: card heights, priority labels, sticky action mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T10:23:49.590359+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:23:55.435441+11:00"}
{"id":"az-d1bu","title":"i restarted my computer and my tmux sessions died, i thought they would survive","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T15:22:43.089997+11:00","updated_at":"2025-12-31T16:17:59.804967+11:00","closed_at":"2025-12-31T16:17:59.804967+11:00"}
{"id":"az-ee4","title":"Configuration \u0026 Polish","description":"User configuration (cosmiconfig + zod), multi-project support, help system, and final polish.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:44:05.070257+11:00","updated_at":"2025-12-11T14:44:05.070257+11:00"}
{"id":"az-sfxp","title":"dont show epic children in main board by default","description":"also their base branch for git diff and lines changed in header of task card should be epic branch not the one in config","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:09:27.040369+11:00","updated_at":"2025-12-30T12:05:16.112421+11:00","closed_at":"2025-12-30T12:05:16.112421+11:00"}
{"id":"az-idq3","title":"name claude sessions [bead-id]","description":"when space s/S etc name them after the type of ssesion and bead id","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T00:38:22.983613+11:00","updated_at":"2025-12-30T00:58:45.166002+11:00"}
{"id":"az-dv9t","title":"read hook error","description":"Claude Code hooks call `az notify` but the `az` command isn't in /bin/sh's PATH. Error: \"Stop hook error: Failed with non-blocking status code: /bin/sh: az: command not found\". Need to use absolute path in generated hook config.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T14:05:15.520227+11:00","updated_at":"2025-12-20T01:46:58.532728+11:00"}
{"id":"az-xe2h","title":"tui_core: FrameBuffer - 2D cell grid with hex color support","description":"Port OpenTUI's FrameBuffer concept to Gleam.\n\n## What\nA 2D array of cells where each cell has:\n- Character (grapheme)\n- Foreground color (uses Color type from az-hkfa)\n- Background color\n- Attributes (bold, dim, underline, etc.)\n\n## API (Gleam)\n```gleam\ntype Cell { \n  Cell(\n    char: String, \n    fg: Color,      // From tui_core/color\n    bg: Color, \n    attrs: Attrs,   // Bitflags: Bold | Dim | Underline | Italic\n  ) \n}\n\ntype FrameBuffer { \n  FrameBuffer(\n    width: Int, \n    height: Int, \n    cells: Array(Cell),\n    dirty: Set(Int),  // Track which cells changed for efficient diff\n  ) \n}\n\nfn new(width: Int, height: Int) -\u003e FrameBuffer\nfn set_cell(fb: FrameBuffer, x: Int, y: Int, cell: Cell) -\u003e FrameBuffer\nfn get_cell(fb: FrameBuffer, x: Int, y: Int) -\u003e Cell\nfn fill_rect(fb: FrameBuffer, x: Int, y: Int, w: Int, h: Int, cell: Cell) -\u003e FrameBuffer\nfn draw_text(fb: FrameBuffer, x: Int, y: Int, text: String, fg: Color, bg: Color) -\u003e FrameBuffer\nfn clear(fb: FrameBuffer) -\u003e FrameBuffer\nfn resize(fb: FrameBuffer, width: Int, height: Int) -\u003e FrameBuffer\nfn get_dirty_cells(fb: FrameBuffer) -\u003e List(#(Int, Int, Cell))\nfn clear_dirty(fb: FrameBuffer) -\u003e FrameBuffer\n```\n\n## Dependencies\n- az-hkfa: Color utilities (for Color type)\n\n## Reference\n- OpenTUI FrameBuffer: packages/core/src/buffer.ts\n\n## Acceptance Criteria\n- [ ] Cell type with char, colors, and attributes\n- [ ] Efficient 2D array storage (consider flat array with index calculation)\n- [ ] Basic drawing operations work correctly\n- [ ] Dirty cell tracking for efficient re-rendering\n- [ ] Bounds checking on all operations","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T11:26:07.426801+11:00","updated_at":"2025-12-30T00:29:51.437965+11:00","closed_at":"2025-12-30T00:29:51.437965+11:00","dependencies":[{"issue_id":"az-xe2h","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:26:18.590844+11:00","created_by":"daemon"},{"issue_id":"az-xe2h","depends_on_id":"az-hkfa","type":"blocks","created_at":"2025-12-28T11:33:58.159957+11:00","created_by":"daemon"}]}
{"id":"az-i7h5","title":"review https://github.com/chefy-org/Chefy/pull/1995/changes","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-30T22:44:32.214544+11:00","updated_at":"2025-12-31T09:07:47.400709+11:00","deleted_at":"2025-12-31T09:07:47.400709+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-ssm","title":"i tried az in Chefy and for some reason the cursor got lost after i sorted by updated","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T13:49:22.39364+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T14:06:56.110719+11:00"}
{"id":"az-uwcd","title":"lustre_tui: Element types and attributes","description":"Define the Lustre element types that users write in their view functions.\n\n## Why Separate from Reconciler\nElement types are the user-facing API. Keep them stable and well-documented separately from the reconciler internals.\n\n## API (Gleam)\n```gleam\n// Core element type\ntype Element(msg)\n\n// Constructors\nfn box(attrs: List(Attribute(msg)), children: List(Element(msg))) -\u003e Element(msg)\nfn text(attrs: List(Attribute(msg)), content: String) -\u003e Element(msg)\nfn span(attrs: List(Attribute(msg)), content: String) -\u003e Element(msg)  // Inline text\n\n// Future: Input elements\n// fn input(attrs: List(Attribute(msg))) -\u003e Element(msg)\n// fn button(attrs: List(Attribute(msg)), label: String) -\u003e Element(msg)\n\n// Attributes - Layout\nfn width(size: Size) -\u003e Attribute(msg)\nfn height(size: Size) -\u003e Attribute(msg)\nfn flex_direction(dir: FlexDirection) -\u003e Attribute(msg)\nfn justify_content(j: Justify) -\u003e Attribute(msg)\nfn align_items(a: Align) -\u003e Attribute(msg)\nfn padding(p: Int) -\u003e Attribute(msg)\nfn padding_xy(x: Int, y: Int) -\u003e Attribute(msg)\nfn margin(m: Int) -\u003e Attribute(msg)\nfn gap(g: Int) -\u003e Attribute(msg)\n\n// Attributes - Style\nfn fg(color: String) -\u003e Attribute(msg)  // \"#8aadf4\"\nfn bg(color: String) -\u003e Attribute(msg)\nfn bold() -\u003e Attribute(msg)\nfn dim() -\u003e Attribute(msg)\nfn underline() -\u003e Attribute(msg)\nfn border(style: BorderStyle) -\u003e Attribute(msg)\n\n// Attributes - Events (for input elements)\nfn on_click(msg: msg) -\u003e Attribute(msg)\nfn on_key(handler: fn(Key) -\u003e Option(msg)) -\u003e Attribute(msg)\n```\n\n## Design Decisions\n- Attributes are typed to msg for event handlers\n- Colors are strings (parsed by tui_core/color)\n- Sizes use the same Size type as Renderables\n- Keep API minimal initially, expand based on needs\n\n## Acceptance Criteria\n- [ ] box/text/span constructors work\n- [ ] All layout attributes defined\n- [ ] All style attributes defined\n- [ ] Event attribute types defined (even if not implemented)\n- [ ] Types compile and are ergonomic to use","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T11:32:19.939067+11:00","updated_at":"2025-12-28T11:32:19.939067+11:00","dependencies":[{"issue_id":"az-uwcd","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.414335+11:00","created_by":"daemon"},{"issue_id":"az-uwcd","depends_on_id":"az-ud48","type":"blocks","created_at":"2025-12-28T11:34:13.202407+11:00","created_by":"daemon"}]}
{"id":"az-cktn","title":"when we manually and deliberately delete a bead with space D we should immediately sync that","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T13:39:04.318158+11:00","updated_at":"2025-12-18T13:39:04.318158+11:00"}
{"id":"az-lqb","title":"Worker session template with epic context injection","description":"Create worker.md session template that injects:\n- Task title, description, design\n- Parent epic context (title, design, goals)\n- Coordination rules (stay focused, report discoveries)\n- bd commands for status updates\n\n**Template variables:** $TASK_ID, $TASK_TITLE, $EPIC_ID, $EPIC_TITLE, $EPIC_DESIGN\n\n**Location:** .claude/session-templates/worker.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T13:29:14.913748+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:54:56.992854+11:00","dependencies":[{"issue_id":"az-lqb","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-12T13:29:32.80298+11:00","created_by":"daemon"}]}
{"id":"az-dqt","title":"Extend TaskWithSession type with session metrics","description":"Extend TaskWithSession interface with optional session metrics: contextPercent (0-100), sessionStartedAt, estimatedTokens, lastCompactedAt, recentOutput. This is the foundation for other session metrics features.","notes":"Session 2025-12-12: Created from Claude Code best practices research.\n\nRESEARCH CONTEXT:\n- 6 parallel research agents analyzed: Anthropic blog, Reddit, latest features, orchestration tools, CLAUDE.md patterns, real-world usage\n- Key finding: Context % monitoring is critical - users hit auto-compact (95%) unexpectedly\n- Key finding: MCP servers consume 55K-134K tokens before conversation starts\n- Design: Use progressive disclosure - border colors for at-a-glance, DetailPanel for full metrics\n\nUI DESIGN DECISIONS:\n- Border color encodes context health: lavender (\u003c70%), yellow (70-90%), red (\u003e90%)\n- Only show metrics when session is active (not idle)\n- Extend existing TaskWithSession type (no new components needed)\n\nIMPLEMENTATION NOTES:\n- Add: contextPercent, sessionStartedAt, estimatedTokens, lastCompactedAt, recentOutput\n- All fields optional (populated when session active)\n- This is foundation - unblocks az-6la, az-5p5, az-2ek, az-c9y\n\nNEXT STEP: Implement type changes in src/ui/types.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T13:25:00.109541+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-13T00:58:21.053672+11:00"}
{"id":"az-50zf","title":"add a way to see the diff between a bead branch and main so i can code review","notes":"Using tmux popup approach (like Space+L for logs) instead of custom overlay - simpler, better scrolling, proper terminal rendering of ANSI colors from git diff","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:08.332767+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:03:03.887758+11:00"}
{"id":"az-ajv7","title":"add bulk worktree cleanup command","description":"allow user to specify how old (in days) worktrees have to be to be cleaned up by this command. not sure on the keybind","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T00:40:34.363168+11:00","updated_at":"2025-12-30T10:55:32.276312+11:00","closed_at":"2025-12-30T10:55:32.276312+11:00"}
{"id":"az-cqqj","title":"still seeing sync failed","description":"failed to parse json... we already know bd sync doesnt output json and so we shouldnt json.parse sync output right?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:36:32.970544+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T14:23:57.721217+11:00"}
{"id":"az-9fhx","title":"use lazygit for space f diffing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T01:04:48.453427+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T01:57:21.101489+11:00"}
{"id":"az-r9u","title":"looks like there is hidden bead that doesnt quite fit in the screen","description":"our screen size calc must be off","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:26:58.321424+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T21:36:22.5216+11:00"}
{"id":"az-3rk","title":"Add rate_limited session state","description":"Add 'rate_limited' to SessionState type and SESSION_INDICATORS map (‚è± glyph). Extend StateDetector patterns to detect rate limiting from Claude output (patterns like 'Rate limit', 'Too many requests', 'Please wait').","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T13:24:59.309325+11:00","updated_at":"2025-12-12T13:25:19.967333+11:00"}
{"id":"az-dpi","title":"Integrate Agent Mail with SessionManager","description":"Wire Agent Mail into session lifecycle for automatic reservation management.\n\nDesign:\n- SessionManager.start() calls agentMail.reserve() before worktree creation\n- SessionManager.stop() calls agentMail.release() after cleanup\n- SessionManager.pause() keeps reservation but updates status\n- Add reservation info to Session type\n- Fail session start if issue already reserved by another agent\n- Handle reservation conflicts gracefully\n- Update Kanban board to show reservation status (who owns what)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T10:33:13.738474+11:00","updated_at":"2025-12-12T10:33:13.738474+11:00","dependencies":[{"issue_id":"az-dpi","depends_on_id":"az-tgc","type":"blocks","created_at":"2025-12-12T10:33:21.972727+11:00","created_by":"daemon"},{"issue_id":"az-dpi","depends_on_id":"az-l7a","type":"blocks","created_at":"2025-12-12T10:33:21.870895+11:00","created_by":"daemon"},{"issue_id":"az-dpi","depends_on_id":"az-4r0","type":"blocks","created_at":"2025-12-12T10:33:21.939099+11:00","created_by":"daemon"}]}
{"id":"az-oehz","title":"Fix PRWorkflow.ts to use configured CLI tool instead of hardcoded claude","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-05T11:49:46.631914+11:00","updated_at":"2026-01-05T11:54:13.422757+11:00","closed_at":"2026-01-05T11:54:13.422757+11:00"}
{"id":"az-7y9","title":"worktree created but not found","description":"we may be looking in the wrong spot for worktrees sometimes. i looked in finder and the worktree existed so not sure how we failed to find it. also make sure that errors that we should via toast are also logged via Effect.logError","notes":"Fixed both issues: (1) Added Effect.logError to all toast error handlers in KeyboardService, (2) Updated WorktreeManager to use branch name as beadId (more reliable than path parsing), added path normalization to avoid symlink/trailing slash issues, added diagnostic logging when worktree not found in cache, made the fallback regex case-insensitive to support any prefix (e.g., Chefy-xxx). Also added MCP tool permissions to project settings.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T14:32:16.690535+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T15:32:17.764918+11:00"}
{"id":"az-2ck1","title":"inject permisson to view az images, use az cli, anything else? when we inject claude hooks","notes":"üìé [mjt969yr-2rlf.png](.beads/images/az-2ck1/mjt969yr-2rlf.png) (clipboard, 12/31/2025, 11:03:23 AM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T10:35:01.665548+11:00","updated_at":"2025-12-31T11:04:26.610738+11:00","closed_at":"2025-12-31T11:04:26.610738+11:00"}
{"id":"az-cl1","title":"Add concurrency limit config for parallel sessions","description":"Add configuration option to limit maximum number of parallel Claude sessions.\n\nInspiration: AutoMaker's maxConcurrency setting with canStartNewTask check.\n\nImplementation:\n1. Add maxConcurrency to config schema (default: unlimited or 5)\n2. Check limit in SessionManager before starting new session\n3. Show visual indicator when at capacity\n4. Optionally queue pending starts when limit reached\n5. Display running/max in status bar (e.g., '3/5 sessions')","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T12:00:04Z","updated_at":"2025-12-16T12:00:04Z"}
{"id":"az-czq","title":"Tmux popup persists after Ctrl-C when editor was opened via 'c'","description":"When user presses 'c' to create a bead via editor, a tmux popup is spawned. If user Ctrl-C's azedarach before closing the popup, the popup remains orphaned and must be manually dismissed.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T21:41:38.795322+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T21:46:18.162342+11:00"}
{"id":"az-zby","title":"bd sync incorrectly tombstones issues that exist in JSONL","description":"When running `bd sync`, issues that exist in both the JSONL (from git) and the local database are incorrectly tombstoned instead of being reconciled.\n\n**Symptoms:**\n- After `bd sync`, issues disappear from the TUI/CLI\n- Database shows issues as `status='tombstone'` \n- JSONL file still contains the issues with valid status (open/closed)\n- No entries in deletions.jsonl for these tombstoned issues\n\n**Root cause hypothesis:**\nThe sync merge logic treats \"issue in JSONL but state differs from DB\" as \"deleted\" rather than \"updated from another branch\". This particularly affects issues merged from worktree branches.\n\n**Workaround:**\nManual SQL recovery to restore status from JSONL:\n```sql\nUPDATE issues SET status='\u003cjsonl_status\u003e', closed_at='\u003cjsonl_closed_at\u003e' WHERE id='\u003cid\u003e';\n```\n\n**Affected:** 21 issues in one incident (2025-12-18)","notes":"**Additional finding (2025-12-18):**\n\n`bd sync --import-only` does NOT recover tombstoned issues. It says \"8 skipped\" for issues that are tombstoned in the database but have valid status in JSONL.\n\nThe import logic appears to skip any issue that already exists in the DB, regardless of whether it's tombstoned. It should compare the JSONL status against DB status and update if JSONL has a non-tombstone status.\n\n**Affected code path:**\n- Azedarach's PRWorkflow.ts:724 calls `syncImportOnly` after git merge\n- This call is silently failing to recover tombstoned issues\n- The `Effect.catchAll(() =\u003e Effect.void)` means failures are swallowed\n\n**The fix should be in beads' import logic** - when importing from JSONL:\n1. If JSONL status is valid (not tombstone) AND DB status is tombstone\n2. Update DB to match JSONL status (un-tombstone the issue)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-18T02:12:15.839482+11:00","updated_at":"2025-12-18T02:16:18.616471+11:00"}
{"id":"az-a4s5","title":"image preview is broken","notes":"üìé [mjgmek1q-spkm.png](.beads/images/az-a4s5/mjgmek1q-spkm.png) (clipboard, 12/22/2025, 2:52:45 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T14:52:29.359875+11:00","updated_at":"2025-12-31T09:46:25.948907+11:00","closed_at":"2025-12-31T09:46:25.948907+11:00"}
{"id":"az-a8i","title":"StateDetector - Claude output pattern matching","description":"Detect Claude session state by monitoring PTY output and matching patterns.","notes":"‚úÖ StateDetector service complete and tested.\n\nFiles created:\n- src/core/StateDetector.ts (main service)\n- src/core/StateDetector.example.ts (usage examples)\n\nFeatures implemented:\n‚úì SessionState type: idle | busy | waiting | done | error\n‚úì Effect.Service with Effect.Tag pattern\n‚úì detectFromChunk() - stateless pattern matching\n‚úì createDetector() - stateful detector with debouncing\n‚úì Priority-based pattern matching (waiting \u003e error \u003e done \u003e busy)\n‚úì StateDetectorLive layer (no dependencies)\n‚úì Convenience functions for easy usage\n‚úì Debouncing: busy state coalesces rapid output\n‚úì Terminal state stickiness: done/error persist until reset\n‚úì Comprehensive examples demonstrating all features\n\nPattern matching:\n- waiting: [y/n], 'Do you want to', 'Press Enter', etc.\n- error: 'Error:', 'Exception:', 'Failed:', 'ENOENT', etc.\n- done: 'Task completed', 'Successfully', 'Done.', etc.\n- busy: any non-empty output not matching above\n\nType checking: ‚úÖ No errors\nRuntime testing: ‚úÖ All examples run successfully","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:44.92773+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T01:29:02.419812+11:00","dependencies":[{"issue_id":"az-a8i","depends_on_id":"az-d8z","type":"parent-child","created_at":"2025-12-11T14:46:08.44929+11:00","created_by":"daemon"}]}
{"id":"az-zu3","title":"Implement hybrid state detection: native hooks + PTY monitoring","description":"Design and implement a hybrid state detection system that combines Claude Code's native hooks (authoritative state) with PTY output monitoring (supplementary signals).\n\n## Architecture\n- Native hooks (idle_prompt, stop, session_end) provide authoritative state transitions\n- PTY stream provides error pattern detection and \"busy\" feedback\n- State aggregator reconciles signals into final state\n\n## Benefits\n- Authoritative state from hooks\n- Graceful degradation if hooks fail\n- Error detection via PTY patterns\n- Future-proof as Claude adds more hooks\n\n## Depends on\n- az-lsi (native hook integration - provides foundation)","notes":"## Implementation Plan Approved\n\n### Approach\n- Full PTYMonitor service (separate scoped service)\n- Full state detection (busy, error, done using existing StateDetector patterns)\n- Hooks take priority (2s window after hook fires)\n- 500ms polling interval\n\n### Files to Modify\n1. `src/core/TmuxService.ts` - Add `capturePane` method\n2. `src/core/PTYMonitor.ts` - Create new service (~180 lines)\n3. `src/ui/atoms.ts` - Wire PTYMonitor, update session atoms\n4. `src/services/BoardService.ts` - Integrate metrics into loadTasks\n\n### Types Already Exist\n- SessionMetrics, AgentPhase, TaskWithSession in src/ui/types.ts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T01:04:40.22594+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:45:38.912457+11:00","dependencies":[{"issue_id":"az-zu3","depends_on_id":"az-lsi","type":"blocks","created_at":"2025-12-17T01:04:47.033729+11:00","created_by":"daemon"}]}
{"id":"az-1lu4","title":"setup ~/prog/Chefy with az devServer config","description":"need VITE_PORT=3000 and VITE_SERVER_PORT=8080 i think","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T20:24:08.797637+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T20:43:16.682304+11:00"}
{"id":"az-qkrz","title":"we should have a status/icon for when initCommands are going (pre aiTool)","description":"currently we just see the blue dot but it doesnt make sense to show that till aiTool is going","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:53:19.249383+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T13:46:42.199815+11:00"}
{"id":"az-u6hi","title":"attach to dev server menu enter/space kills the servers instead of attaching","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:53:23.868537+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T18:58:46.124871+11:00"}
{"id":"az-t4t","title":"Keyboard navigation (vim-style)","description":"Implement vim-style keyboard navigation for the Kanban board.","notes":"Session 2025-12-11 (evening):\n\nCOMPLETED:\n- Full Helix-style modal keybinding system implemented\n- Normal mode: hjkl navigation, g‚Üígoto, v‚Üíselect, Space‚Üíaction menu\n- Goto mode: gw shows 2-char jump labels (home row keys), gg/ge first/last, gh/gl column ends\n- Select mode: multi-selection via Space toggle, hjkl navigation\n- Action mode: h/l moves task(s) to adjacent column (updates status via bd CLI)\n- Ctrl-d/Ctrl-u half-page scrolling\n- Catppuccin Mocha theme colors\n- Virtual scrolling: columns show maxVisible tasks based on terminal height\n- StatusBar shows mode (NOR/SEL/GTO/ACT) with contextual keybind hints\n\nFILES MODIFIED:\n- src/ui/types.ts - Added EditorMode, GotoSubMode, JumpTarget types, generateJumpLabels()\n- src/ui/App.tsx - Full modal state machine, keyboard handling, terminal height calculation\n- src/ui/Board.tsx - Added activeTaskIndex, terminalHeight props\n- src/ui/Column.tsx - Virtual scrolling with scroll indicators\n- src/ui/TaskCard.tsx - Simplified to avoid OpenTUI fragment bugs\n- src/ui/StatusBar.tsx - Mode indicator + contextual keybinds per mode\n- src/ui/theme.ts - Catppuccin Mocha color palette\n- src/ui/atoms.ts - moveTaskEffect, moveTasksEffect for task movement\n- README.md - Comprehensive Helix-style keybinding documentation\n\nISSUES FIXED:\n- client.ready() only returned open/unblocked tasks - changed to client.list()\n- OpenTUI JSX fragments caused rendering corruption - use single text elements\n- Column overflow - implemented virtual scrolling\n\nREMAINING:\n- Some minor rendering artifacts in first column (title-only cards occasionally)\n- Action mode only implements h/l (move) - s/a/p/r/d/P not yet implemented\n\nNEXT STEPS:\n- Could close this bead - core vim-style navigation is complete\n- Action mode commands (start session, attach, etc.) belong in az-stv (Task actions)\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:45:07.772639+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T23:49:35.046226+11:00","dependencies":[{"issue_id":"az-t4t","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T14:46:08.800764+11:00","created_by":"daemon"},{"issue_id":"az-t4t","depends_on_id":"az-hri","type":"blocks","created_at":"2025-12-11T14:46:26.269114+11:00","created_by":"daemon"}]}
{"id":"az-c9y","title":"Replace verbose StatusBar stats with compact indicators","description":"Replace verbose 'Tasks: 12  Active: 3' with compact indicators '12‚öô 3‚è∏ 2‚úó'. Expand to full text on wide terminals (‚â•100 cols). Add noteworthy alerts section that appears only when sessions need attention.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-12T13:24:59.538659+11:00","updated_at":"2025-12-12T13:25:20.220062+11:00","dependencies":[{"issue_id":"az-c9y","depends_on_id":"az-dqt","type":"blocks","created_at":"2025-12-12T13:25:26.209397+11:00","created_by":"daemon"}]}
{"id":"az-re74","title":"we need to copy .direnv not just when creating sessions for claude but also for diffing etc","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:19:34.817831+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T14:13:45.741314+11:00"}
{"id":"az-tfb3","title":"poll git pulls when git mode is remote","description":"When workflowMode is \"origin\", the behind-count calculation uses `origin/main` refs that can become stale. We need to periodically fetch from remote to keep these refs updated.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:47:22.406609+11:00","updated_at":"2025-12-29T15:05:30.644054+11:00","closed_at":"2025-12-29T15:05:30.644057+11:00"}
{"id":"az-jhbz","title":"fix issues with select mode","description":"i cant do any actions on selected items currently\ni need to be able to move them left/right columns, clean them up, etc\nkeybind is wrong. space should be to open action menu not to select. select should be \"a\" or something.\nshould be select all in column keybind\nshould be select all keybind \"%\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:35:39.722356+11:00","updated_at":"2025-12-31T11:02:28.329796+11:00","closed_at":"2025-12-31T11:02:28.329799+11:00"}
{"id":"az-okd4","title":"changing project during epic drilldown shows 0 beads","description":"it stays in epic drill down mode in other project which doesnt end up working very well","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:00:45.264369+11:00","updated_at":"2025-12-30T11:23:46.739155+11:00","closed_at":"2025-12-30T11:23:46.739155+11:00"}
{"id":"az-kud","title":"improve tmux workflow","description":"i want to figure out a way to use az as the primary way i navigate through tmux to the right sessions.\ni am just starting to learn tmux so i may be doing thing all wrong but so far i've been pressing ctrl-a s to open the tmux session picker i guess and then navigating to az session or another session created previously by az.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:24:37.484276+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T22:37:21.448766+11:00"}
{"id":"az-vhfg","title":"brainstorm ideas for reducing number of active tmux sessions","description":"sometimes i leave too many tmux sessions running because i dont bother space d or space x to end them.\nhow can we deal with this?","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T15:46:16.5296+11:00","updated_at":"2025-12-23T15:46:16.5296+11:00"}
{"id":"az-8wyv","title":"diff view not great","description":"its not got code highlighting, +/-, etc...","notes":"## Root Cause\nThe diff view was using `git diff --color=always` but difftastic (configured as `diff.external` in user's gitconfig) uses its own `DFT_COLOR` environment variable, not git's `--color` flag.\n\n## Solution\nAdded `DFT_COLOR=always` to the git diff command in `PRHandlersService.ts:showDiff()`.\n\nThe fix respects user's git configuration:\n- If user has difftastic as `diff.external` ‚Üí DFT_COLOR enables syntax highlighting\n- If user has delta or default git diff ‚Üí `--color=always` still works\n\n## Changes\n- `src/services/keyboard/PRHandlersService.ts`: Added `DFT_COLOR=always` environment variable to the diff command\n\n## Configuration Note\nUser's difftastic is properly configured in `~/nix/home.nix`:\n```nix\nprograms.git.difftastic = {\n  enable = true;\n  enableAsDifftool = true;\n  background = \"dark\";\n};\n```\nThis generates `diff.external = \"difft --background dark\"` in gitconfig.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T00:42:38.725574+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:30.876106+11:00"}
{"id":"az-o72x","title":"Create OrchestrateHandlersService","description":"New service: src/services/keyboard/OrchestrateHandlersService.ts\n\nMethods:\n- `enterFromDetail()`: Get current detail overlay task, validate epic, load children with session state, call editor.enterOrchestrate()\n- `confirmSpawn()`: Get selected IDs from mode, validate non-empty, exit mode, emit spawn event, show toast\n\nDependencies: EditorService, BeadsClient, BoardService, SessionService, ToastService, OverlayService\n\nAdd to layer in service index.","notes":"üìé [mjbktf29-tf9a.png](.beads/images/az-o72x/mjbktf29-tf9a.png) (clipboard, 12/19/2025, 2:09:27 AM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:03.999509+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:43.294016+11:00","dependencies":[{"issue_id":"az-o72x","depends_on_id":"az-ccvg","type":"blocks","created_at":"2025-12-19T01:43:49.461104+11:00","created_by":"daemon"},{"issue_id":"az-o72x","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:23.992297+11:00","created_by":"daemon"},{"issue_id":"az-o72x","depends_on_id":"az-9870","type":"blocks","created_at":"2025-12-19T01:43:48.908342+11:00","created_by":"daemon"}]}
{"id":"az-an4s","title":"cleanup beads","description":"merge duplicates, move completed tasks out of open/in progress, improve organization (create epics, add dependencies/blocking, etc), any other cleanup you can think of","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T15:37:23.194184+11:00","updated_at":"2025-12-18T15:37:33.100308+11:00","deleted_at":"2025-12-18T15:37:33.100308+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-rg9b","title":"add keybind to refresh git stats (lines changed) on all beads","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T02:23:48.675998+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-24T02:46:52.750419+11:00"}
{"id":"az-o1h2","title":"there are tmux claude sessions running here and i can space a to attach","description":"but as you can see from the image we dont see and of their status at all","notes":"**Resolution:** Not a bug - expected behavior per design decision.\n\n**Root cause:** Session monitoring filters for `claude-` prefix (defined in `src/core/paths.ts:12`). Old sessions (`az-1app`, `az-md0x`, etc.) use the old naming format without the prefix.\n\n**Decision made:** User chose \"migrate old sessions\" approach - no backwards compatibility. Old sessions won't show status; they need to be restarted to use new naming.\n\n**Verification:**\n- `claude-az-o1h2` has `@az_status=waiting` ‚úÖ (monitoring works for new format)\n- `claude-az-ktbd` has no status set (hooks may not be installed in that worktree)\n- `az-1app`, `az-md0x` etc. are invisible to monitor (old naming format)\n\n**Action for users:** Stop and restart in-progress sessions to get status indicators. New sessions spawned via Space+s will automatically use the correct `claude-\u003cbeadId\u003e` format.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:52:09.362856+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T23:22:04.382711+11:00"}
{"id":"az-om3","title":"WorktreeManager - git worktree lifecycle","description":"Manage git worktree creation, tracking, and cleanup for isolated task execution.","notes":"Implemented WorktreeManager Effect service with:\n- Service interface with create, remove, list, exists, get methods\n- Error types: GitError, WorktreeNotFoundError, WorktreeExistsError, NotAGitRepoError\n- Idempotent create operation (safe to call multiple times)\n- Ref-based state tracking for active worktrees\n- Parses git worktree list --porcelain output\n- acquireRelease pattern via acquireWorktree for cleanup guarantees\n- Convenience functions for all operations\n- WorktreeManagerLive and WorktreeManagerLiveWithPlatform layers\n- Comprehensive example file with 7 usage patterns\n- Follows BeadsClient and TmuxService patterns\n- All type checks pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:44.585679+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T18:03:13.741817+11:00","dependencies":[{"issue_id":"az-om3","depends_on_id":"az-d8z","type":"parent-child","created_at":"2025-12-11T14:46:08.224593+11:00","created_by":"daemon"}]}
{"id":"az-eemx","title":"use new tmux window per dev server, not panes","description":"that way the system is way more durable, also try to improve durability if you can see any way to do so","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T15:04:47.56107+11:00","updated_at":"2025-12-29T18:06:34.689877+11:00","closed_at":"2025-12-29T18:06:34.689879+11:00"}
{"id":"az-6t6","title":"Manual worktree cleanup action (Space+d)","description":"Add Space+d action to manually delete a worktree and its branch.\n\n**Use cases:**\n- Abandoned work that won't be merged\n- Failed PRs that need cleanup\n- Manual housekeeping\n\n**Implementation:**\n- Add to ActionPalette with state check (only available when worktree exists)\n- Confirm dialog before deletion (destructive action)\n- WorktreeManager.remove() + git branch -D\n- Update task card to remove blue dot\n- Toast notification on success/failure\n\n**Depends on:** [deleted:az-yf4] (PRWorkflow) for the cleanup utility function","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T12:26:24.70141+11:00","updated_at":"2025-12-28T11:48:04.451447+11:00","dependencies":[{"issue_id":"az-6t6","depends_on_id":"az-yf4","type":"blocks","created_at":"2025-12-12T12:26:35.152751+11:00","created_by":"daemon"}]}
{"id":"az-lex","title":"setup ~/prog/Chefy with az config","description":"we need to setup chefy ready to use az with a proper config. draw inspo from this repo's config. chefy uses pnpm so pnpm i not bun i on new worktrees, it also uses direnv but should use envdev as well after direnv allow, should also use zsh, etc","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:46:08.985802+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T15:35:21.030523+11:00"}
{"id":"az-wvkz","title":"we need to make some improvements to our git diff file picker","description":"scrolls out of bounds, need to add ctrl-u/d for scrolling up/down and / for searching","notes":"üìé [mjsftwk7-urhm.png](.beads/images/az-wvkz/mjsftwk7-urhm.png) (clipboard, 12/30/2025, 9:21:57 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T21:21:48.645374+11:00","updated_at":"2025-12-30T22:18:55.6711+11:00","closed_at":"2025-12-30T22:18:55.671104+11:00"}
{"id":"az-5ctw","title":"design how to show dependencies in epic drill down view","description":"then implement it","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T11:44:41.367965+11:00","updated_at":"2025-12-19T11:44:41.367965+11:00"}
{"id":"az-ap1","title":"Complete CLI commands (attach, pause, status, sync)","description":"src/cli/index.ts has 5 TODO placeholders:\n\n- **attach** (line 174): Implement session attachment via TmuxService\n- **pause** (line 201): Implement session pause\n- **status** (line 226): Display session/board status summary\n- **sync** (line 255-259): Sync worktrees (all vs current directory)\n\nCLI should be fully functional for non-TUI workflows.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:59:44.511089+11:00","updated_at":"2025-12-17T15:59:44.511089+11:00"}
{"id":"az-4zq","title":"session monitoring not working. i assume due to permission denied on hooks","description":"we may need to chmod hook scripts?","notes":"Fixed. Root cause: Effect.fork() immediately interrupts child fibers when parent effect completes. Changed to Effect.forkScoped() which ties fiber lifetime to caller's scope. Also added immediate processing of pending notifications on startup. Documented fork vs forkScoped in CLAUDE.md.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T17:14:22.614097+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T00:38:48.996207+11:00"}
{"id":"az-t6k3","title":"i want untracked and staged files to be accounted for in space f and git status on cards","description":"so when a claude session is working away but not yet done i can see the git lines added/removed on cards and see the changes come in via space f \nif this is not possible without losing something that we already have tell me and close the bead without and impl\nif it is possible without any tradeoffs, tell me how and show me your plan and ill approve it","notes":"üìé [mjgcspmg-09hu.png](.beads/images/az-t6k3/mjgcspmg-09hu.png) (clipboard, 12/22/2025, 10:23:48 AM)\nüìé [mjgcsxsi-qqzd.png](.beads/images/az-t6k3/mjgcsxsi-qqzd.png) (clipboard, 12/22/2025, 10:23:59 AM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T10:23:36.192775+11:00","updated_at":"2025-12-30T10:46:58.232284+11:00","closed_at":"2025-12-30T10:46:58.232286+11:00"}
{"id":"az-i0d","title":"improve the initial prompt when we press space S","description":"sometimes claude gets confused and doesnt realise we are saying to work on a specific bead with that id","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T01:23:28.189773+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T01:34:17.372932+11:00"}
{"id":"az-c7e","title":"FileLockManager - prevent concurrent file access","description":"Implement socket-based file locking to prevent multiple Claude sessions from editing the same file simultaneously.","notes":"Implemented FileLockManager service following Effect patterns:\n\nCore implementation:\n- Service defined using Effect.Tag pattern (FileLockManager)\n- Lock types: exclusive (write) vs shared (read)\n- Error types: LockError, LockTimeoutError, LockConflictError\n- Lock state tracking via Ref\u003cHashMap\u003cPath, LockState\u003e\u003e\n\nKey methods:\n- acquireLock(path, type, timeout?, sessionId?): acquires lock or waits in queue\n- releaseLock(lock): releases lock and processes wait queue\n- getLockState(path): inspection for debugging/monitoring\n- withLock(options, effect): scoped convenience function for automatic cleanup\n\nLock semantics:\n- Exclusive locks: only one holder, blocks all other locks\n- Shared locks: multiple holders allowed, blocks exclusive locks\n- Wait queue processing: FIFO with automatic grant when compatible\n\nFeatures:\n- Effect.ensuring for automatic lock release\n- Deferred + timeoutFail for timeout handling\n- Automatic wait queue cleanup on fiber interruption\n- Path normalization for consistent lock granularity\n- Project hash for socket paths: /tmp/azedarach-\u003chash\u003e.sock\n\nFiles created:\n- src/core/FileLockManager.ts (580 lines)\n- src/core/FileLockManager.example.ts (354 lines with 8 examples)\n\nType checking: CLEAN (no errors)\nFollows patterns from: TmuxService, WorktreeManager, StateDetector","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:45.033059+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:30:40.810809+11:00","dependencies":[{"issue_id":"az-c7e","depends_on_id":"az-d8z","type":"parent-child","created_at":"2025-12-11T14:46:08.562322+11:00","created_by":"daemon"}]}
{"id":"az-6la","title":"Add context health border colors to TaskCard","description":"Encode context health into TaskCard border color when session is active: lavender (healthy, \u003c70%), yellow (warning, 70-90%), red (critical, \u003e90%). Requires contextPercent from TaskWithSession.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T13:24:59.426477+11:00","updated_at":"2025-12-12T13:25:20.07394+11:00","dependencies":[{"issue_id":"az-6la","depends_on_id":"az-dqt","type":"blocks","created_at":"2025-12-12T13:25:26.111928+11:00","created_by":"daemon"}]}
{"id":"az-lyq4","title":"Port Azedarach from Shore to LustreTUI","description":"Once LustreTUI is validated via demo app (az-8zkp), migrate Azedarach Gleam version to use it.\n\n## What\n- Replace Shore imports with lustre_tui\n- Update view code to use new Element/Attribute API\n- Verify colors, layout, keybinds all work correctly\n- Compare visual output to TypeScript version\n\n## Migration Steps\n1. Update gleam.toml dependencies\n2. Replace Shore view functions with lustre_tui equivalents\n3. Update color values (Shore format ‚Üí hex strings)\n4. Verify layout renders correctly\n5. Test all keybinds work\n6. Fix any visual differences from TypeScript version\n\n## Key Mappings\n```gleam\n// Shore ‚Üí LustreTUI\nshore.box([...]) ‚Üí lustre_tui.box([...], [...])\nshore.text(\"...\") ‚Üí lustre_tui.text([fg(\"#color\")], \"...\")\nshore.row([...]) ‚Üí lustre_tui.box([flex_direction(Row)], [...])\nshore.column([...]) ‚Üí lustre_tui.box([flex_direction(Column)], [...])\n```\n\n## Dependencies\n- az-8zkp: Demo app must pass all validation checks first\n\n## Acceptance Criteria\n- [ ] All 4 Kanban columns display correctly\n- [ ] Hex colors work (Catppuccin Macchiato theme)\n- [ ] Status bar on single line with inline colored text (was broken in Shore)\n- [ ] All keyboard input works (j/k navigation, Space for actions, etc.)\n- [ ] Overlays render correctly (action menu, search)\n- [ ] No regressions from TypeScript version\n- [ ] Performance acceptable (no noticeable lag)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T11:26:08.488708+11:00","updated_at":"2025-12-28T11:35:22.01886+11:00","dependencies":[{"issue_id":"az-lyq4","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:26:18.943409+11:00","created_by":"daemon"},{"issue_id":"az-lyq4","depends_on_id":"az-7tzh","type":"blocks","created_at":"2025-12-28T11:26:28.974911+11:00","created_by":"daemon"},{"issue_id":"az-lyq4","depends_on_id":"az-8zkp","type":"blocks","created_at":"2025-12-28T11:34:13.630032+11:00","created_by":"daemon"}]}
{"id":"az-p3hh","title":"when a dev command starts many dev servers the space menu shows only 1 port next to r keybind","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T13:31:41.261372+11:00","updated_at":"2025-12-23T14:39:32.507356+11:00"}
{"id":"az-krz","title":"User documentation and guides","description":"Create comprehensive user documentation in docs/ folder covering TUI usage, keybindings, tmux integration, services architecture, and testing procedures.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T10:43:35.93321+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:43:42.698148+11:00"}
{"id":"az-8ivo","title":"Add orchestrate mode atoms","description":"In src/ui/atoms/mode.ts, add:\n\n1. `isOrchestrateAtom` - derived boolean for mode check\n2. `orchestrateStateAtom` - full orchestrate mode state (or null)\n3. `orchestrateSelectedIdsAtom` - selected task IDs\n4. `orchestrateFocusIndexAtom` - current focus index\n5. `orchestrateSpawnableCountAtom` - count of spawnable tasks\n6. Action atoms for EditorService methods:\n   - `orchestrateMoveDownAtom`\n   - `orchestrateMoveUpAtom`\n   - `orchestrateToggleAtom`\n   - `orchestrateSelectAllAtom`\n   - `orchestrateSelectNoneAtom`\n   - `exitOrchestrateAtom`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:06.245377+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:32.339402+11:00","dependencies":[{"issue_id":"az-8ivo","depends_on_id":"az-9870","type":"blocks","created_at":"2025-12-19T01:43:50.728533+11:00","created_by":"daemon"},{"issue_id":"az-8ivo","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:26.55225+11:00","created_by":"daemon"}]}
{"id":"az-711d","title":"if initCommands fail do we have some way to know about that?","description":"i think initCommands may be failing in Chefy project","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:42:30.879303+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T12:53:59.501685+11:00"}
{"id":"az-bjp","title":"Parallel worker spawning from orchestration mode","description":"When user confirms orchestration, spawn workers in parallel.\n\n**Implementation:**\n- Use Effect.forEach with concurrency for parallel worktree creation\n- Each worker: WorktreeManager.create ‚Üí TmuxService.newSession ‚Üí inject template\n- Reserve issues via Agent Mail (if available)\n- Track all spawned workers in SessionManager\n\n**Error handling:**\n- If any spawn fails, show toast but continue with others\n- Partial success is acceptable","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T13:29:14.790073+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:54:57.084917+11:00","dependencies":[{"issue_id":"az-bjp","depends_on_id":"az-lqb","type":"blocks","created_at":"2025-12-12T13:29:24.88113+11:00","created_by":"daemon"},{"issue_id":"az-bjp","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-12T13:29:32.765448+11:00","created_by":"daemon"},{"issue_id":"az-bjp","depends_on_id":"az-7sr","type":"blocks","created_at":"2025-12-12T13:29:24.844916+11:00","created_by":"daemon"}]}
{"id":"az-yf4","title":"PRWorkflow - automated GitHub PR creation","description":"Automate PR creation when tasks complete using gh CLI.\n\nDesign:\n- Define PRWorkflow as Effect.Service\n- Depends on: SessionManager, WorktreeManager, BeadsClient, Config\n- Use @effect/platform Command for git and gh CLI operations\n\nMethods:\n  - createPR(beadId): Effect\u003cPR, PRError | GitError\u003e\n  - getPR(beadId): Effect\u003cPR | null, PRError\u003e\n  - mergePR(prNumber): Effect\u003cvoid, PRError\u003e\n  - cleanup(beadId): Effect\u003cvoid, GitError\u003e -- NEW\n\nWorkflow on \"done\" state:\n  1. bd sync (via BeadsClient)\n  2. git add -A \u0026\u0026 git commit\n  3. git push -u origin \u003cbranch\u003e\n  4. gh pr create --draft --title \"...\" --body \"...\"\n\nPR body template includes bead description, acceptance criteria.\nLink PR back to bead via bd update --notes.\nUse Effect.retry with Schedule for transient failures.\n\n**Cleanup after merge:**\n  1. Ensure session is stopped\n  2. WorktreeManager.remove() - delete worktree directory\n  3. git push origin --delete \u003cbranch\u003e - delete remote branch\n  4. git branch -D \u003cbranch\u003e - delete local branch\n  5. bd close \u003cbeadId\u003e - mark task complete\n\nThis cleanup function will also be exposed for manual use (az-6t6).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:45:24.509773+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T12:30:29.541722+11:00","dependencies":[{"issue_id":"az-yf4","depends_on_id":"az-zv6","type":"parent-child","created_at":"2025-12-11T14:46:09.444969+11:00","created_by":"daemon"},{"issue_id":"az-yf4","depends_on_id":"az-xi5","type":"blocks","created_at":"2025-12-11T14:46:28.29207+11:00","created_by":"daemon"}]}
{"id":"az-8ep","title":"Beads sync coordination for worktrees","description":"Coordinate beads sync across main repo and worktrees.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:45:24.819887+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T12:17:55.89465+11:00","dependencies":[{"issue_id":"az-8ep","depends_on_id":"az-zv6","type":"parent-child","created_at":"2025-12-11T14:46:09.882335+11:00","created_by":"daemon"}]}
{"id":"az-eh8i","title":"help me figure out what the point of effect atom is","description":"i appreciate some of the features but i cant help but feel i should be doing all the state and state derivation in the effect services layers\nwhat are the use cases where we should do one vs the other?","notes":"Completed research task. The architecture is correct - effect-atom serves as a React integration layer, not a replacement for Effect services. Key insight: atoms excel at parameterized derivations and cross-service composition for UI needs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T23:21:15.448445+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T23:53:11.436442+11:00"}
{"id":"az-pnx","title":"Configuration system with @effect/schema and Effect Config","description":"User configuration loading and validation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:41.673276+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T17:24:13.126088+11:00","dependencies":[{"issue_id":"az-pnx","depends_on_id":"az-ee4","type":"parent-child","created_at":"2025-12-11T14:46:10.015922+11:00","created_by":"daemon"}]}
{"id":"az-rtma","title":"when init and bg tasks are done, kill their tmux windows","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T11:50:11.634188+11:00","updated_at":"2026-01-05T12:01:59.811758+11:00","closed_at":"2026-01-05T12:01:59.811758+11:00"}
{"id":"az-f3iw","title":"sometimes action menu command gets sent to wrong bead/worktree","description":"i just pressed space d and then y to confirm cleanup on a bead and then immediately moved my cursor and the fuckin newly cursor selected bead is the one that was cleaned up!","notes":"Implementation complete. Needs manual testing to verify:\n1. Normal flow works (Space+action+confirm)\n2. Rapid keypresses still target correct bead\n3. Moving cursor after action key but before confirm still targets original bead","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T01:58:31.886682+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T03:37:41.26313+11:00"}
{"id":"az-e3k","title":"do a full report on all the beads flows az uses","description":"i want to know all the ways our app connects with beads/uses the beads cli","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:14:03.324845+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T10:19:39.166353+11:00"}
{"id":"az-kej","title":"add a way to see the diff between a bead branch and main so i can code review","notes":"Using tmux popup approach (like Space+L for logs) instead of custom overlay - simpler, better scrolling, proper terminal rendering of ANSI colors from git diff","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T02:10:27.860224+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T02:22:52.010639+11:00"}
{"id":"az-vpz","title":"Migrate state management to Effect-atom native patterns","description":"Refactor current state management to use Effect-atom native patterns for better integration with the Effect ecosystem. This includes:\n\n- Audit current state management approach\n- Identify candidates for migration to effect-atom\n- Implement atomic state with proper Effect integration\n- Ensure reactive updates flow through the TUI correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T10:32:35.479946+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T12:42:24.80598+11:00"}
{"id":"az-0y87","title":"use prompt injection instead of making the prompt \"use bd show to get the task details\"","description":"so fully inject the bead contents instead of them having to use bd show","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T03:46:12.071611+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T18:20:33.215188+11:00"}
{"id":"az-dvsr","title":"Dev server integration (Space+r)","description":"Add ability to spawn and manage dev servers from Azedarach.\n\n**Inspiration:** Vibe Kanban lets users launch dev servers and monitor them.\n\n**Features:**\n- Space+r in action mode to start dev server\n- Spawn in dedicated tmux pane (not session pane)\n- Parse port from output, show URL in status bar\n- Toggle to kill server\n- Auto-cleanup on exit\n\n**Command Detection (priority order):**\n1. Config override: `devServer.command` if set\n2. package.json scripts: check for `dev`, `start`, `serve`\n3. Lock file detection:\n   - bun.lockb ‚Üí `bun run dev`\n   - pnpm-lock.yaml ‚Üí `pnpm run dev`\n   - yarn.lock ‚Üí `yarn dev`\n   - package-lock.json ‚Üí `npm run dev`\n4. Fallback: `npm run dev`\n\n**Config (azedarach.json):**\n```json\n{\n  \"devServer\": {\n    \"command\": \"bun run dev:local\",\n    \"portPattern\": \"localhost:(\\\\d+)\",\n    \"cwd\": \".\"\n  }\n}\n```\n\n**Implementation:**\n- Add DevServerService to manage lifecycle\n- StatusBar shows: localhost:3000 when running\n- Space+r toggles: start if stopped, stop if running\n\n**UI:**\n- ActionPalette: \"dev server\" action\n- StatusBar: port indicator when running\n- Toast on start/stop","notes":"PR: ","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T16:00:00+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T19:24:18.771407+11:00"}
{"id":"az-uxz","title":"Action palette overlay for Space menu","description":"Action mode keybindings are getting crowded in the status bar. Create a proper floating action palette that appears when Space is pressed, showing all available actions with descriptions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T12:00:26.143992+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T12:16:53.933473+11:00"}
{"id":"az-3prx","title":"make space c to chat use a tmux claude session just like space s","description":"the popup is cool but prevents me from doing stuff while waiting for claude's response","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:24:21.445001+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:30.145464+11:00"}
{"id":"az-gzgg","title":"Prompt user to configure dependencies when creating task in epic drill-down","description":"When a task is created within an epic drill-down view, the new task may have dependencies on other tasks in the same epic. Currently we only auto-link the task to the epic as a parent-child relationship, but we don't help the user establish sibling dependencies.\n\nFor example, if an epic has tasks A, B, C and the user creates task D, task D might need to depend on task B completing first. The user currently has to manually set this up after creation.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-19T15:10:45.058612+11:00","updated_at":"2025-12-19T15:10:45.058612+11:00","dependencies":[{"issue_id":"az-gzgg","depends_on_id":"az-5z7z","type":"discovered-from","created_at":"2025-12-19T15:10:52.889655+11:00","created_by":"daemon"}]}
{"id":"az-9b8","title":"Epic progress indicator in TaskCard","description":"Show progress bar for epic tasks: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 3/5\n\n**Implementation:**\n- Query child task statuses\n- Calculate completed/total\n- Render as Unicode progress bar\n- Only show for issue_type=epic\n\n**Space cost:** One line, replaces description line for epics","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-12T13:29:15.040003+11:00","updated_at":"2025-12-12T13:29:15.040003+11:00","dependencies":[{"issue_id":"az-9b8","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-12T13:29:32.835556+11:00","created_by":"daemon"}]}
{"id":"az-4r0","title":"AgentMailClient Effect service","description":"Create Effect service wrapper for Agent Mail HTTP API.\n\nDesign:\n- Define AgentMailClient as Effect.Service\n- Use @effect/platform HttpClient for requests\n- Methods:\n  - reserve(issueId): Effect\u003cReservation, ReservationError\u003e\n  - release(issueId): Effect\u003cvoid, ReleaseError\u003e\n  - ready(): Effect\u003cIssue[], AgentMailError\u003e\n  - updateStatus(issueId, status): Effect\u003cvoid, AgentMailError\u003e\n  - isAvailable(): Effect\u003cboolean, never\u003e (health check)\n- Read config from environment variables\n- Graceful degradation: return fallback when server unavailable\n- Retry logic with exponential backoff\n- Create AgentMailClientLive and AgentMailClientTest layers","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T10:33:13.475812+11:00","updated_at":"2025-12-12T10:33:13.475812+11:00","dependencies":[{"issue_id":"az-4r0","depends_on_id":"az-l7a","type":"blocks","created_at":"2025-12-12T10:33:21.800097+11:00","created_by":"daemon"}]}
{"id":"az-i5fb","title":"i'm going to show the project to others","description":"tell me what i should do first before opening it up as an opensource repo. e.g. check for security issues (keys), add license, credit creator of/repo of beads etc","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T14:37:44.071386+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:11:04.204356+11:00"}
{"id":"az-otrx","title":"tui_core: Terminal resize handling (SIGWINCH)","description":"**Goal:** Handle terminal resize events so the TUI reflows correctly.\n\n## Why Critical\nIf the terminal resizes and we don't handle it:\n- Layout is wrong (still using old dimensions)\n- Rendering artifacts appear\n- User experience breaks\n\n## Implementation\n\n### Signal-based (Unix)\n```gleam\n// Listen for SIGWINCH signal\n// On signal: \n//   1. Query new terminal size\n//   2. Resize FrameBuffer\n//   3. Trigger full re-layout + re-render\n```\n\n### Polling fallback\n```gleam\n// Poll terminal size every N frames\n// On change: same as above\n```\n\n## API Addition\n```gleam\n// In tui_core/terminal\nfn get_terminal_size() -\u003e #(Int, Int)  // (width, height)\n\n// In InputHandler or Runtime\ntype Event {\n  Key(KeyEvent)\n  Resize(width: Int, height: Int)\n}\n```\n\n## Integration Points\n- az-xe2h (FrameBuffer) - needs `resize()` function\n- az-d19m (Runtime) - needs to handle Resize events\n- az-se6w (Layout) - needs to relayout on resize\n\n## Acceptance Criteria\n- [ ] Detect terminal resize (SIGWINCH or polling)\n- [ ] FrameBuffer resizes correctly\n- [ ] Full re-layout triggers\n- [ ] No visual artifacts during resize\n- [ ] Works on macOS and Linux","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T11:43:06.692712+11:00","updated_at":"2025-12-30T00:29:51.513613+11:00","closed_at":"2025-12-30T00:29:51.513613+11:00","dependencies":[{"issue_id":"az-otrx","depends_on_id":"az-zh3y","type":"blocks","created_at":"2025-12-28T11:43:16.802615+11:00","created_by":"daemon"},{"issue_id":"az-otrx","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:43:16.740429+11:00","created_by":"daemon"}]}
{"id":"az-p9ut","title":"task header isnt responsive enough","notes":"üìé [mjfpdk96-xvvs.png](.beads/images/az-p9ut/mjfpdk96-xvvs.png) (clipboard, 12/21/2025, 11:28:10 PM)","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-21T23:28:08.094691+11:00","updated_at":"2025-12-22T13:40:30.598866+11:00"}
{"id":"az-yhc4","title":"space m should inform the user if there are uncommitted changes (other than beads)","description":"* in the worktree","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:38:49.204913+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T03:38:51.051836+11:00"}
{"id":"az-y6n","title":"up arrow in compact view moves a whole page up not a single task up","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T01:08:27.533042+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T10:27:38.776471+11:00"}
{"id":"az-ofl","title":"have to allow claude permissions again in every worktree","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T01:26:49.402571+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T10:58:08.359395+11:00"}
{"id":"az-zr38","title":"dev server code is super fucked up. tear it out and try again","description":"im talking about space r.\nthe dev server popup doesnt work at all - it always shows 0 options","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T12:10:51.451836+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T14:38:00.127616+11:00"}
{"id":"az-qmo","title":"Add stop session action (Space+x)","description":"No way to stop/kill a running session from the TUI. Need Space+x to kill tmux session and mark task as idle.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T11:42:23.169998+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T11:43:10.52549+11:00"}
{"id":"az-4anv","title":"allow specifying model such as github copilot gemini flash preview (opencode)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:15:15.29937+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-22T12:57:56.370302+11:00"}
{"id":"az-7y5","title":"if i /clear in the bead's space S claude session the tmux session seems to be lost in az","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T12:32:07.377782+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:24:45.510132+11:00"}
{"id":"az-5xza","title":"tui_core: Renderer - terminal output with ANSI escape codes","description":"Render FrameBuffer to terminal using ANSI escape codes.\n\n## What\n- Convert Colors (from az-hkfa) to ANSI escape sequences\n- Diff current vs previous FrameBuffer, only emit changes (optimization)\n- Handle cursor positioning, clearing, alt screen buffer\n\n## API (Gleam)\n```gleam\ntype Renderer {\n  Renderer(\n    prev_buffer: Option(FrameBuffer),\n    stdout: Fd,  // or however Gleam handles stdout\n    alt_screen: Bool,\n    cursor_visible: Bool,\n  )\n}\n\nfn new() -\u003e Renderer\nfn render(renderer: Renderer, fb: FrameBuffer) -\u003e Renderer  // Returns updated renderer with prev state\nfn enter_alt_screen(renderer: Renderer) -\u003e Renderer\nfn exit_alt_screen(renderer: Renderer) -\u003e Renderer\nfn show_cursor(renderer: Renderer) -\u003e Renderer\nfn hide_cursor(renderer: Renderer) -\u003e Renderer\nfn move_cursor(renderer: Renderer, x: Int, y: Int) -\u003e Renderer\nfn clear_screen(renderer: Renderer) -\u003e Renderer\nfn flush(renderer: Renderer) -\u003e Renderer\n```\n\n## Rendering Strategy\n```\n1. Compare new FrameBuffer to prev_buffer\n2. For each changed cell:\n   - Move cursor if not adjacent to last write\n   - Set colors/attributes if changed\n   - Write character\n3. Store new buffer as prev for next diff\n4. Flush output\n```\n\n## ANSI Escape Sequences\n```\n\\\\x1b[H          - Move cursor to home (0,0)\n\\\\x1b[{y};{x}H   - Move cursor to position\n\\\\x1b[38;2;R;G;Bm - Set foreground RGB (true color)\n\\\\x1b[48;2;R;G;Bm - Set background RGB (true color)\n\\\\x1b[0m         - Reset all attributes\n\\\\x1b[?1049h     - Enter alt screen\n\\\\x1b[?1049l     - Exit alt screen\n\\\\x1b[?25h      - Show cursor\n\\\\x1b[?25l      - Hide cursor\n```\n\n## Dependencies\n- az-xe2h: FrameBuffer (what we render)\n- az-hkfa: Color (for ANSI conversion)\n- az-se6w: Layout (provides laid-out content to render)\n- az-kmuk: Borders (border drawing during render)\n\n## Reference\n- OpenTUI CliRenderer: packages/core/src/cli-renderer.ts\n\n## Acceptance Criteria\n- [ ] Render FrameBuffer to terminal correctly\n- [ ] Efficient diffing (only redraw changed cells)\n- [ ] Alt screen buffer works (clean enter/exit)\n- [ ] Cursor visibility control works\n- [ ] No visual artifacts or flicker\n- [ ] True color (24-bit) output works","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T11:26:07.647035+11:00","updated_at":"2025-12-28T11:35:21.612104+11:00","dependencies":[{"issue_id":"az-5xza","depends_on_id":"az-se6w","type":"blocks","created_at":"2025-12-28T11:33:58.495698+11:00","created_by":"daemon"},{"issue_id":"az-5xza","depends_on_id":"az-kmuk","type":"blocks","created_at":"2025-12-28T11:33:58.572521+11:00","created_by":"daemon"},{"issue_id":"az-5xza","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:26:18.658778+11:00","created_by":"daemon"},{"issue_id":"az-5xza","depends_on_id":"az-xe2h","type":"blocks","created_at":"2025-12-28T11:26:28.695953+11:00","created_by":"daemon"}]}
{"id":"az-ivql","title":"hooks not informing when claude prompts","notes":"üìé [mjfh0nen-31wy.png](.beads/images/az-ivql/mjfh0nen-31wy.png) (clipboard, 12/21/2025, 7:34:11 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T19:34:09.775411+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T21:47:28.550981+11:00"}
{"id":"az-h5gk","title":"attached images should be linked in bead description or notes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:29:36.523901+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T15:37:23.405149+11:00"}
{"id":"az-9co","title":"bd sync needs atomic operations to prevent race conditions","notes":"## Problem\n\nMultiple bd processes (daemon, beads-mcp servers, manual bd sync) can race to update the beads-sync branch, causing data loss.\n\n## Race Scenario\n\n1. Process A reads JSONL with [issue-1, issue-2]\n2. Process B creates issue-3, exports to JSONL\n3. Process A commits its JSONL to beads-sync (missing issue-3!)\n4. Process B runs bd sync, pulls from beads-sync\n5. Process B tombstones issue-3 (sees it as \"deleted\")\n\n## Root Cause\n\n- bd sync is not atomic\n- No locking between concurrent bd processes\n- beads-sync branch can be overwritten by stale data\n\n## Proposed Fix (upstream)\n\nOption 1: Git ref transactions\n- Use git's atomic ref updates\n- bd sync should fail if beads-sync moved since last read\n\nOption 2: File-based locking\n- Acquire lock before any sync operation\n- Release after commit+push complete\n\nOption 3: CRDT-based merge\n- Instead of overwrite, use conflict-free merge\n- Tombstones require consensus, not just \"missing from one branch\"\n\n## Workaround (Azedarach)\n\n- Use FileLockManager around bd sync calls\n- Prevents races within our own operations\n- Does NOT fix races with external bd processes\n\n## Related\n\n- az-zby: bd sync incorrectly tombstones issues","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-18T12:55:05.604475+11:00","updated_at":"2025-12-18T12:55:05.879012+11:00"}
{"id":"az-t14x","title":"epic drill down bug","description":"as soon as i pressed enter on an epic this error appeared","notes":"üìé [mjbjp6e6-bkdv.png](.beads/images/az-t14x/mjbjp6e6-bkdv.png) (clipboard, 12/19/2025, 1:38:10 AM)\nüìé [mjbjxvwp-8ur6.png](.beads/images/az-t14x/mjbjxvwp-8ur6.png) (clipboard, 12/19/2025, 1:44:56 AM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:38:08.065373+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T02:23:16.769431+11:00"}
{"id":"az-29ey","title":"add more cli commands so that ai can do stuff like restart dev servers","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T11:52:26.448429+11:00","updated_at":"2025-12-29T15:19:47.913945+11:00","closed_at":"2025-12-29T15:19:47.913945+11:00"}
{"id":"az-o66c","title":"claude -p is not a think. to prompt claude just use claude \"my prompt here\"","description":"issue found with auto merge code","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:00:09.740135+11:00","updated_at":"2025-12-30T14:21:41.279181+11:00","closed_at":"2025-12-30T14:21:41.279181+11:00"}
{"id":"az-h3v","title":"Agent Mail server for local development","description":"Implement simple Agent Mail server for local multi-agent testing.\n\nDesign:\n- Bun HTTP server with Effect\n- In-memory reservation store (Map\u003cissueId, agentName\u003e)\n- Endpoints:\n  - POST /reserve/:issueId - acquire reservation\n  - POST /release/:issueId - release reservation\n  - GET /ready - list unreserved, unblocked issues\n  - POST /status/:issueId - update status\n  - GET /health - server health check\n- WebSocket support for real-time notifications (optional)\n- Configurable port via CLI argument\n- Graceful shutdown handling","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-12T10:33:13.621222+11:00","updated_at":"2025-12-12T10:33:13.621222+11:00","dependencies":[{"issue_id":"az-h3v","depends_on_id":"az-l7a","type":"blocks","created_at":"2025-12-12T10:33:21.836567+11:00","created_by":"daemon"}]}
{"id":"az-t47j","title":"add a space [something] command to break up a task into an epic","description":"make the tasks parallizable as possible, etc","notes":"## Implementation Complete - Refactored to Proper Architecture\n\n### Initial Implementation (commit 9279b92)\nIncorrectly put state management (useState, useEffect) in React component.\n\n### Refactored Implementation (commit 7a36327)\nFixed architecture violation by moving state and logic to Effect layer.\n\n### Architecture Changes\n\n**New Service: `BreakIntoEpicService`**\n- `overlayState: SubscriptionRef\u003cBreakIntoEpicState\u003e` - reactive state\n- `openOverlay(taskId, title, desc)` - sets loading state, fetches suggestions from Claude\n- `closeOverlay()` - resets to closed state\n- `selectNext()` / `selectPrevious()` - navigate suggestions list\n- `confirm()` - creates child tasks and links to parent\n\n**New Keyboard Handler: `handleBreakIntoEpicInput`**\nIn InputHandlersService, handles:\n- `j/k/down/up` - navigate suggestions\n- `Enter` - confirm and create tasks\n- `Escape` - cancel and close\n\n**Refactored Overlay Component**\nNow pure render only:\n```tsx\nconst state = useAtomValue(breakIntoEpicStateAtom)\n// Just JSX based on state\n```\n\n### Three-Layer Architecture\n1. **Effect Services** - BreakIntoEpicService holds state in SubscriptionRef\n2. **Atoms** - breakIntoEpicStateAtom exposes state via appRuntime.subscriptionRef()\n3. **React** - BreakIntoEpicOverlay uses only useAtomValue() and JSX\n\n### Files Modified\n- New: `src/core/BreakIntoEpicService.ts`\n- New: `src/ui/atoms/breakIntoEpic.ts`\n- Modified: `src/services/keyboard/InputHandlersService.ts`\n- Modified: `src/services/KeyboardService.ts`\n- Modified: `src/services/keyboard/bindings.ts`\n- Modified: `src/ui/BreakIntoEpicOverlay.tsx`\n- Modified: `src/ui/App.tsx`\n- Modified: `src/ui/atoms/runtime.ts`\n- Modified: `src/ui/atoms/index.ts`\n- Modified: `src/ui/atoms/task.ts` (removed old atoms)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T17:19:48.668591+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T01:49:50.778666+11:00"}
{"id":"az-05na","title":"add filter mode where i can filter by stuff like status, priority, session, type, etc","notes":"## Implementation Complete ‚úÖ\n\n### Files Changed\n1. **src/services/EditorService.ts** - Added FilterConfig, filter mode type, all filter methods\n2. **src/services/keyboard/types.ts** - Added \"filter\" to KeyMode\n3. **src/services/keyboard/bindings.ts** - All filter keybindings (f, s, p, t, S, e, c, toggles)\n4. **src/services/keyboard/InputHandlersService.ts** - Added filter mode case\n5. **src/services/BoardService.ts** - Extended filterTasks, added isEpicChild computation\n6. **src/services/NavigationService.ts** - Updated to pass filterConfig\n7. **src/ui/FilterMenu.tsx** - New component with sub-menus and hideEpicSubtasks toggle\n8. **src/ui/atoms/mode.ts** - filterConfigAtom, activeFilterFieldAtom, enterFilterAtom\n9. **src/ui/atoms/index.ts** - Exported new atoms\n10. **src/ui/hooks/useEditorMode.ts** - Added filter state and actions\n11. **src/ui/App.tsx** - Integrated FilterMenu, updated modeDisplay\n12. **src/ui/StatusBar.tsx** - Added filter mode keybinding hints\n13. **src/ui/types.ts** - Added isEpicChild to TaskWithSession\n14. **docs/keybindings.md** - Full filter mode documentation\n\n### Features Implemented\n- **f** key enters filter mode\n- **s/p/t/S** sub-menus for status/priority/type/session\n- Toggle individual values within each field\n- **e** toggles hideEpicSubtasks (ON by default - encourages drill-down)\n- **c** clears all filters\n- Filters persist until cleared\n- Combines with text search (/)\n- Reactive updates across all columns\n\n### Type Check: PASSING ‚úÖ","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:49:34.854715+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T13:51:06.436503+11:00"}
{"id":"az-riua","title":"i just tried to create a bead in non default project but it got created in az project (default)","notes":"FIX ACTUALLY IMPLEMENTED NOW:\n\nRoot cause: BeadsClient methods used cwd parameter directly. When not provided, bd ran in process.cwd() (where az was launched) instead of the currently selected project.\n\nFix applied:\n1. Added ProjectService as dependency to BeadsClient\n2. Created getEffectiveCwd() helper that returns explicit cwd OR current project path from ProjectService  \n3. Updated ALL BeadsClient methods (list, show, update, close, sync, syncImportOnly, recoverTombstones, ready, search, create, delete) to use getEffectiveCwd()\n\nNow when you switch projects in the TUI, bd commands execute in the correct project directory.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T14:34:45.119326+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:24:50.29642+11:00"}
{"id":"az-oltq","title":"i need to be able to visualize dependencies in an epic drill down","description":"im not sure if thats feasible on the board. maybe need to add a graph view?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T10:59:57.122894+11:00","updated_at":"2025-12-30T12:15:05.97135+11:00","closed_at":"2025-12-30T12:15:05.97135+11:00"}
{"id":"az-fn1","title":"Allow creating beads via Claude prompt with persistent session","description":"Enable users to create new beads from within azedarach by sending a natural language prompt to Claude.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T02:19:56.843403+11:00","updated_at":"2025-12-17T00:20:45.047717+11:00"}
{"id":"az-0h3d","title":"Create orchestrator session template","description":"Create .claude/session-templates/orchestrator.md that injects:\n- Epic context (title, description, design, acceptance criteria)\n- Child task list with statuses\n- Coordination rules for serial subagent execution\n- Instructions to use Task tool for implementation\n- How to update beads with progress","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:14:04.3656+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T11:52:04.54913+11:00","dependencies":[{"issue_id":"az-0h3d","depends_on_id":"az-wn3o","type":"parent-child","created_at":"2025-12-19T11:14:21.677462+11:00","created_by":"daemon"}]}
{"id":"az-pza","title":"TUI \u0026 Interaction","description":"Ink-based terminal UI: Kanban board, keyboard navigation, session attachment, and user interaction flows.","notes":"Session 2025-12-12:\n\nEPIC PROGRESS: 6/7 tasks completed (86%)\n\nCOMPLETED CHILDREN:\n- az-hri: Basic Kanban board ‚úÖ\n- az-mq9: effect-atom SolidJS adapter ‚úÖ\n- az-t4t: Keyboard navigation (Helix-style) ‚úÖ\n- az-pn6: StatusBar component ‚úÖ\n- az-g19: Terminal attachment (external) ‚úÖ\n- az-srh: Detail view panel ‚úÖ\n\nREMAINING:\n- az-stv: Task actions (start/attach/pause/resume) - NOW UNBLOCKED\n  - Depends on SessionManager (az-xi5) which is now complete\n  - This is the final task to wire session lifecycle to TUI\n\nPHASE 2 STATUS:\nTUI is fully functional with all navigation, selection, task movement, and viewing features. Only session lifecycle integration remains.\n\nNEXT SESSION:\n- Complete az-stv to close this epic\n- Wire SessionManager.start/stop/pause/resume to keyboard actions\n- Add visual feedback for session states in TaskCard","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-11T14:44:04.871997+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:54:04.23523+11:00"}
{"id":"az-u9t","title":"when i start a session it moves in the list","description":"when i press space s to start a tmux session for a bead it moves in the list due to sorting i guess and sometimes this moves it out of view","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:25:41.450657+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T21:29:29.243055+11:00"}
{"id":"az-2ek","title":"Add warning glyphs to TaskCard header","description":"Add tiny warning glyphs (‚ö†üîÑ) to TaskCard headerLine after session indicator. ‚ö† for context warning (\u003e70%), üîÑ for recently compacted. Space cost: 1-2 characters.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-12T13:24:59.779379+11:00","updated_at":"2025-12-12T13:25:20.429502+11:00","dependencies":[{"issue_id":"az-2ek","depends_on_id":"az-dqt","type":"blocks","created_at":"2025-12-12T13:25:26.178601+11:00","created_by":"daemon"}]}
{"id":"az-d2x6","title":"review keybind decisions","description":"see if keybinds are still good or if we need to overhaul them with more modifiers or secondary menu layers e.g. space , opens a secondary menu layer, more of the action menus could be nested like that","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:15:13.916786+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:38:55.583242+11:00"}
{"id":"az-kg5g","title":"getting \"Failed to create PR\" offline error when i am connected to internet","description":"in Chefy project","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T11:02:10.174411+11:00","updated_at":"2025-12-31T17:57:20.977333+11:00","closed_at":"2025-12-31T17:57:20.977333+11:00"}
{"id":"az-c1tg","title":"is the system diagnostics panel up to date? is it missing some stuff?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:44:54.781082+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T13:08:17.360312+11:00"}
{"id":"az-uiid","title":"make sure processes like space m merge are uninterruptible so that pressing q to close awaits them","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:58:23.547877+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:09:22.314389+11:00"}
{"id":"az-05y","title":"Project Foundation","description":"Set up the core project infrastructure: TypeScript, Ink, CLI scaffolding, and foundational utilities.","notes":"Session 2025-12-11:\n\nEPIC PROGRESS: 3/4 tasks completed (75%)\n\nCOMPLETED CHILDREN:\n- az-ags: Project scaffolding ‚úÖ\n- az-fvj: BeadsClient Effect service ‚úÖ\n- az-kis: Utility modules ‚úÖ\n\nREMAINING:\n- az-2qy: CLI argument parsing with @effect/cli (ready to start)\n\nPHASE 1 DELIVERABLES:\n- Full project infrastructure with Bun + Effect + OpenTUI + SolidJS\n- Working CLI entry point (./bin/az.ts)\n- Core services: BeadsClient, TmuxService, TerminalService\n- Custom effect-atom SolidJS adapter (az-mq9, separate from this epic)\n\nNEXT SESSION:\n- Complete az-2qy (CLI parsing) to close this epic\n- Then move to Phase 2: TUI components (az-pza epic)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-11T14:44:04.657366+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:24:42.833983+11:00"}
{"id":"az-tz9","title":"when an operation is happening on a bead such as a merge we should show an indication on board","description":"e.g. show a loading spinner on the bead card itself (top right maybe)","notes":"Implemented operation indicators on task cards.\n\nChanges:\n1. Added `taskRunningOperationAtom(taskId)` in atoms.ts - parameterized atom that subscribes to CommandQueueService state for any task\n2. Updated TaskCard.tsx to show operation indicators (‚è≥ for merge/create-pr, üßπ for cleanup, ‚ö° for start, ‚èπÔ∏è for stop)\n3. Updated CompactView.tsx with same indicator support for compact mode\n\nThe indicators appear in the header line after session/phase indicators when an async operation is running on the bead.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:42:47.237644+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:18:36.213582+11:00"}
{"id":"az-p4wy","title":"add indication of git status in bead/worktree","description":"so in kanban card header we can see if the worktree is behind in commits and/or has uncommitted changes\nwould be cool to be able to see +- as a configurable option too","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T03:33:32.965755+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T18:20:20.236468+11:00"}
{"id":"az-dn2","title":"we keep losing beads in the tui when doing stuff like killing other bead's sessions etc","description":"the following log may be related:\ntimestamp=2025-12-16T13:19:15.063Z level=WARN fiber=#1356 message=\"Sync failed for az-31i: ParseError: Failed to parse JSON: SyntaxError: JSON Parse error: Unrecognized token '‚Üí'\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T23:42:04.341522+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T01:02:07.4346+11:00"}
{"id":"az-xmj","title":"something is wrong with create task with claude STILL","description":"redesign the feature from the ground up cause we have tried to fix it 3 times already","notes":"Starting redesign with \"Direct bd create\" approach: Claude extracts structured data (title/type/priority) from natural language, then we call bd create directly. No more Claude CLI tool execution.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:24:05.459264+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:23:32.780765+11:00"}
{"id":"az-v6h","title":"use effect STM or something to enforce atomic operations where possible","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T15:43:45.048239+11:00","updated_at":"2025-12-17T15:43:45.048239+11:00"}
{"id":"az-ags","title":"Project scaffolding with Bun, Effect, OpenTUI, and SolidJS","description":"Initialize the project with package.json, tsconfig.json (strict mode), and build tooling. Set up Ink as the TUI framework with React 18.","notes":"Session 2025-12-11:\n\nCOMPLETED:\n- package.json with Bun runtime, Effect ecosystem, OpenTUI + SolidJS\n- tsconfig.json with strict mode, SolidJS JSX config, path aliases\n- Directory structure: src/{core,lib,ui,config}, bin/\n- bin/az.ts CLI entry point (executable, runs successfully)\n- src/index.tsx placeholder with solid-js import\n- All dependencies installed via `bun install`\n\nFILES CREATED:\n- package.json - Full dependency list for Effect + OpenTUI stack\n- tsconfig.json - Strict TS with jsx: \"react-jsx\", jsxImportSource: \"solid-js\"\n- bin/az.ts - Shebang entry point\n- src/index.tsx - Placeholder entry\n\nKEY DECISIONS:\n- Using Bun (not Node) because OpenTUI requires Bun's FFI for Zig backend\n- Using pnpm despite Bun runtime (hybrid setup works)\n- tsup for bundling (simpler than esbuild config)\n\nVERIFICATION:\n- `bun run type-check` passes\n- `./bin/az.ts` outputs \"Azedarach - TUI Kanban for Claude orchestration\"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:26.210523+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T17:25:13.896919+11:00","dependencies":[{"issue_id":"az-ags","depends_on_id":"az-05y","type":"parent-child","created_at":"2025-12-11T14:46:07.779213+11:00","created_by":"daemon"}]}
{"id":"az-31ri","title":"dont import from \"node:*\"","description":"import from @effect/platform instead","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:13:35.004191+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:24:34.410587+11:00"}
{"id":"az-l7d","title":"enhance docs with all keybinds, modes, vc explainer, etc","description":"Enhanced documentation with:\\n- keybindings.md: Space+m (merge), Space+i (image attach), Image Attachment Overlay section\\n- services.md: ImageAttachmentService documentation\\n- README.md: Expanded VC Integration with architecture diagram, decision table, examples","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:14:45.203716+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T14:14:51.661199+11:00"}
{"id":"az-moj","title":"State transition hooks system","description":"Pluggable hook system for state transition events.","notes":"Implemented state transition hooks system with the following components:\n\n**Core Services:**\n- `HookRegistry` (src/core/HookRegistry.ts): Main service for hook registration/triggering with Effect.Service pattern\n- `HookOrchestrator` (src/core/HookOrchestrator.ts): Wires HookRegistry to SessionManager's PubSub, registers user shell hooks from config\n\n**Built-in Hooks:**\n- `BuiltInHooks` (src/hooks/BuiltInHooks.ts): Registers NotificationHook, PRCreationHook, BeadsSyncHook\n\n**Configuration:**\n- Added `hooks` section to config schema (schema.ts, defaults.ts)\n- User can define shell commands for each event type: onWaiting, onDone, onError, onPaused\n- Shell hooks receive context via environment variables: HOOK_TASK_ID, HOOK_TASK_TITLE, etc.\n- Can disable built-in hooks with `hooks.disableBuiltIn: true`\n\n**Key Design:**\n- Hook types as tagged union: \"onWaiting\" | \"onDone\" | \"onError\" | \"onPaused\"\n- HookContext: { task, session, worktree, stateChange }\n- Parallel execution with Effect.forEach({ concurrency: \"unbounded\" })\n- Error isolation via Effect.catchAll per hook\n- PubSub subscription for event monitoring\n\nAll types pass strict TypeScript checking.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:24.613629+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T00:46:56.514818+11:00","dependencies":[{"issue_id":"az-moj","depends_on_id":"az-zv6","type":"parent-child","created_at":"2025-12-11T14:46:09.589726+11:00","created_by":"daemon"},{"issue_id":"az-moj","depends_on_id":"az-xi5","type":"blocks","created_at":"2025-12-11T14:46:28.411943+11:00","created_by":"daemon"}]}
{"id":"az-mlv","title":"when i press space m on beads that are in closed column but have tmux session running they seem to merge ok but the beads disappear from closed","description":"no idea where they disappear to","notes":"Root cause found: PRWorkflow.mergeToMain calls `beadsClient.sync(worktree.path)` without `--from-main` flag. Comment says --from-main but code doesn't use it. Fix: add syncFromMain method to BeadsClient and use it in merge workflow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T17:11:43.179532+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T02:01:50.13422+11:00"}
{"id":"az-f4q","title":"Add auto-pilot toggle keybinding (a)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T01:05:15.523081+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T01:06:38.936838+11:00"}
{"id":"az-72fu","title":"prompt injection is a bit silly cause the first thing ai does anyways is always bd show","description":"replace injected prompt with just a simple prompt that tells em to bd show the bead id and maybe some reiteration of keeping the bead up to date (leave this part as it is i guess)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T14:54:28.432163+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-22T14:58:26.318044+11:00"}
{"id":"az-vcxc","title":"why is there a number beside the dev server icon","notes":"Fixed by changing DEV_SERVER_INDICATOR from üñ•Ô∏è to üíª in src/ui/types.ts\n\nThe issue was that the desktop computer emoji has a variation selector (U+FE0F) appended which doesn't render properly in terminals, causing the small icon + vertical lines artifact.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T02:15:19.799683+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-20T04:27:20.640207+11:00"}
{"id":"az-2iv8","title":"Focus management for input elements","description":"**Status:** Deferred to post-MVP\n\n## Overview\nAdd focus management for interactive elements (text inputs, buttons, etc.).\n\n## Features\n- Focus state tracking (which element is focused)\n- Tab/Shift+Tab navigation between focusable elements\n- Focus ring styling (visual indicator of focused element)\n- Focus events (onFocus, onBlur handlers)\n\n## API Addition\n```gleam\n// Attributes\nfn focusable() -\u003e Attribute(msg)\nfn autofocus() -\u003e Attribute(msg)\nfn on_focus(msg: msg) -\u003e Attribute(msg)\nfn on_blur(msg: msg) -\u003e Attribute(msg)\nfn tab_index(index: Int) -\u003e Attribute(msg)\n\n// In Runtime or a FocusManager service\nfn focus(element_id: String) -\u003e Effect(msg)\nfn blur() -\u003e Effect(msg)\nfn get_focused() -\u003e Option(String)\n```\n\n## Complexity\nMedium. Requires:\n- Element ID system (for focus targeting)\n- Focus order calculation (tab index + DOM order)\n- Keyboard event routing (Tab, Shift+Tab)\n- Style modifications for focused state\n\n## Dependencies\n- Input elements must exist first (text input, button)\n- Currently no input elements are planned for MVP\n\n## Why Deferred\nAzedarach MVP uses global keyboard shortcuts, not focusable form elements. No text inputs or buttons requiring focus.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-28T12:07:34.567029+11:00","updated_at":"2025-12-28T12:07:34.567029+11:00","dependencies":[{"issue_id":"az-2iv8","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T12:07:48.85588+11:00","created_by":"daemon"},{"issue_id":"az-2iv8","depends_on_id":"az-d19m","type":"blocks","created_at":"2025-12-28T12:07:49.074529+11:00","created_by":"daemon"}]}
{"id":"az-bf8","title":"queue up commands that would conflict if run all at once","description":"e.g. space m (we shouldnt try to merge two branches at once!)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:48:33.510147+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T15:51:46.009793+11:00"}
{"id":"az-5jl","title":"File bug report for bd merge driver deleting beads incorrectly","description":"The `bd merge` driver uses standard 3-way merge semantics which can incorrectly delete beads.\n\n**Issue:** When a bead exists in base (ancestor) and main, but NOT in the branch being merged, the driver interprets this as \"branch deleted the bead\" and removes it. But the real scenario is often \"branch was created before this bead existed.\"\n\n**Expected behavior:** Beads should use additive merge semantics - beads are never deleted by merge, only added/updated. If a bead exists in either branch, it should appear in the result.\n\n**Workaround:** Azedarach now calls `bd sync --import-only` after merge to recover lost beads (az-mlv fix).\n\n**Suggested fix:** The merge driver should check `bead.created_at` against the branch divergence point. If the bead was created after the fork, keep it regardless of whether the branch has it.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-18T02:09:27.362267+11:00","updated_at":"2025-12-18T02:09:27.362267+11:00"}
{"id":"az-k5m","title":"Persist session state via tmux query","description":"Session state is lost on azedarach restart because SessionManager stores state in-memory Ref. Fix by querying tmux list-sessions on startup and matching session names to bead IDs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T11:33:52.363085+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T11:34:33.533566+11:00"}
{"id":"az-1zd0","title":"improve claude initial prompts","description":"e.g. if the bead is not clear enough make sure the space s/S prompts say to ask questions and upgrade the bead till its clear and could be picked up by any claude session without extra research","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:57:42.883524+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T02:23:16.906311+11:00"}
{"id":"az-tx5","title":"where are merged beads going? after space m they disappear","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-17T17:28:25.188775+11:00","updated_at":"2025-12-19T10:36:07.922514+11:00","deleted_at":"2025-12-19T10:36:07.922514+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-ogbj","title":"space m to merge epic children to parent leaves hourglass icon indefinitely","notes":"üìé [mjrzst6d-a56r.png](.beads/images/az-ogbj/mjrzst6d-a56r.png) (clipboard, 12/30/2025, 1:53:12 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:53:08.935098+11:00","updated_at":"2025-12-30T14:01:57.351668+11:00","closed_at":"2025-12-30T14:01:57.351668+11:00"}
{"id":"az-kct","title":"(deleted)","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-15T01:52:58.144161Z","updated_at":"2025-12-15T01:52:58.144161Z","deleted_at":"2025-12-15T01:52:58.144161Z","deleted_by":"riordan","delete_reason":"manual delete"}
{"id":"az-g19","title":"Terminal attachment (external and inline)","description":"Implement session attachment for manual intervention.","notes":"Implementation complete:\n\n1. Created AttachmentService (src/core/AttachmentService.ts):\n   - External attachment via attachExternal() - opens new terminal window/tab\n   - Inline attachment stub via attachInline() - reserved for future implementation\n   - Terminal type detection (Ghostty, iTerm, Terminal.app)\n   - Attachment history tracking\n   - Proper Effect error handling with AttachmentError and SessionNotFoundError\n\n2. Updated atoms.ts:\n   - Added AttachmentService to runtime layer (appLayer)\n   - Created attachExternalEffect() and attachInlineEffect() helper functions\n   - Properly composed layers with dependencies (AttachmentService depends on TmuxService and TerminalService)\n\n3. Integrated with App.tsx keyboard handling:\n   - Added 'a' key in action mode (Space + a) for external attachment\n   - Added 'A' key in action mode (Space + A) for inline attachment (shows error for now)\n   - Session ID is constructed as 'claude-{task.id}'\n   - Error handling with console.error fallback\n\nTechnical details:\n- AttachmentService uses TmuxService for session validation and attach command generation\n- TerminalService provides terminal detection and command execution\n- External attachment opens new terminal with 'tmux attach-session -t {sessionId}'\n- Inline attachment is stubbed - future implementation will require suspending TUI renderer\n- All code passes type-check with strict TypeScript mode\n- No 'as' casts or 'any' types used\n\nUsage:\n1. Navigate to a task with hjkl\n2. Press Space to enter action mode\n3. Press 'a' to attach externally in new terminal window\n4. Press 'A' to attempt inline (will show error message)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:45:08.219579+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:32:33.851115+11:00","dependencies":[{"issue_id":"az-g19","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T14:46:09.313043+11:00","created_by":"daemon"}]}
{"id":"az-e3wr","title":"add configurable background tasks on new sessions","description":"e.g. i want to build types when i start a session in ~/prog/Chefy but i dont want to block anything based on that","notes":"Implementation Plan:\n- Add `backgroundTasks: string[]` to `SessionConfigSchema` in `src/config/schema.ts`.\n- Implement `newWindow(sessionName, windowName, options)` in `src/core/TmuxService.ts`.\n- Update `src/core/WorktreeSessionService.ts` to spawn background windows for each task.\n- Tasks will run `initCommands` followed by the task command and `exec $SHELL`.\n- Group all windows under the same bead-specific tmux session.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:42:48.753219+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T13:40:01.849338+11:00"}
{"id":"az-hdj","title":"does pty watcher handle using tmux to add windows/panels to the bead session?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:36:14.373167+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:18:28.637134+11:00"}
{"id":"az-o5a","title":"Complete KeyboardService migration - replace App.tsx inline handlers","description":"Finish the half-completed migration from inline useKeyboard handlers in App.tsx to the data-driven KeyboardService + useKeyboardBridge pattern.","notes":"## Session Progress (2025-12-15)\n\n### Completed\n- Phase 1: NavigationService methods added (halfPageDown, halfPageUp, goToFirst, goToLast, goToFirstColumn, goToLastColumn, jumpToEnd)\n- Layer composition in atoms.ts restructured to support NavigationService ‚Üí BoardService dependency\n- KeyboardService rewritten with all modes and ~60 keybindings\n- **Fixed type errors** by:\n  1. Removing explicit `Effect.Effect\u003cvoid\u003e` return types from helper functions (let TS infer)\n  2. Updated `Keybinding` interface to allow `BeadsError` and `KeybindingDeps` (CommandExecutor | FileSystem)\n  3. Removed explicit return type from `handleKey` method\n- **Extended BeadsClient** to support all bd CLI fields:\n  - `update()`: Added title, description, design, acceptance, assignee, estimate, labels\n  - `create()`: Added design, acceptance, assignee, estimate, labels\n- **Refactored BeadEditorService** to use BeadsClient instead of running bd commands directly\n- **MAJOR: ID-based cursor navigation** - Changed cursor from index-based {columnIndex, taskIndex} to focusedTaskId: string | null\n  - Eliminates sync issues between UI and services\n  - NavigationService now uses EditorService for search/sort config\n  - Navigation operations find current position in filtered view, calculate new position, store new task ID\n- **Single data source** - App.tsx now uses boardTasksAtom from BoardService instead of separate tasksAtom\n  - When board.refresh() is called, UI updates automatically\n- **Skip empty columns** - Left/right navigation skips empty columns to find next non-empty one\n- **Cursor safety** - After deleting a bead, nav.initialize() moves cursor to valid task\n- **az-451 Data.struct refactor** - SubscriptionRef state now uses Data.struct() for structural equality:\n  - EditorService: EditorMode variants + SortConfig\n  - OverlayService: Overlay objects + emptyArray() singleton\n  - ToastService: Toast objects + emptyArray() singleton\n  - Created src/lib/empty.ts with singleton emptyRecord()/emptyArray()\n\n### Status: TYPE-CHECK PASSES ‚úì\n\n### Files Modified This Session\n- src/services/NavigationService.ts - Complete rewrite for ID-based cursor\n- src/services/KeyboardService.ts - Updated getSelectedTask to use focusedTaskId\n- src/services/BoardService.ts - Added getFilteredTasksByColumn, getFilteredTaskAt, Map‚ÜíRecord\n- src/services/EditorService.ts - Data.struct() wrapping for EditorMode/SortConfig\n- src/services/OverlayService.ts - Data.struct() wrapping + emptyArray()\n- src/services/ToastService.ts - Data.struct() wrapping + emptyArray()\n- src/ui/App.tsx - Use boardTasksAtom, call refreshBoard on mount\n- src/ui/atoms.ts - Removed cursorAtom, added initializeNavigationAtom, refreshBoardAtom\n- src/ui/hooks/useNavigation.ts - Derives position from focusedTaskId locally\n- src/ui/Board.tsx - Accept readonly TaskWithSession[], Record for jumpLabels\n- src/ui/CompactView.tsx - Accept readonly TaskWithSession[], Record for jumpLabels\n- src/lib/empty.ts - NEW: singleton emptyRecord()/emptyArray()\n\n### Remaining Work\n1. Wire useKeyboardBridge into App.tsx (handleKeyAtom already connected)\n2. Remove any remaining inline handlers from App.tsx\n3. Test all keybindings thoroughly\n4. Consider removing debug logging from KeyboardService\n\n### Recent Commits\n- eccbe28 - refactor: Add Data.struct wrapping to SubscriptionRef state\n- 19beb0a - feat: Add singleton empty collection utilities\n- 092959c - refactor: ID-based cursor navigation and single data source","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T00:43:39.319315+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T13:36:38.73138+11:00"}
{"id":"az-wot","title":"image paste from clipboard not working still on mac","description":"no logs, no toast, just nothing happens when i press p with a image in clipboard","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T01:12:34.022384+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T01:36:22.272642+11:00"}
{"id":"az-385","title":"Epic drill-down view (focus mode for epic children)","description":"Press Enter on an epic ‚Üí switches to a focused board showing only that epic's children across status columns.\n\n**Visual:**\n```\n‚îå‚îÄ Open ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ In Progress ‚îÄ‚î¨‚îÄ Done ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ            ‚îÇ               ‚îÇ             ‚îÇ\n‚îÇ  ‚óÄ az-gds  ‚îÇ   Epic View   ‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñë 3/5  ‚îÇ  ‚Üê Header bar\n‚îÇ            ‚îÇ               ‚îÇ             ‚îÇ\n‚îÇ  az-lqb    ‚îÇ  az-7sr ‚öô    ‚îÇ  az-aiu ‚úì   ‚îÇ\n‚îÇ  az-bjp    ‚îÇ               ‚îÇ  az-xxx ‚úì   ‚îÇ\n‚îÇ            ‚îÇ               ‚îÇ  az-yyy ‚úì   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n        [q] back   [Enter] open task\n```\n\n**Interaction:**\n- `Enter` on epic card ‚Üí enters drill-down view\n- `q` or `Escape` ‚Üí returns to main board\n- Navigation (hjkl) works normally within children\n- `Enter` on child task ‚Üí normal task actions\n\n**Implementation:**\n1. Add `drillDownEpic: string | null` to NavigationService state\n2. When set, Board filters to show only children of that epic\n3. Render epic header bar with back hint and progress\n4. `q` in drill-down clears the state, returns to main\n\n**Simpler than indentation because:**\n- No variable card heights\n- No tree-prefix rendering\n- No mixed item types in columns\n- Clean j/k navigation\n- Reuses existing Board/Column components","notes":"PR: ","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-12T13:29:15.298636+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T02:10:23.18921+11:00","dependencies":[{"issue_id":"az-385","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-12T13:29:32.905066+11:00","created_by":"daemon"}]}
{"id":"az-a245","title":"ignore beads changes in space f diff reader","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T16:12:31.928397+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T16:14:34.395768+11:00"}
{"id":"az-451","title":"Use immutable Data types in SubscriptionRef state","description":"Non-primitive state stored in SubscriptionRef should use Effect's immutable data types for proper equality and functional programming patterns.\n\n**Problems:**\n1. Objects/arrays without Data wrapping cause reference equality issues\n2. Mutable collections like `Map` don't play well with Effect's functional paradigm\n\n**Solutions:**\n\n**Data Wrapping:**\n- Use `Schema.Data` to wrap state schemas, OR\n- Manually wrap with `Data.array()` for arrays\n- Manually wrap with `Data.struct()` for objects/records\n\n**Immutable Collections:**\n- Replace `Map` with `ReadonlyRecord` (from `effect/Record`)\n- Replace `Set` with `HashSet` (from `effect/HashSet`)\n- Use `HashMap` if key hashing is needed\n\n**Specific changes:**\n- `tasksByColumn: Map\u003c...\u003e` ‚Üí `tasksByColumn: ReadonlyRecord\u003cstring, ReadonlyArray\u003cTask\u003e\u003e`\n\n**Files to audit:**\n- All services using SubscriptionRef with non-primitive state\n- Check EditorService, NavigationService, OverlayService, BeadsService, etc.","notes":"## Completed\n- ‚úÖ tasksByColumn: Map ‚Üí Record.ReadonlyRecord with emptyRecord() singleton\n- ‚úÖ jumpLabels: ReadonlyMap ‚Üí Record.ReadonlyRecord\n- ‚úÖ Created src/lib/empty.ts with singleton emptyRecord() and emptyArray()\n- ‚úÖ Updated all consumers: BoardService, KeyboardService, EditorService, atoms.ts, Board.tsx, CompactView.tsx, useEditorMode.ts, types.ts\n- ‚úÖ Board.tsx and CompactView.tsx now accept readonly TaskWithSession[] arrays\n- ‚úÖ Type errors from concurrent work FIXED in commit 092959c\n\n## Session 2025-12-15 Update\nThe type issues around readonly arrays are now resolved:\n- BoardProps.tasks: readonly TaskWithSession[]\n- CompactViewProps.tasks: readonly TaskWithSession[]\n- Column props were fixed (isActiveColumn instead of isActive, etc.)\n\n## Remaining\n- Data wrapping for non-primitive SubscriptionRef state (EditorMode, SortConfig, Overlay[], Toast[], etc.)\n- Consider using Data.struct() for cursor/position types\n- Audit all services for remaining mutable collections\n\n## Note\nThe linter (biome) auto-converts ReadonlyMap ‚Üî Record.ReadonlyRecord. Need to be consistent with Record.ReadonlyRecord and use Object.entries() for iteration.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-15T12:23:05.047807+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T12:57:22.737672+11:00"}
{"id":"az-vw20","title":"Scroll containers (overflow: scroll)","description":"**Status:** Deferred to post-MVP\n\n## Overview\nAdd scrollable containers that can display content larger than their bounds.\n\n## Current State\nThe layout engine (az-se6w) implements **clipping** for MVP - content outside bounds is simply not rendered.\n\n## Features to Add\n- `Overflow::Scroll` variant for boxes\n- Scroll offset state (x, y)\n- Keyboard scroll handling (arrow keys, Page Up/Down within scroll container)\n- Optional: scrollbar rendering\n- Optional: mouse wheel scrolling (depends on mouse events)\n\n## API Addition\n```gleam\ntype Overflow { Clip | Scroll | Visible }\n\n// In BoxStyle\noverflow: Overflow  // default: Clip\n\n// Scrollbar styling\ntype ScrollbarStyle {\n  track_color: Color,\n  thumb_color: Color,\n  width: Int,  // typically 1 cell\n}\n```\n\n## Complexity\nMedium-high. Requires:\n- Layout engine changes (scroll viewport calculation)\n- State management (scroll offsets per scrollable container)\n- Event routing (scroll events to correct container)\n- Focus concept (which container is scrollable)\n\n## Why Deferred\nAzedarach Kanban columns are fixed height with a known number of tasks. Scrolling not required for MVP.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-28T12:07:34.366262+11:00","updated_at":"2025-12-28T12:07:34.366262+11:00","dependencies":[{"issue_id":"az-vw20","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T12:07:48.784419+11:00","created_by":"daemon"},{"issue_id":"az-vw20","depends_on_id":"az-se6w","type":"blocks","created_at":"2025-12-28T12:07:49.00686+11:00","created_by":"daemon"}]}
{"id":"az-v0xk","title":"space c to chat isnt spawning a tmux session the same way as space s/S","description":"i saw a success toast but no indication of active session on the card and space a fails","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:42:07.57381+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:30.380941+11:00"}
{"id":"az-ybu6","title":"when space a detects updates in base branch it should say the base branch name","description":"currently it says hardcoded (i assume) main. i hope it uses the configured base branch and not main right?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T04:22:17.539974+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T01:19:35.491178+11:00"}
{"id":"az-nb04","title":"attached images break prompt injection","description":"TITLE","notes":"üìé [mjgmdu2c-3u1k.png](.beads/images/az-nb04/mjgmdu2c-3u1k.png) (clipboard, 12/22/2025, 2:52:10 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T14:52:07.963955+11:00","updated_at":"2025-12-31T09:09:10.65859+11:00","closed_at":"2025-12-31T09:09:10.658592+11:00"}
{"id":"az-5p5","title":"Add session metrics section to DetailPanel","description":"Add Session Metrics section to DetailPanel modal showing: Context % with warning indicator, session duration, estimated token count. Only visible when session is active (not idle).","notes":"## Progress\n\n### ‚úÖ Completed\n- DetailPanel UI section for metrics (lines 257-289)\n- Color-coded context % display (lavender/yellow/red thresholds)\n- Duration formatting from sessionStartedAt  \n- Token count display with K suffix\n- Visibility guard (only shows when session active)\n- Agent phase display (bonus)\n- **NEW**: BoardService now maps sessionStartedAt from SessionManager\n\n### ‚ùå Still Missing (requires az-zu3)\n- contextPercent: Needs PTY monitoring to parse Claude's status line\n- estimatedTokens: Needs PTY monitoring to parse Claude's status line\n- agentPhase: StateDetector exists but isn't wired to active monitoring\n\n### Dependency\nThis issue depends on az-zu3 (hybrid state detection) for full metrics collection.\nSession duration works NOW since SessionManager tracks startedAt.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T13:24:59.666185+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T14:46:52.042889+11:00","dependencies":[{"issue_id":"az-5p5","depends_on_id":"az-dqt","type":"blocks","created_at":"2025-12-12T13:25:26.146395+11:00","created_by":"daemon"},{"issue_id":"az-5p5","depends_on_id":"az-zu3","type":"blocks","created_at":"2025-12-17T14:44:22.017914+11:00","created_by":"daemon"}]}
{"id":"az-cs0","title":"when performing left/right actions keep action mode active. otherwise return to normal mode immediately","description":"currently if i space S action mode remains until the toast appears instead of returning to normal mode as soon as i press \"S\". this is just an example","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:15:17.592791+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T14:15:21.967725+11:00"}
{"id":"az-wiu","title":"Eliminate React hooks in favor of Effect services (audit \u0026 migrate)","description":"Per az-x4e, 9 files still use React hooks (useEffect/useMemo/useState):\n\n- src/ui/App.tsx\n- src/ui/Board.tsx\n- src/ui/Column.tsx\n- src/ui/CompactView.tsx\n- src/ui/Toast.tsx\n- src/ui/DetailPanel.tsx\n- src/ui/CreateTaskPrompt.tsx\n- src/ui/ClaudeCreatePrompt.tsx\n- src/index.tsx\n\n**Audit each file** to determine:\n1. What state/effects can move to Effect services\n2. What computation can move to atoms\n3. What's truly local UI state (may be acceptable)\n\nDocument findings and create migration plan. This task is the audit; az-x4e is the execution.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-17T15:59:45.338873+11:00","updated_at":"2025-12-17T15:59:45.338873+11:00"}
{"id":"az-lsi","title":"figure out whats next with our claude status hook system","notes":"Starting implementation of Option 1: Integrate Claude Code's native hooks (Notification, Stop, SessionEnd) for authoritative state detection in spawned worktrees.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:58:54.252353+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T11:17:26.126292+11:00"}
{"id":"az-9shr","title":"make space f use lazygit with fullscreen side by side difftastic diffing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T01:59:20.859821+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T03:34:13.335354+11:00"}
{"id":"az-rk6i","title":"something went wrong with space r dev server in ~/prog/Chefy","description":"When using Space+r to start a dev server in a worktree, the NX project fails with \"Failed to process project graph\" because node_modules doesn't exist in the worktree.\n\n**Root Cause:** Git worktrees share `.git` but NOT `node_modules/`. Each worktree needs its own `pnpm install` before the dev server can run.\n\n**Evidence:** User manually ran `pnpm i \u0026\u0026 pnpm dev` in the tmux session and it worked fine.","notes":"## Implementation Complete ‚úÖ\n\n### Root Cause\nWhen using Space+r to start a dev server in an 11-hour-old worktree, dependencies had drifted since session creation. The initCommands (including `pnpm install`) only ran at session start (Space+s), not when the dev server started (Space+r).\n\n### Solution\nDevServerService now runs initCommands before starting the dev server, ensuring dependencies are synced even if they changed since session creation.\n\n### Changes Made\n1. **Created `src/core/initCommands.ts`** - Reusable helper for running worktree init commands\n2. **Updated `DevServerService.start()` and `toggle()`** - Now run initCommands before starting dev server\n3. **Created `src/core/WorktreeSessionService.ts`** - Generic tmux session service for future use\n4. **Renamed `SessionManager` ‚Üí `ClaudeSessionManager`** - Clearer name for Claude-specific session management\n5. **Fixed error handling in keyboard bindings** - Dev server errors now show toast instead of propagating\n\n### Testing\n- ‚úÖ Type-check passes\n- ‚úÖ Build passes\n\n### Future Improvement\nClaudeSessionManager and DevServerService could be refactored to use WorktreeSessionService to reduce code duplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T00:25:00.079304+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-20T03:19:19.344942+11:00"}
{"id":"az-ce9","title":"how do we track context? do we watch this bit in claude code somehow?","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T01:11:36.741749+11:00","updated_at":"2025-12-18T01:11:36.741749+11:00"}
{"id":"az-7rj","title":"Allow creating beads via Claude prompt with persistent session","description":"Enable users to create new beads from within azedarach by sending a natural language prompt to Claude.\n\n## Requirements\n- User provides a description of the task/feature they want to create\n- Claude interprets the prompt and creates the appropriate bead (title, type, description, etc.)\n- The tmux session used for bead creation should persist after creation\n- This allows the user to immediately start working on the newly created bead in the same session\n\n## Use Case\nInstead of manually running `bd create`, user can describe what they need in natural language from within azedarach's TUI, and Claude handles the bead creation. The persistent session means they can seamlessly transition from \"create this task\" to \"now work on it\".","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T02:27:20.092741+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T02:45:45.653563+11:00"}
{"id":"az-w2m","title":"up/down arrow should wrap around the current column when at the bottom/top not move to next column","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:54:54.218653+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:02:47.827581+11:00"}
{"id":"az-l7a","title":"Agent Mail Integration for Multi-Agent Coordination","description":"Implement Agent Mail coordination layer for multi-agent beads workflows. Agent Mail reduces coordination latency from 2-5 seconds (git sync) to \u003c100ms (HTTP API), preventing work collisions when multiple Claude sessions operate simultaneously.\n\nKey benefits:\n- 20-50x faster coordination than git sync\n- Prevents duplicate work through exclusive file reservations\n- Lightweight (~50MB memory footprint)\n- Optional with graceful degradation to git-only\n\nIntegration points:\n1. Issue reservation before starting work\n2. Issue release when work completes\n3. Ready query to find unblocked, unreserved issues\n4. Status updates for real-time visibility\n\nConfiguration:\n- BEADS_AGENT_MAIL_URL: Server endpoint\n- BEADS_AGENT_NAME: Unique agent identifier\n- BEADS_PROJECT_ID: Shared namespace\n\nReference: https://github.com/steveyegge/beads/blob/main/docs/AGENT_MAIL.md","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T10:32:57.000556+11:00","updated_at":"2025-12-12T10:32:57.000556+11:00"}
{"id":"az-aiu","title":"Implement session templates for pre-planning prompts","description":"Create .claude/session-templates/ with task-type-specific CLAUDE.md templates (feature.md, bugfix.md, refactor.md, epic.md). Templates inject 'think first' planning phase. SessionManager loads appropriate template when spawning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T13:24:59.891181+11:00","updated_at":"2025-12-12T13:25:20.531813+11:00"}
{"id":"az-4r05","title":"all epic bead git tasks should operate against the epic parent as the base branch","description":"first find all git ops that may happen in epic drill down, then figure out if we do it right (against epic base) or not. then fix ones that are wrong","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:21:00.440976+11:00","updated_at":"2025-12-30T21:32:05.999164+11:00","closed_at":"2025-12-30T21:32:05.999167+11:00"}
{"id":"az-kmuk","title":"tui_core: Border drawing - box borders and line characters","description":"Utility for drawing box borders with various styles.\n\n## Why\nBox borders need special characters and proper corner handling. This is tricky to get right inline.\n\n## API (Gleam)\n```gleam\ntype BorderStyle {\n  None\n  Single      // ‚îÄ ‚îÇ ‚îå ‚îê ‚îî ‚îò\n  Double      // ‚ïê ‚ïë ‚ïî ‚ïó ‚ïö ‚ïù\n  Rounded     // ‚îÄ ‚îÇ ‚ï≠ ‚ïÆ ‚ï∞ ‚ïØ\n  Bold        // ‚îÅ ‚îÉ ‚îè ‚îì ‚îó ‚îõ\n  Dashed      // ‚ïå ‚ïé ‚îå ‚îê ‚îî ‚îò\n}\n\ntype BorderChars {\n  BorderChars(\n    top: String, bottom: String, left: String, right: String,\n    top_left: String, top_right: String,\n    bottom_left: String, bottom_right: String,\n  )\n}\n\n/// Get characters for a border style\nfn get_chars(style: BorderStyle) -\u003e BorderChars\n\n/// Draw border to a FrameBuffer (just the border, not contents)\nfn draw_border(\n  fb: FrameBuffer,\n  x: Int, y: Int, width: Int, height: Int,\n  style: BorderStyle,\n  fg: Color, bg: Color,\n) -\u003e FrameBuffer\n```\n\n## Reference\n- Box-drawing characters: https://en.wikipedia.org/wiki/Box-drawing_character\n\n## Acceptance Criteria\n- [ ] All 5 border styles with correct characters\n- [ ] Correct corner handling\n- [ ] Draw to FrameBuffer correctly\n- [ ] Handle width=1 or height=1 edge cases","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T11:31:22.516664+11:00","updated_at":"2025-12-28T11:31:22.516664+11:00","dependencies":[{"issue_id":"az-kmuk","depends_on_id":"az-xe2h","type":"blocks","created_at":"2025-12-28T11:34:25.186165+11:00","created_by":"daemon"},{"issue_id":"az-kmuk","depends_on_id":"az-hkfa","type":"blocks","created_at":"2025-12-28T11:34:25.24931+11:00","created_by":"daemon"},{"issue_id":"az-kmuk","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.272007+11:00","created_by":"daemon"}]}
{"id":"az-fjy","title":"add a git push keybind","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:59:10.618121+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T10:32:36.837731+11:00"}
{"id":"az-fl2u","title":"when there are 500+ beads it starts to take a solid amount of time to load","description":"so the bottom bar debounce for loading indicator is too low. we may need to account for this better in other aspects that i havent thought of too...","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T13:03:42.860168+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-24T02:58:50.403417+11:00"}
{"id":"az-csh","title":"when a title is too long truncate it so the text doesnt overflow","notes":"Working on adding title truncation to TaskCard.tsx","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T13:27:43.068828+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T00:47:49.957663+11:00"}
{"id":"az-25ph","title":"toggling any dev server needs to come with all PORT envs for all servers","description":"so when i toggle Chefy's web server it should grab a port for the server server too and set that env var in the web server. if i then toggle server server we use both the same env vars as the web server","notes":"üìé [mjj85j35-tbcz.png](.beads/images/az-25ph/mjj85j35-tbcz.png) (clipboard, 12/24/2025, 10:37:07 AM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:37:04.237362+11:00","updated_at":"2025-12-29T15:05:23.67676+11:00","closed_at":"2025-12-29T15:05:23.676763+11:00"}
{"id":"az-foy","title":"Update docs from Ink to OpenTUI + React","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-12T17:16:24.188255+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T17:16:32.49283+11:00"}
{"id":"az-8axr","title":"test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-18T15:30:40.337109+11:00","updated_at":"2025-12-18T15:30:50.278932+11:00","deleted_at":"2025-12-18T15:30:50.278932+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-58v","title":"Implement issue type change in EditorService","description":"src/core/EditorService.ts line 773 has TODO:\n\"Implement type change (delete old, create new, preserve deps)\"\n\nChanging issue type (task‚Üíbug, feature‚Üíepic) requires:\n1. Capture existing dependencies\n2. Delete original issue\n3. Create new issue with same ID pattern but new type\n4. Re-link dependencies\n\nThis is a data migration operation that needs careful handling.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-17T15:59:44.827186+11:00","updated_at":"2025-12-17T15:59:44.827186+11:00"}
{"id":"az-6c5","title":"allow space S which starts a claude code instance and gets it to start working on the task","description":"e.g. prompt it with \"work on bead [bead-id]\"","notes":"Starting implementation. Approach:\n1. Add actionStartSessionWithPrompt() - starts session, waits for Claude init, sends prompt\n2. Add S-s keybinding (Shift+s) for \"start and work\"\n3. Update ActionPalette to show 'S work' option","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:26:05.162586+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T00:54:24.960417+11:00"}
{"id":"az-hri","title":"Basic Kanban board component (OpenTUI + Solid)","description":"Create the main Ink-based Kanban board displaying beads issues in columns by status.","notes":"Implemented basic Kanban board component with OpenTUI + SolidJS:\n\n- Created UI types (SessionState, TaskWithSession, COLUMNS, SESSION_INDICATORS)\n- TaskCard.tsx: displays individual tasks with title, ID, session indicator, priority color\n- Column.tsx: vertical list of tasks per status with header and count\n- Board.tsx: horizontal layout of columns using Yoga flexbox\n- StatusBar.tsx: bottom bar with keyboard shortcuts and stats\n- App.tsx: root component with Effect runtime, fetches tasks from BeadsClient\n- launch.tsx: TUI initialization with OpenTUI render\n\nAll components use OpenTUI primitives (box, text) with proper styling (fg/bg colors, attributes for bold, border styles). Successfully type checks with strict mode.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:45:07.662469+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T18:03:13.707242+11:00","dependencies":[{"issue_id":"az-hri","depends_on_id":"az-ags","type":"blocks","created_at":"2025-12-11T14:46:25.898548+11:00","created_by":"daemon"},{"issue_id":"az-hri","depends_on_id":"az-fvj","type":"blocks","created_at":"2025-12-11T14:46:26.110348+11:00","created_by":"daemon"},{"issue_id":"az-hri","depends_on_id":"az-mq9","type":"blocks","created_at":"2025-12-11T17:10:08.980724+11:00","created_by":"daemon"},{"issue_id":"az-hri","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T14:46:08.667781+11:00","created_by":"daemon"}]}
{"id":"az-e94l","title":"add support for multiple separate dev servers","description":"so space opens bead action menu, r opens dev server menu, depending on config in .azedarach it shows the options.\ncan configure multiple dev server commands e.g. in chefy we have pnpm dev:server and pnpm dev:web\ncan configure dev command aliases for nice formatting in az\ncan start any/all of the dev commands. can stop any/all of the dev commands\ncan see the ports each one is using","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T13:51:40.489323+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T13:40:19.204818+11:00"}
{"id":"az-eiwd","title":"add offline mode which disables stuff like PR creation, git push/pull etc without breaking the app","description":"Add offline mode that allows Azedarach to work without network connectivity. This is useful for:\n- Working on planes/trains without internet\n- Local-only development workflows  \n- Avoiding accidental pushes during experimentation\n\nThe feature uses granular controls so users can disable specific network operations independently.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:09:15.972805+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:37:31.72862+11:00"}
{"id":"az-ni9g","title":"space D should also run cleanup like space d if required","description":"When deleting a bead with Space+D, if the bead has an active session/worktree, the worktree should be cleaned up first (deleting the git worktree and branch). This mirrors the behavior of space+d (cleanup) but as a prerequisite to deletion.\n\nWithout this, deleting a bead with an active session leaves orphaned worktrees in the filesystem.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:03:36.08385+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T15:06:08.552053+11:00"}
{"id":"az-7tzh","title":"lustre_tui: Reconciler - convert Lustre Elements to Renderables","description":"Convert Lustre Element trees to tui_core Renderable trees.\n\n## Why Separate\nThe reconciler is the bridge between declarative Lustre views and the imperative rendering system. Element types are in az-uwcd, runtime is in az-d19m.\n\n## Core Function\n```gleam\n/// Convert a Lustre Element tree to a Renderable tree\nfn element_to_renderable(el: Element(msg)) -\u003e Renderable\n\n/// Internal: Convert attributes to styles\nfn attrs_to_box_style(attrs: List(Attribute(msg))) -\u003e BoxStyle\nfn attrs_to_text_style(attrs: List(Attribute(msg))) -\u003e TextStyle\n\n/// Extract event handlers from element tree (for input dispatch)\nfn collect_handlers(el: Element(msg)) -\u003e List(#(Selector, fn(Key) -\u003e Option(msg)))\n```\n\n## Implementation Notes\n- Pattern match on Element variant (Box, Text, Span)\n- Extract style attributes, build corresponding style types\n- Recursively process children\n- Track event handlers for input dispatch\n\n## Example Flow\n```\nview(model) ‚Üí Element(msg) tree\n    ‚Üì element_to_renderable\nRenderable tree\n    ‚Üì layout (az-se6w)\nLayoutNode tree (with positions)\n    ‚Üì render_tree\nFrameBuffer\n    ‚Üì renderer (az-5xza)\nTerminal output\n```\n\n## Acceptance Criteria\n- [ ] Box elements convert to Box renderables\n- [ ] Text/Span elements convert correctly\n- [ ] All style attributes map correctly\n- [ ] Nested elements handle correctly\n- [ ] Event handlers extracted for dispatch","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T11:26:08.268961+11:00","updated_at":"2025-12-28T11:32:54.539651+11:00","dependencies":[{"issue_id":"az-7tzh","depends_on_id":"az-ud48","type":"blocks","created_at":"2025-12-28T11:26:28.831699+11:00","created_by":"daemon"},{"issue_id":"az-7tzh","depends_on_id":"az-5xza","type":"blocks","created_at":"2025-12-28T11:26:28.901966+11:00","created_by":"daemon"},{"issue_id":"az-7tzh","depends_on_id":"az-uwcd","type":"blocks","created_at":"2025-12-28T11:34:13.268266+11:00","created_by":"daemon"},{"issue_id":"az-7tzh","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:26:18.871442+11:00","created_by":"daemon"}]}
{"id":"az-hllj","title":"check codebase for dead code","description":"Audit the Azedarach codebase to identify and remove dead code - unused exports, unreferenced functions, orphaned files, and stale imports that are no longer needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:03:31.850422+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T23:49:35.131302+11:00"}
{"id":"az-38m","title":"can't seem to move beads with space + left/right arrow or l/h","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:27:05.835599+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T15:35:44.455904+11:00"}
{"id":"az-r883","title":"we just rewrote our app in go but it has bugs","description":"in folder go-bubbletea\ncurrently it shows the board view but error logs are showing up IN the main view and pushing the ui up\nthe error im seeing currently is failed to parse json (no beads showing up)","notes":"## Session Progress (2025-12-31)\n\n### Fixed:\n1. Column headers now visible - removed column borders, headers render above cards\n2. Cards match TypeScript layout - 2-line format with borders (header line + title line)\n3. Card border colors: lavender for cursor, mauve for multi-select, surface1 for normal\n4. Title truncation fixed - accounts for border + padding width\n5. Added tmux testing workflow to CLAUDE.md\n\n### Bug Found (NOT YET FIXED):\n**Row joining bug in board.go lines 69-84**\n- When a column has fewer lines (e.g., empty Blocked column), the code SKIPS that column instead of adding padding\n- This causes Done column cards to shift left into Blocked column position\n- Fix is ready in code but needs rebuild/test\n\n### Fix Applied (needs testing):\n```go\n// In board.go - add else branch to pad empty columns\nif lineIdx \u003c len(columnLines[colIdx]) {\n    rowParts = append(rowParts, columnLines[colIdx][lineIdx])\n} else {\n    // Column has no content at this line - add padding\n    rowParts = append(rowParts, strings.Repeat(\" \", columnWidth))\n}\n```\n\n### Files Modified:\n- go-bubbletea/internal/ui/board/board.go\n- go-bubbletea/internal/ui/board/card.go\n- go-bubbletea/internal/ui/board/column.go\n- go-bubbletea/internal/ui/board/board_test.go\n- go-bubbletea/internal/ui/board/card_test.go\n- CLAUDE.md (added tmux testing docs)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:21:07.260841+11:00","updated_at":"2026-01-04T12:53:21.586398+11:00","closed_at":"2026-01-04T12:53:21.586401+11:00"}
{"id":"az-he5g","title":"dont specify ai model by default, only if configured","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-05T11:57:12.775728+11:00","updated_at":"2026-01-05T11:57:12.775728+11:00"}
{"id":"az-z0u","title":"test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-17T00:22:01.980663+11:00","updated_at":"2025-12-17T00:22:19.310023+11:00","deleted_at":"2025-12-17T00:22:19.310023+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-9yak","title":"i just ran a nix rebuild and we lost difftastic again","description":"in ~/nix i ran just rebuild and now our diff viewer is broken like it was yesterday\nwe expect full semantic diffing with nice colors but get this image","notes":"üìé [mjc8qp91-fnec.png](.beads/images/az-9yak/mjc8qp91-fnec.png) (clipboard, 12/19/2025, 1:19:12 PM)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-19T13:18:54.788495+11:00","updated_at":"2025-12-19T14:13:53.762915+11:00","deleted_at":"2025-12-19T14:13:53.762915+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-ktbd","title":"Space+m merge fails silently - need visible error feedback","description":"When pressing Space+m to merge a branch to main, the operation can fail silently without any visible feedback to the user. This makes debugging difficult.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T21:48:09.055142+11:00","updated_at":"2026-01-04T13:23:25.139068+11:00","closed_at":"2026-01-04T13:23:25.139074+11:00"}
{"id":"az-bqzy","title":"space a and space s seem to use different tmux session prefixes","description":"check that all our tmux sessions use correct prefixes ([claude/dev]-[project-name]-[beadid])","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T22:05:32.183817+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T14:39:18.370759+11:00"}
{"id":"az-losz","title":"issue with a partial success on space S","description":"i guess we need to make it atomic/roll back on partial success?","notes":"## Analysis\n\nThe `SessionManager.start` method has a non-atomic sequence of operations:\n\n1. Create worktree (idempotent ‚úì)\n2. Run init commands (can fail, has config for continueOnFailure ‚úì)  \n3. Create tmux session with Claude ‚Üê RESOURCE 1\n4. Update bead status to `in_progress` ‚Üê RESOURCE 2\n5. Store session in registry ‚Üê can fail after resources created\n6. Publish state change ‚Üê can fail after resources created\n\n**Problem:** If step 5 or 6 fails after steps 3-4, we have:\n- A running tmux session with Claude (orphaned)\n- Bead marked as `in_progress` with no session tracking\n\n## Solution Implemented\n\nUsed `Effect.acquireUseRelease` treating BOTH tmux and bead status as \"resources\":\n\n```typescript\nEffect.acquireUseRelease(\n  // ACQUIRE: Create tmux + update bead status (both are resources)\n  Effect.gen(function* () {\n    let createdNewSession = false\n    let updatedBeadStatus = false\n\n    if (!hasSession) {\n      yield* tmuxService.newSession(...)\n      createdNewSession = true\n    }\n    if (needsStatusUpdate) {\n      yield* beadsClient.update(beadId, { status: \"in_progress\" })\n      updatedBeadStatus = true\n    }\n    return { createdNewSession, updatedBeadStatus }\n  }),\n\n  // USE: Register in memory + publish event\n  () =\u003e Effect.gen(function* () {\n    yield* Ref.update(sessionsRef, ...)\n    yield* publishStateChange(beadId, \"idle\", \"busy\")\n    return sessionObj\n  }),\n\n  // RELEASE: Rollback BOTH on failure\n  (acquired, exit) =\u003e\n    Exit.isFailure(exit)\n      ? Effect.gen(function* () {\n          if (acquired.createdNewSession) {\n            yield* tmuxService.killSession(tmuxSessionName)\n          }\n          if (acquired.updatedBeadStatus) {\n            yield* beadsClient.update(beadId, { status: \"open\" })\n          }\n        })\n      : Effect.void,\n)\n```\n\n**Key benefits:**\n- Interrupt-safe: rollback runs even on fiber interruption\n- Tracks all state changes: both tmux and bead status\n- Selective rollback: only reverts what was actually changed\n- Idiomatic Effect pattern: proper resource management","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T13:21:13.743895+11:00","updated_at":"2025-12-18T13:54:02.410611+11:00"}
{"id":"az-ey9u","title":"in chefy when i space S it somehow messes up the opencode config","description":"in ~/prog/Chefy the config correctly has a plugin key but somehow new sessions always get \"plugins\" instead","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T12:39:26.283981+11:00","updated_at":"2025-12-22T12:39:26.283981+11:00"}
{"id":"az-tsf","title":"sometimes i have to bd init when i create a worktree and attach to the session with az","description":"i assume its to do with the fact the new session has to wait for direnv (with flake) to setup the env. maybe we need to increase a timeout somewhere?","notes":"Root cause identified: tmux session uses `bash -c` which bypasses direnv shell hooks. Fix: wrap claude command with `direnv exec .` to explicitly load environment before starting Claude.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T22:01:38.873045+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T22:11:39.827838+11:00"}
{"id":"az-bmpb","title":"diff command is not visible in action menu","description":"The diff command (`Space+f`) exists in keybindings and works correctly, but is not visible in the ActionPalette UI component. Users cannot discover this feature through the visual menu.\n\n## Root Cause\n- `bindings.ts:448-454`: Keybinding for `f` in action mode is defined\n- `PRHandlersService.ts:357-389`: `showDiff()` implementation works\n- `ActionPalette.tsx`: Missing `\u003cActionLine\u003e` for the `f` key\n\n## Implementation Plan\n1. Add `f` to `QUEUED_ACTIONS` set in ActionPalette.tsx (if it should be blocked when busy)\n2. Add `isAvailableByState` case for `f` - should be available when session is not idle (same as `P`, `m`, `d`)\n3. Add `\u003cActionLine keyName=\"f\" description=\"diff\" /\u003e` to the JSX, positioned logically with other Git/PR actions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:17:55.603878+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T13:42:21.244438+11:00"}
{"id":"az-mj5","title":"Add structured logging with Effect Logger","description":"Add comprehensive logging for debugging and observability:\n\n**Implementation:**\n- Use Effect's Logger service with structured JSON output\n- Add log levels: debug, info, warn, error\n- Log file output option (--log-file flag)\n- Key events to log:\n  - Session lifecycle (start, stop, state changes)\n  - Beads operations (create, update, sync)\n  - Git operations (worktree, merge, PR)\n  - Keyboard actions (for debugging keybinding issues)\n  - Error conditions with context\n\n**Config:**\n- LOG_LEVEL env var (default: info)\n- --verbose flag for debug output\n- Timestamp and source service in each log entry","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-17T15:59:45.524867+11:00","updated_at":"2025-12-19T10:36:12.501117+11:00","deleted_at":"2025-12-19T10:36:12.501117+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"feature"}
{"id":"az-kgq","title":"Multi-project support","description":"Monitor tasks across multiple beads-enabled projects.","notes":"Root cause identified: TWO issues\n1. `az add` doesn't exist as a top-level command - only `az project add`\n2. tmux wrapping applies to ALL commands, but when attaching to existing session with `-A`, the command is IGNORED - so `az add` just attaches to TUI instead of running add command\n\nFix: Only wrap in tmux for the default TUI command, not for subcommands","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-11T14:45:41.986553+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T14:15:34.883797+11:00","dependencies":[{"issue_id":"az-kgq","depends_on_id":"az-ee4","type":"parent-child","created_at":"2025-12-11T14:46:10.274456+11:00","created_by":"daemon"}]}
{"id":"az-9gxm","title":"Spike: Gleam terminal I/O and Erlang FFI patterns","description":"**Goal:** Understand how to do low-level terminal I/O in Gleam if Etch doesn't work out.\n\n## Questions to Answer\n1. How do we enter/exit raw mode via Erlang's io module or termios?\n2. How do we read stdin byte-by-byte for escape sequence parsing?\n3. How do we write to stdout efficiently (buffering)?\n4. What FFI patterns does Gleam use for Erlang interop?\n\n## Investigation Areas\n- Erlang's `io` module for terminal I/O\n- Erlang's `proplists:get_value(terminal, io:getopts())` for terminal detection\n- Potential use of Erlang NIFs or ports for termios\n- Gleam `@external` function syntax\n\n## Deliverables\n1. Working example: Enter raw mode, read key, print it, exit raw mode\n2. Document FFI patterns used\n3. Risk assessment: Any platform-specific concerns?\n\n## Dependencies\n- Should be done in parallel with Etch spike\n- Results inform az-zh3y (Input handling) architecture","notes":"Research completed 2025-12-28. See detailed findings in task response.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T11:40:14.502402+11:00","updated_at":"2025-12-28T12:29:59.443775+11:00","closed_at":"2025-12-28T12:29:59.443775+11:00","dependencies":[{"issue_id":"az-9gxm","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:41:50.980312+11:00","created_by":"daemon"}]}
{"id":"az-ur03","title":"add a redraw keybind","description":"sometimes the screen size changes and az tui gets messed up","notes":"üìé [mjfeccac-hyoq.png](.beads/images/az-ur03/mjfeccac-hyoq.png) (clipboard, 12/21/2025, 6:19:18 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T18:19:16.166589+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T20:27:32.505365+11:00"}
{"id":"az-xxvo","title":"something is running bd prime in the terminal as part of initCommands which does nothing","description":"i think we bd prime in the az opencode plugin so no need for whatever this thing is","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:16:28.433039+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-22T12:58:35.437367+11:00"}
{"id":"az-2il","title":"Agent Mail status broadcast integration","description":"Workers broadcast status via Agent Mail for real-time TUI updates.\n\n**Events:**\n- STARTED: Worker began task\n- PROGRESS: Periodic heartbeat with context %\n- BLOCKED: Worker discovered blocker\n- COMPLETED: Worker finished task\n- ERROR: Worker encountered error\n\n**TUI subscription:**\n- Poll Agent Mail for status updates (or WebSocket if available)\n- Update TaskCard session indicators in real-time\n- Show toast for important events (blocked, error)\n\n**Depends on:** Agent Mail integration (az-l7a)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T13:29:15.170002+11:00","updated_at":"2025-12-14T02:13:25.698677+11:00","dependencies":[{"issue_id":"az-2il","depends_on_id":"az-l7a","type":"blocks","created_at":"2025-12-12T13:29:24.916405+11:00","created_by":"daemon"},{"issue_id":"az-2il","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-12T13:29:32.86955+11:00","created_by":"daemon"}]}
{"id":"az-04d","title":"Add \"Merge to main\" action for completed worktree tasks","description":"When a task is done (manual mode, not CV mode), user should be able to press Space ‚Üí m to merge the worktree branch to main and clean up.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T21:49:14.135837+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T22:21:47.442705+11:00"}
{"id":"az-bth","title":"can't put cursor on started task in normal mode","description":"its right above current cursor but up arrow does nothing. check az.log","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T13:50:52.307315+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T14:07:19.991268+11:00"}
{"id":"az-osly","title":"unify the dev server overlays (view, edit)","description":"up, down to select\nleft, right, space to toggle start/stop.\nenter/a to attach to that specific window (only available on running/error statuses)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:40:00.106578+11:00","updated_at":"2025-12-29T18:08:42.760998+11:00","closed_at":"2025-12-29T18:08:42.760998+11:00"}
{"id":"az-xi5","title":"SessionManager - Claude session orchestration","description":"Core orchestration: spawn Claude in tmux sessions, manage lifecycle, coordinate with worktrees.","notes":"Implemented SessionManager service in src/core/SessionManager.ts following Effect service pattern.\n\nKey implementation details:\n- Service interface with 7 methods: start, stop, pause, resume, getState, listActive, updateState, subscribeToStateChanges\n- Uses Effect.gen pattern for orchestration\n- Composes WorktreeManager, TmuxService, BeadsClient, and StateDetector services\n- Tracks sessions in Ref\u003cHashMap\u003cBeadId, Session\u003e\u003e\n- PubSub for state change events\n- SessionManagerLive layer with all dependencies included\n- All methods require CommandExecutor in context (provided by BunContext layer)\n- Type-safe error handling with typed error unions\n- Comprehensive JSDoc documentation\n\nThe start() method creates worktree, spawns tmux session, and launches Claude.\nThe pause() method sends Ctrl+C and creates WIP commit.\nThe stop() method kills tmux session.\n\nAll types pass strict TypeScript checking (pnpm type-check).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:44.82144+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:32:34.049829+11:00","dependencies":[{"issue_id":"az-xi5","depends_on_id":"az-a8i","type":"blocks","created_at":"2025-12-11T14:46:27.560945+11:00","created_by":"daemon"},{"issue_id":"az-xi5","depends_on_id":"az-d8z","type":"parent-child","created_at":"2025-12-11T14:46:08.3385+11:00","created_by":"daemon"},{"issue_id":"az-xi5","depends_on_id":"az-om3","type":"blocks","created_at":"2025-12-11T14:46:26.452316+11:00","created_by":"daemon"},{"issue_id":"az-xi5","depends_on_id":"az-kis","type":"blocks","created_at":"2025-12-11T14:46:26.845057+11:00","created_by":"daemon"}]}
{"id":"az-fei","title":"when i search and press enter on a search result i expect to put cursor on that item in normal mode","description":"it should be scrolled into view too","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:16:12.214738+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:18:42.942191+11:00"}
{"id":"az-d8p4","title":"we should copy over .direnv to new worktrees so we dont have to wait for nix flake cache refresh","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:43:45.268742+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T12:46:53.711866+11:00"}
{"id":"az-eei","title":"creating beads with space C (capital) not working","description":"i dont see any errors in log either","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:58:12.469026+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T01:07:50.693525+11:00"}
{"id":"az-1app","title":"create our own git diff tui for space f","description":"brainstorm features with me but my vision is basically just difftastic side by side, two or three modes: fzf/filetree/infinite scroll. fzf/filetree to find/filter files and an infinite scroll view (difftastic default)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:47:14.538041+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T23:26:04.09691+11:00"}
{"id":"az-j7qi","title":"Create quality-gate subagent definition","description":"Reusable subagent that validates epic readiness for parallel execution.\n\n**Core function:** Detect file conflicts between tasks that will run simultaneously.\n\n**Outputs:**\n- Which tasks can safely run in parallel\n- Conflict warnings (tasks touching same files)\n- Suggested groupings or reordering\n\n**Location:** .claude/agents/quality-gate.md (portable to other beads projects)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:14:04.47434+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T11:53:29.237705+11:00","dependencies":[{"issue_id":"az-j7qi","depends_on_id":"az-wn3o","type":"parent-child","created_at":"2025-12-19T11:14:21.766793+11:00","created_by":"daemon"},{"issue_id":"az-j7qi","depends_on_id":"az-0h3d","type":"blocks","created_at":"2025-12-19T11:14:22.034941+11:00","created_by":"daemon"}]}
{"id":"az-d19m","title":"lustre_tui: Runtime - main loop, input dispatch, render cycle","description":"The runtime that drives a Lustre TUI application.\n\n## Why Separate from Reconciler\nThe runtime handles the event loop, timing, and lifecycle. Reconciler just converts Elements to Renderables.\n\n## Responsibilities\n1. Initialize terminal (alt screen, raw mode, hide cursor)\n2. Run initial render\n3. Poll for input events\n4. Dispatch events as Lustre messages\n5. Re-render on model changes\n6. Handle cleanup on exit\n7. **Handle signals (SIGINT/SIGTERM) for graceful shutdown**\n\n## API (Gleam)\n```gleam\ntype App(model, msg) {\n  App(\n    init: fn() -\u003e model,\n    update: fn(model, msg) -\u003e model,\n    view: fn(model) -\u003e Element(msg),\n  )\n}\n\ntype Runtime(model, msg)\n\n/// Start the TUI application (blocking)\nfn start(app: App(model, msg)) -\u003e Result(Nil, Error)\n\n/// Start with configuration\nfn start_with_config(app: App(model, msg), config: Config) -\u003e Result(Nil, Error)\n\ntype Config {\n  Config(\n    fps: Int,              // Target frame rate (default 60)\n    alt_screen: Bool,      // Use alternate screen buffer (default True)\n    mouse: Bool,           // Enable mouse events (default False)\n  )\n}\n```\n\n## Implementation\n```gleam\nfn run_loop(runtime: Runtime(model, msg)) -\u003e Result(Nil, Error) {\n  // 1. Check for input or resize events\n  case poll_event(runtime.input_handler) {\n    Some(Key(key)) -\u003e {\n      // 2. Convert to message via view's event handlers\n      case find_handler(runtime.view_tree, key) {\n        Some(msg) -\u003e {\n          // 3. Update model\n          let new_model = runtime.app.update(runtime.model, msg)\n          // 4. Re-render\n          let new_view = runtime.app.view(new_model)\n          render(runtime, new_view)\n          run_loop(Runtime(..runtime, model: new_model, view_tree: new_view))\n        }\n        None -\u003e run_loop(runtime)\n      }\n    }\n    Some(Resize(w, h)) -\u003e {\n      // Handle resize: update dimensions, re-layout, re-render\n      ...\n    }\n    None -\u003e {\n      // No input, continue loop\n      run_loop(runtime)\n    }\n  }\n}\n```\n\n## Signal Handling\n- **SIGINT (Ctrl+C)**: Clean shutdown, restore terminal\n- **SIGTERM**: Same as SIGINT\n- **SIGWINCH**: Handled by resize task (az-otrx)\n\n```gleam\n// On startup, install signal handlers\nfn install_signal_handlers() -\u003e Result(Nil, Error)\n\n// Cleanup function (called on any exit)\nfn cleanup(runtime: Runtime) -\u003e Nil {\n  exit_alt_screen()\n  show_cursor()\n  exit_raw_mode()\n}\n```\n\n## Acceptance Criteria\n- [ ] Terminal initializes correctly (alt screen, raw mode)\n- [ ] Initial render displays correctly\n- [ ] Input events are captured\n- [ ] Messages dispatch to update function\n- [ ] Model changes trigger re-render\n- [ ] Clean shutdown restores terminal\n- [ ] Ctrl+C handling works (graceful exit)\n- [ ] SIGTERM handling works\n- [ ] Resize events trigger re-layout (via az-otrx)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T11:32:20.13649+11:00","updated_at":"2025-12-28T11:44:02.69659+11:00","dependencies":[{"issue_id":"az-d19m","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.484499+11:00","created_by":"daemon"},{"issue_id":"az-d19m","depends_on_id":"az-7tzh","type":"blocks","created_at":"2025-12-28T11:34:13.336661+11:00","created_by":"daemon"},{"issue_id":"az-d19m","depends_on_id":"az-5xza","type":"blocks","created_at":"2025-12-28T11:34:13.411369+11:00","created_by":"daemon"},{"issue_id":"az-d19m","depends_on_id":"az-zh3y","type":"blocks","created_at":"2025-12-28T11:34:13.488943+11:00","created_by":"daemon"},{"issue_id":"az-d19m","depends_on_id":"az-otrx","type":"blocks","created_at":"2025-12-28T11:43:16.866604+11:00","created_by":"daemon"}]}
{"id":"az-vx2","title":"Add debug overlay (d key) showing service state","description":"Developer tool for debugging state issues:\n\n**Debug overlay shows:**\n- Current mode (EditorService)\n- Cursor position and focused task ID (NavigationService)  \n- Active sessions with states (SessionManager)\n- Command queue status (CommandQueueService)\n- Filter/sort settings (BoardService)\n- Recent errors/warnings\n\n**Toggle with 'd' key in normal mode**\n- Semi-transparent overlay on right side\n- Auto-refreshes every 500ms\n- Useful for debugging state sync issues like az-vn0 (disappearing tasks)","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-17T15:59:45.895225+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:06:44.78128+11:00"}
{"id":"az-biza","title":"we should ensure that claude always commits changes when it says it's done","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:48:53.111348+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T03:39:19.01128+11:00"}
{"id":"az-z4n","title":"Improve error messages with actionable guidance","description":"Current errors may be cryptic. Enhance error handling:\n\n**Error categories:**\n- Git errors ‚Üí Suggest git commands to fix (merge conflicts, dirty worktree)\n- Beads errors ‚Üí Guide to bd commands or sync issues\n- Tmux errors ‚Üí Check tmux installation, session conflicts\n- PR errors ‚Üí GitHub auth issues, branch protection rules\n\n**Implementation:**\n- Create ErrorFormatter service\n- Map error types to user-friendly messages\n- Include \"Try:\" suggestions with specific commands\n- Show in Toast with longer duration for errors\n- Option to copy error details to clipboard","notes":"Implementation complete:\\n\\n**Created ErrorFormatter service (src/services/ErrorFormatter.ts):**\\n- Registry of 30+ error formatters for all tagged error types\\n- Pattern matching within formatters for sub-cases (merge conflicts, auth issues, network errors)\\n- User-friendly messages with actionable \\\"Try:\\\" suggestions\\n- Exports: format(), formatForToast(), logFormatted(), ErrorFormatter service\\n\\n**Updated KeyboardService:**\\n- showErrorToast() now uses formatForToast() for rich error messages\\n- Merge error handling uses formatForToast()\\n\\n**Updated atoms.ts:**\\n- Task creation error uses formatForToast()\\n\\n**Updated Toast component:**\\n- Multi-line message support (for error + suggestion)\\n- Error toasts now last 8 seconds (vs 5 for info/success)\\n- Wider max width (70 chars) to accommodate suggestions","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T15:59:45.712759+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:28:45.033741+11:00"}
{"id":"az-xi1r","title":"i want to enable the user to use claude code competitors","description":"e.g. they can configure to use opencode instead. we can just allow this one for now","notes":"## Session 2 Progress (2025-12-22)\n\n### Completed ‚úì\n\n**OpenCode Plugin Ecosystem:**\n1. ‚úì Discovered existing `opencode-beads` plugin (handles bd prime, /bd-* commands)\n2. ‚úì Created `.opencode/plugin/azedarach.js` for session status monitoring\n3. ‚úì Installed globally at `~/.config/opencode/plugin/azedarach.js`\n\n**Skills Integration:**\n4. ‚úì Created `scripts/generate-opencode-skills.sh` - converts Claude skills to OpenCode format\n5. ‚úì Generated 19 skill wrappers for Chefy\n6. ‚úì Generated skill wrappers for Azedarach\n\n**CLI Command:**\n7. ‚úì Added `az opencode init` command for easy project setup\n   - Creates/updates opencode.json\n   - Checks global plugin installation\n   - Generates skill wrappers\n\n**Project Setup:**\n8. ‚úì Azedarach: opencode.json, AGENTS.md, skills\n9. ‚úì Chefy: opencode.json, skills, plugin\n\n### Remaining\n\n- [ ] Settings UI (Ctrl+, overlay) - lower priority\n- [ ] Consider publishing azedarach plugin to npm\n\n### Key Files\n\n- `.opencode/plugin/azedarach.js` - Session status plugin\n- `scripts/generate-opencode-skills.sh` - Skill generator\n- `src/cli/index.ts` - Added opencodeCommand","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T23:12:20.614607+11:00","updated_at":"2026-01-04T13:23:37.333055+11:00","closed_at":"2026-01-04T13:23:37.333059+11:00"}
{"id":"az-m33z","title":"i want ctrl-u/d to scroll columns half screen","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:42:10.270868+11:00","updated_at":"2025-12-31T11:02:39.026512+11:00","closed_at":"2025-12-31T11:02:39.026514+11:00"}
{"id":"az-76a","title":"session busy status even though claude has been waiting for me to press 1-3 for 2mins","notes":"**Root cause:** The `Stop` hook fires immediately when Claude finishes responding, but HookReceiver was ignoring it (returning `null` instead of transitioning to \"waiting\" state).\n\n**Primary fix (HookReceiver.ts):**\nChanged `mapEventToState(\"stop\")` from returning `null` to returning `\"waiting\"`.\n\nThe Stop hook was already correctly configured in WorktreeManager to call `az notify stop ${beadId}`, but the event was being discarded.\n\n**Secondary fix (StateDetector.ts):**\nAdded backup PTY patterns for AskUserQuestion tool output (numbered options, \"Other\" option). This provides defense-in-depth but the hook-based solution is more reliable.\n\n**Architecture note:**\n- Hook-based detection (Stop hook) is authoritative and immediate\n- PTY pattern matching is a fallback for edge cases\n- idle_prompt notification (60s timeout) is a last-resort safety net","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:17:07.106897+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T10:24:26.792564+11:00"}
{"id":"az-ufgi","title":"i dont see o as an option in normal mode bottom bar in epic drill down","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T11:39:43.508204+11:00","updated_at":"2025-12-19T11:39:43.508204+11:00"}
{"id":"az-auzp","title":"Loading indicator flashes constantly during background polling","description":"The status bar shows \"Loading...\" every 2 seconds during background board refresh, causing visual noise.\n\n**Root cause:** BoardService sets `isLoading=true` during every background poll (every 2 seconds), making the loading indicator flash constantly.\n\n**Fix:** Debounce the loading indicator - only show it if loading takes longer than 500ms, preventing flash on quick background refreshes.\n\n**Related:** Dev server features (Space+w, port management, start/stop indicators) are tracked in az-dvsr which was reopened - that bead was designed but never implemented.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T11:37:35.377412+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T14:14:01.944038+11:00"}
{"id":"az-xqc2","title":"Check for uncommitted changes before Space+m merge to prevent autostash conflicts","description":"When `merge.autostash=true` is configured in git, uncommitted changes get stashed before merge and auto-popped after. If the stash pop conflicts with merged content, you get a stash conflict that the current `checkMergeConflicts()` (git merge-tree) can't detect.\n\nAdd a pre-merge check in the Space+m handler to detect uncommitted changes and warn the user before proceeding.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T16:14:34.913357+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:29.667417+11:00"}
{"id":"az-2m9","title":"search mode needs to accept enter/return to return to normal mode","description":"should have the selected item from search selected","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T13:28:34.821948+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T23:20:14.269868+11:00"}
{"id":"az-c1vq","title":"improve PR workflow","description":"the local dev workflow is great. space m does so much and does it well but the PR workflow is pretty barebones. in chefy i will primarily use PRs to merge work into base branch so i need to streamline it too. e.g. having claude merge base branch into worktree automatically","notes":"## Implementation Complete ‚úÖ\n\nAll acceptance criteria met:\n\n- [x] Space+P: Automatically merges main into worktree before creating PR\n- [x] Space+P: If conflicts exist, Claude resolves them before PR creation\n- [x] Space+u: New keybinding to update worktree from main at any time\n- [x] Space+u: Shows conflicts to Claude for resolution if they exist\n- [x] Session attach: Fetches PR comments if PR exists\n- [x] Session attach: Injects comments into Claude context with resolution prompt\n- [x] Documentation updated for new keybinding\n- [x] Type check passes, build succeeds","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:02:15.819171+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:41:55.108964+11:00"}
{"id":"az-t3qd","title":"this epic task is showing a small amount of changes incorrectly in task header","description":"but space f shows the full changes","notes":"üìé [mjrzux0u-sn88.png](.beads/images/az-t3qd/mjrzux0u-sn88.png) (clipboard, 12/30/2025, 1:54:51 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:54:44.888318+11:00","updated_at":"2025-12-30T14:01:41.369619+11:00","closed_at":"2025-12-30T14:01:41.369619+11:00"}
{"id":"az-0h0","title":"TEST BEAD","description":"check bun version in a claude session made by az","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T01:11:04.88589+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T14:25:09.65145+11:00"}
{"id":"az-66f4","title":"add ability to view running dev server","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T19:29:50.61444+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-20T00:23:00.78289+11:00"}
{"id":"az-ln3v","title":"sort modes should have secondary sort layers","description":"e.g. session sort mode should use updated as a secondary layer of sorting to sort the nested and unnested","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:32:31.602591+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:35:18.905254+11:00"}
{"id":"az-ux7m","title":"when i space on a epic child with changes m is greyed out","description":"but if i hit m it still merges","notes":"üìé [mjrxsl67-tjog.png](.beads/images/az-ux7m/mjrxsl67-tjog.png) (clipboard, 12/30/2025, 12:57:04 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T12:56:54.785842+11:00","updated_at":"2025-12-30T13:03:25.35626+11:00","closed_at":"2025-12-30T13:03:25.35626+11:00"}
{"id":"az-hkfa","title":"tui_core: Color utilities - hex parsing and ANSI conversion","description":"Port OpenTUI's ansi.ts color handling to Gleam.\n\n## Why First\nColors are used by FrameBuffer cells and Renderer output. Need this foundation before either.\n\n## API (Gleam)\n```gleam\ntype Color {\n  Hex(String)           // \"#8aadf4\"\n  Rgb(Int, Int, Int)    // Rgb(138, 173, 244)\n  Ansi256(Int)          // 256-color palette index\n  Named(String)         // \"red\", \"blue\", etc.\n  Default               // Terminal default\n}\n\n/// Parse hex string to RGB values\nfn parse_hex(hex: String) -\u003e Result(#(Int, Int, Int), Nil)\n\n/// Convert to ANSI 256-color (for older terminals)\nfn to_ansi256(r: Int, g: Int, b: Int) -\u003e Int\n\n/// Generate foreground escape sequence (true color)\nfn fg_escape(color: Color) -\u003e String  // \"\\x1b[38;2;R;G;Bm\"\n\n/// Generate background escape sequence (true color)\nfn bg_escape(color: Color) -\u003e String  // \"\\x1b[48;2;R;G;Bm\"\n\n/// Reset all attributes\nfn reset() -\u003e String  // \"\\x1b[0m\"\n```\n\n## Reference\n- OpenTUI: packages/core/src/ansi.ts\n- ANSI escape codes: https://en.wikipedia.org/wiki/ANSI_escape_code\n\n## Acceptance Criteria\n- [ ] Parse \"#rrggbb\" and \"#rgb\" formats\n- [ ] Generate true color (24-bit) escape sequences\n- [ ] Generate 256-color fallback escape sequences\n- [ ] Handle bold, dim, underline, etc. attributes","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T11:31:22.083652+11:00","updated_at":"2025-12-29T15:16:03.528986+11:00","closed_at":"2025-12-29T15:16:03.528986+11:00","dependencies":[{"issue_id":"az-hkfa","depends_on_id":"az-lvah","type":"blocks","created_at":"2025-12-28T11:41:51.199473+11:00","created_by":"daemon"},{"issue_id":"az-hkfa","depends_on_id":"az-kwwr","type":"blocks","created_at":"2025-12-28T11:52:29.324605+11:00","created_by":"daemon"},{"issue_id":"az-hkfa","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.129131+11:00","created_by":"daemon"}]}
{"id":"az-g84","title":"space c (chat with claude about task) not working","description":"it seems to start a session cause i see a blue dot in az tui but when i press space a it says it failed to attach (not found) i also think it would be better to attach inline or whatever its called in this instance (overlay tui and end on closing out) similar to the log viewer (L) keybind","notes":"Investigated the issue. Found two problems:\n\n1. Space+c starts session but doesn't auto-attach - user sees blue dot but session lookup fails on Space+a\n2. User wants inline popup attach (like Shift+L for logs) instead of external terminal\n\nSolution: Modify actionChatAboutTask to use tmux displayPopup like the log viewer, which will:\n- Start the Claude chat session\n- Immediately show it in a popup overlay\n- Auto-close popup when session ends","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:21:47.203086+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:27:28.647989+11:00"}
{"id":"az-odr","title":"Fix Space+m merge workflow to prevent merge conflicts","description":"The Space+m (merge to main) workflow has repeatedly failed to prevent merge conflicts from reaching the main branch. This has happened multiple times, requiring manual conflict resolution.\n\n## Root Cause Analysis\nThe current `checkMergeConflicts` in PRWorkflow.ts only does a file-level overlap check (files modified on both branches). This doesn't catch actual content conflicts - Git only discovers those during the merge attempt.\n\n## What's Happening Now\n1. `checkMergeConflicts` compares file lists between branches\n2. If files overlap, shows a confirmation dialog\n3. User confirms (or no overlap detected), merge proceeds\n4. Git attempts merge and finds actual conflicts\n5. Conflicts land on main branch\n\n## Expected Behavior\nThe merge should NEVER introduce conflicts to main. If conflicts exist, they should be resolved in the worktree BEFORE the merge to main happens.\n\n## Proposed Solution\n1. **Perform a test merge first** - In the worktree, do `git fetch origin main \u0026\u0026 git merge --no-commit origin/main`\n2. **Check for conflicts** - If conflicts occur, abort the test merge and report them\n3. **Only proceed if clean** - If test merge succeeds, then push to main\n4. **Auto-abort on conflict** - If test merge has conflicts, abort it (`git merge --abort`) and show which files conflict\n\nThis ensures main always stays clean.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T17:00:52.211803+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T02:10:35.262268+11:00"}
{"id":"az-zqi","title":"Full bead editor (Space+e)","description":"Open selected bead in $EDITOR with structured markdown format. Parse on save, validate structure, discard if invalid, update via bd CLI if valid.","notes":"Type change handling:\nIf user changes Type: field (e.g., task ‚Üí epic), the editor must:\n1. Detect type changed during parse\n2. bd create --type=newType with all other fields ‚Üí get new ID\n3. Copy dependencies: bd dep add new-id (for each dep)\n4. bd delete old-id\n5. Navigate TUI to new bead\n\nThis is necessary because bd update cannot change issue_type after creation.\n\nFormat is Azedarach-owned since bd has no full-bead format - only per-field edit (bd edit --notes) or CLI flags (bd update --notes='...').","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T10:59:31.596266+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T12:20:24.690791+11:00","dependencies":[{"issue_id":"az-zqi","depends_on_id":"az-shv","type":"blocks","created_at":"2025-12-12T10:59:35.281709+11:00","created_by":"daemon"}]}
{"id":"az-md0x","title":"Add Claude Orchestrate option to orchestration UI","description":"In OrchestrationOverlay or via new entry point:\n- Add \"Claude Orchestrate\" option alongside manual selection\n- Spawns orchestrator session with:\n  - autoCompact: true\n  - orchestrator template\n  - No initial task selection (orchestrator decides)","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-19T11:14:04.59242+11:00","updated_at":"2025-12-20T00:33:12.299787+11:00","dependencies":[{"issue_id":"az-md0x","depends_on_id":"az-wn3o","type":"parent-child","created_at":"2025-12-19T11:14:21.855953+11:00","created_by":"daemon"},{"issue_id":"az-md0x","depends_on_id":"az-2q75","type":"blocks","created_at":"2025-12-19T11:14:22.125985+11:00","created_by":"daemon"},{"issue_id":"az-md0x","depends_on_id":"az-0h3d","type":"blocks","created_at":"2025-12-19T11:14:22.221409+11:00","created_by":"daemon"},{"issue_id":"az-md0x","depends_on_id":"az-j7qi","type":"blocks","created_at":"2025-12-19T11:14:22.31572+11:00","created_by":"daemon"}]}
{"id":"az-kny9","title":"add ability to configure local/origin mode so that you either work via space m to merge or space P to pull request","description":"so you cannot accidentally use the wrong worflow in a project. this also means we need to make this config the source of truth of the base branch being remote or local. currently its always local","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T15:30:32.823708+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T18:33:52.622327+11:00"}
{"id":"az-et1","title":"Add elapsed timer to TaskCard","description":"Display MM:SS elapsed timer on TaskCards when session is active (busy/waiting state).\n\nInspiration: AutoMaker's CountUpTimer component.\n\nImplementation:\n1. Already have session startedAt timestamp in session metrics\n2. Add timer display component that updates every second\n3. Show on card when session state is busy or waiting\n4. Format as MM:SS (pad with zeros)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:00:01Z","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T14:09:14.159624+11:00"}
{"id":"az-gds","title":"Subagent orchestration for parallel epic development","description":"Enable TUI to orchestrate multiple parallel Claude sessions working on related tasks (e.g., epic children). Each worker runs in its own worktree/tmux session. Coordination via Agent Mail for real-time updates, beads for persistent state.\n\n**Key Features:**\n1. Space+o on epic ‚Üí orchestration mode showing child tasks\n2. Select which tasks to parallelize\n3. Spawn workers (worktree + tmux + claude per task)\n4. Workers get injected context about epic and coordination rules\n5. Real-time progress tracking via Agent Mail status broadcasts\n6. Epic progress bar showing X/Y tasks complete\n7. Optional orchestrator Claude for planning/review phases\n\n**Architecture:**\n- TUI is external orchestrator (not a Claude subagent)\n- Workers are independent Claude sessions\n- Agent Mail handles: reservations, status, completion signals\n- Beads handles: persistent notes, design decisions\n- Graceful degradation to git-only if Agent Mail unavailable\n\n**New UI:**\n- Orchestration mode (Space+o)\n- Epic progress indicator (‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 3/5)\n- Indented child tasks under epic\n- Worker status in session indicators\n\n**Session Templates:**\n- worker.md template with epic context injection\n- Coordination rules (stay focused, report discoveries)\n- Auto-close task on completion","notes":"Session 2025-12-12: Designed from Claude Code best practices research.\n\nRESEARCH VALIDATION:\n- Pattern confirmed: Git worktrees are de facto standard for parallel AI agents (Cursor, ccswarm, Claude-Flow all use this)\n- Key insight: TUI as external orchestrator avoids Claude subagent nesting limits\n- Agent Mail provides \u003c100ms coordination vs 2-5s git sync\n\nARCHITECTURE DECISIONS:\n- TUI spawns workers (not Claude spawning subagents) - no nesting limits\n- Each worker: worktree + tmux session + Claude instance\n- Agent Mail for: reservations, status broadcasts, completion signals  \n- Beads for: persistent notes, design decisions\n- Graceful degradation to git-only if Agent Mail unavailable\n\nUI DESIGN:\n- Space+o triggers orchestration mode on epics\n- Reuse select mode patterns for task selection\n- Progress bar: ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 3/5 format\n- Indented children under epics in board view\n\nDEPENDENCIES:\n- [deleted:az-7sr] (orch mode) + [deleted:az-lqb] (template) ‚Üí [deleted:az-bjp] (spawning)\n- az-l7a (Agent Mail epic) ‚Üí az-2il (status broadcasts)\n\nNEXT STEP: Implement [deleted:az-7sr] (orchestration mode) or [deleted:az-lqb] (worker template) - both are ready","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T13:28:50.911119+11:00","updated_at":"2025-12-28T11:48:04.491213+11:00"}
{"id":"az-shf","title":"when a bead action is occurring such as space S, disable further actions from being taken on that bead until its idle again","notes":"Starting implementation. Strategy:\n1. Create taskQueueInfoAtom for reactive queue state\n2. Add isBusy check to ActionPalette isAvailable()\n3. Add busy guard to handlers that use withQueue\n4. Show running operation label in toast when blocked","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:04:50.355647+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:30:22.984791+11:00"}
{"id":"az-0uey","title":"occaisional issue with space s \"worktree created but not found in list\"","description":"attached image","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:28:54.439086+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T15:39:51.361674+11:00"}
{"id":"az-e6z2","title":"when i attach to an epic's child task and it offers to merge it should merge the epic in","description":"not the project's base branch. we need to do a full review of git operations in an epic. everything in an epic should all revolve around using the epic branch as the base","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:11:44.123285+11:00","updated_at":"2025-12-30T14:23:09.296506+11:00","closed_at":"2025-12-30T14:23:09.296506+11:00"}
{"id":"az-pn6","title":"StatusBar component","description":"Bottom status bar showing available actions and system status.","notes":"Enhanced StatusBar component with:\n1. Connection/sync status indicator (‚óè connected, ‚óã disconnected) using theme colors\n2. Responsive terminal width handling - hides keybinds \u003c100 cols, mode display \u003c80 cols, selected count \u003c60 cols\n3. Project name 'azedarach' displayed on left with bold styling\n4. Improved visual hierarchy using Catppuccin theme colors (green for connected, overlay0 for disconnected)\n5. Added optional 'connected' prop to StatusBarProps (defaults to true)\n6. Type-safe implementation - pnpm type-check passes with no errors","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:07.987695+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T01:29:02.416939+11:00","dependencies":[{"issue_id":"az-pn6","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T14:46:09.038999+11:00","created_by":"daemon"}]}
{"id":"az-eyws","title":"bead got stuck merging","notes":"üìé [mjgkbwhw-ybaw.png](.beads/images/az-eyws/mjgkbwhw-ybaw.png) (clipboard, 12/22/2025, 1:54:41 PM)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T13:54:38.068469+11:00","updated_at":"2025-12-22T13:54:41.76088+11:00"}
{"id":"az-ykth","title":"add tmux hotkey that switches between dev server and claude tmux sessions in same worktree","description":"a global tmux hotkey like we did ctrl a a","notes":"## Implementation Complete\n\n### Changes Made\n1. **TmuxService.ts** (line 52-70): Added keybinding injection in `newSession()` that binds `Ctrl-a Tab` to a shell script that toggles between Claude and dev server sessions\n\n2. **tmux-config.md**: Added new hotkey to the cheatsheet and workflow tips section\n\n3. **keybindings.md**: Updated tmux navigation section with the new toggle and navigation flow\n\n### How It Works\n- Session naming convention: Claude uses `\u003cbeadId\u003e`, dev server uses `az-dev-\u003cbeadId\u003e`\n- The toggle script detects which session type you're in and computes the counterpart\n- If target exists: switches to it via `tmux switch-client`\n- If target doesn't exist: shows helpful message like \"No dev server (Space+r to start)\"\n\n### Testing\n- Type-check passes\n- Build succeeds\n- Manual testing needed: start a Claude session, start a dev server, try `Ctrl-a Tab`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T04:19:18.631478+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T16:00:13.078059+11:00"}
{"id":"az-ph1","title":"Add agent phase detection and display","description":"Detect and display Claude agent phases (Planning/Action/Verification) on TaskCards. Parse Claude output patterns to identify current phase and show visual indicator.\n\nInspiration: AutoMaker shows phase status on cards with Planning ‚Üí Action ‚Üí Verification workflow.\n\nImplementation:\n1. Extend StateDetector to detect phase transitions from output patterns\n2. Add phase field to session state (idle/planning/implementing/testing/done)\n3. Display phase badge/indicator on TaskCard when session is active\n4. Update phase in real-time as output is parsed","notes":"Explored codebase. Key files:\n- StateDetector.ts: Pattern-based detection, returns SessionState (idle/busy/waiting/done/error)\n- types.ts: SessionState, SessionMetrics, TaskWithSession, SESSION_INDICATORS\n- TaskCard.tsx: Shows indicator from SESSION_INDICATORS, has header line with id/type/indicator\n- DetailPanel.tsx: Shows session metrics when active\n\nImplementation plan:\n1. Add AgentPhase type and PHASE_INDICATORS to types.ts\n2. Add agentPhase field to SessionMetrics interface\n3. Extend StateDetector with phase detection patterns\n4. Update TaskCard to show phase indicator\n5. Update DetailPanel to show phase in metrics section","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T12:00:00Z","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:22:20.767385+11:00"}
{"id":"az-4mqg","title":"in remote workflowMode i need a way to compile an epic's work into one PR","description":"i dont want to create a PR per epic task against base branch\nso maybe we enable the merge flow for this but where base branch for epic children is the epic branch","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T17:20:49.005057+11:00","updated_at":"2025-12-30T00:04:49.632078+11:00","closed_at":"2025-12-30T00:04:49.632078+11:00"}
{"id":"az-9bua","title":"when az restarts we lose track of claude session status","notes":"Implemented session persistence to .azedarach/sessions.json:\n\nChanges made:\n1. SessionManager.ts: Added Schema-based persistence with Schema.HashMap + Schema.DateTimeUtc\n2. Updated Session.startedAt from Date to DateTime.Utc\n3. Added loadPersistedSessions() and persistSessions() helpers (with BunContext layer)\n4. Enhanced listActive() to recover state from persisted file\n5. Added persist calls to start(), stop(), pause(), resume(), updateState()\n6. BoardService.ts: Updated toISOString() to DateTime.formatIso()\n7. .gitignore: Added .azedarach/\n\nType-check passes. Ready for testing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:53:43.340812+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T15:41:04.467694+11:00"}
{"id":"az-mf23","title":"most of these git changes should not be showing in this space f git diff","description":"they were not made in the related bead/branch so i'm not sure why they are showing\nyou can see the bead id in the image and check out the git diffs directly. its in the Chefy project","notes":"üìé [mjs14d8z-izdf.png](.beads/images/az-mf23/mjs14d8z-izdf.png) (clipboard, 12/30/2025, 2:30:11 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:30:04.947769+11:00","updated_at":"2025-12-30T15:07:49.345766+11:00","closed_at":"2025-12-30T15:07:49.345768+11:00"}
{"id":"az-7she","title":"when i remove an image it should be also removed from notes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T02:09:49.472426+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:31:32.138193+11:00"}
{"id":"az-ebxf","title":"tui_core: Text utilities - grapheme width, wrapping, truncation","description":"Handle text measurement and manipulation for proper terminal rendering.\n\n## Why\nTerminals display characters with varying widths:\n- ASCII: 1 cell\n- CJK characters: 2 cells\n- Emoji: 1-2 cells (varies)\n- Zero-width joiners: 0 cells\n\n## API (Gleam)\n```gleam\n/// Get display width of a string in terminal cells\nfn display_width(text: String) -\u003e Int\n\n/// Get display width of a single grapheme\nfn grapheme_width(grapheme: String) -\u003e Int\n\n/// Truncate text to fit in N cells, adding ellipsis if needed\nfn truncate(text: String, max_width: Int, ellipsis: String) -\u003e String\n\n/// Wrap text to fit within max_width, respecting word boundaries\nfn wrap(text: String, max_width: Int) -\u003e List(String)\n\n/// Pad text to exactly N cells\nfn pad_right(text: String, width: Int, char: String) -\u003e String\nfn pad_left(text: String, width: Int, char: String) -\u003e String\nfn pad_center(text: String, width: Int, char: String) -\u003e String\n```\n\n## Implementation Notes\n- Use unicode-width table (or port a lib)\n- Consider using Gleam's grapheme handling\n- Emoji handling is complex - start simple\n\n## Acceptance Criteria\n- [ ] Correctly measure ASCII text width\n- [ ] Handle CJK double-width characters\n- [ ] Truncate with ellipsis correctly\n- [ ] Word-wrap respecting boundaries\n- [ ] Pad text to exact width","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T11:31:22.295003+11:00","updated_at":"2025-12-29T15:16:03.616292+11:00","closed_at":"2025-12-29T15:16:03.616292+11:00","dependencies":[{"issue_id":"az-ebxf","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.205467+11:00","created_by":"daemon"},{"issue_id":"az-ebxf","depends_on_id":"az-a0g1","type":"blocks","created_at":"2025-12-28T11:41:51.274213+11:00","created_by":"daemon"},{"issue_id":"az-ebxf","depends_on_id":"az-kwwr","type":"blocks","created_at":"2025-12-28T11:52:29.384581+11:00","created_by":"daemon"}]}
{"id":"az-5z7z","title":"creating tasks from within epic drill down should auto create them in the epic","description":"and probably we need to spawn a claude session to setup any dependencies between it and the other epic tasks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:39:19.433464+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:08:10.232317+11:00"}
{"id":"az-7sr","title":"Add orchestration mode ('o' from epic detail) to TUI","description":"New editor mode for orchestrating parallel workers on an epic.\n\n**Entry flow:**\n1. `Enter` on epic ‚Üí DetailPanel shows epic info + children\n2. `o` in detail overlay ‚Üí enters orchestration mode\n\n**Mode behavior:**\n- Display children as selectable list\n- Space toggles task selection (spawnable tasks only)\n- Enter confirms and triggers spawn\n- Esc returns to detail panel\n\n**Prerequisites:**\n- Epic drill-down: DetailPanel must show children when viewing an epic\n\n**UI:** Overlay-style task selector with selection count and keybinding hints.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-12T13:29:14.653445+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T11:31:29.234847+11:00","dependencies":[{"issue_id":"az-7sr","depends_on_id":"az-gds","type":"parent-child","created_at":"2025-12-12T13:29:32.732517+11:00","created_by":"daemon"}]}
{"id":"az-lolx","title":"i cannot use arrows to move cursor in epic drill down mode","description":"When in epic drill-down mode (entered by pressing Enter on an epic), arrow keys don't move the cursor because navigation operates on a different view of tasks than what's displayed.\n\n## Root Cause\n\nThere's a data mismatch between UI rendering and navigation:\n- **UI (App.tsx)**: Uses `drillDownFilteredTasksAtom` which filters to only epic children\n- **Navigation (NavigationService)**: Uses `getFilteredTasksByColumn()` which ignores drill-down mode\n\nWhen the user presses arrow keys:\n1. `NavigationService.move()` calls `getFilteredTasksByColumn()`\n2. This returns ALL tasks (not just drill-down children)\n3. Navigation finds the cursor at position X in the full task list\n4. But the UI only shows drill-down children, so position X doesn't correspond to the visible tasks\n5. Navigation appears broken because cursor movement is calculated against invisible tasks\n\n## Reproduction\n1. Create an epic with child tasks\n2. Press Enter on the epic to enter drill-down mode\n3. Try using arrow keys (j/k/h/l or up/down/left/right)\n4. Observe: cursor doesn't move as expected","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-19T01:56:14.951559+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T02:23:16.631627+11:00"}
{"id":"az-3k2l","title":"add a icon to the header of a task when there is an active PR","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T17:29:08.934201+11:00","updated_at":"2025-12-29T15:05:38.050429+11:00","closed_at":"2025-12-29T15:05:38.050432+11:00"}
{"id":"az-fvj","title":"BeadsClient - wrapper around bd CLI","description":"Create a TypeScript wrapper around the bd CLI for reading and updating beads issues.","notes":"Session 2025-12-11:\n\nCOMPLETED:\n- Full Effect service wrapping bd CLI\n- Schema validation for Issue type\n- All major bd commands wrapped with typed errors\n\nFILES CREATED:\n- src/core/BeadsClient.ts (447 lines) - Complete service\n- src/core/BeadsClient.example.ts (152 lines) - 8 usage examples\n\nSERVICE METHODS:\n- list(filters?) - List issues with status/priority/type filters\n- show(id) - Get single issue details\n- update(id, fields) - Update status/notes/priority\n- close(id, reason?) - Close issue\n- sync() - Push/pull beads database\n- ready() - Get unblocked issues\n- search(query) - Search issues\n\nERROR TYPES:\n- BeadsError - Generic bd command failures\n- NotFoundError - Issue not found\n- ParseError - JSON/Schema validation errors\n\nLAYERS:\n- BeadsClientLive - Service only (needs BunContext)\n- BeadsClientLiveWithPlatform - Complete with platform deps (recommended)\n\nVERIFICATION:\n- Type check passes\n- Runtime test fetched 10 ready issues from actual beads database","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:44:26.409567+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T17:25:14.06403+11:00","dependencies":[{"issue_id":"az-fvj","depends_on_id":"az-05y","type":"parent-child","created_at":"2025-12-11T14:46:08.006035+11:00","created_by":"daemon"},{"issue_id":"az-fvj","depends_on_id":"az-ags","type":"blocks","created_at":"2025-12-11T14:46:25.575251+11:00","created_by":"daemon"}]}
{"id":"az-hsnx","title":"add confirm dialog to delete/cleanup actions (y/n and enter/esc)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:49:16.229704+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:04:07.468433+11:00"}
{"id":"az-p4ds","title":"merging with space m doesnt always move bead to closed STILL","description":"we have tried to fix this twice already. please figure it out once and for all","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T15:41:56.573516+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:11:29.944746+11:00"}
{"id":"az-d8z","title":"Session Management","description":"Core orchestration layer: git worktrees, tmux sessions, Claude spawning, state detection, and file locking to prevent concurrent access.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-11T14:44:04.762911+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:33:37.439444+11:00"}
{"id":"az-4nge","title":"we sometimes lose track of running dev servers","description":"use tmux as the source of truth for running dev servers maybe? add port and stuff to tmux state like we did for session status","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T01:21:38.086307+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-22T12:58:16.35268+11:00"}
{"id":"az-ccvg","title":"Add getEpicWithChildren method to BeadsClient","description":"Add method to BeadsClient:\n```typescript\ngetEpicWithChildren: (epicId: string, cwd?: string) =\u003e\n  Effect.Effect\u003c{ epic: Issue; children: ReadonlyArray\u003cDependencyRef\u003e }, BeadsError | ParseError | NotFoundError\u003e\n```\n\nImplementation:\n- Call `bd show \u003cepicId\u003e --json`\n- Parse with extended schema\n- Extract `dependents` filtered by `dependency_type: \"parent-child\"`\n- Return epic + children","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:02.388922+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:31.353903+11:00","dependencies":[{"issue_id":"az-ccvg","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:22.095947+11:00","created_by":"daemon"},{"issue_id":"az-ccvg","depends_on_id":"az-xqvh","type":"blocks","created_at":"2025-12-19T01:43:47.801368+11:00","created_by":"daemon"}]}
{"id":"az-1w6h","title":"space f diff is not using configured base branch!","description":"## Problem\n\nThe `Space+f` diff command (and other PR-related commands) use `gitConfig.baseBranch` which is captured **once at service construction time** in `PRHandlersService.ts` (line 64):\n\n```typescript\nconst gitConfig = yield* appConfig.getGitConfig()\n```\n\nThis means when:\n1. A user switches projects with `gp` (project selector)\n2. The new project has a different `git.baseBranch` in its `.azedarach.json` (e.g., `develop` instead of `main`)\n\n...the diff still compares against the **old** project's base branch.\n\n## Root Cause\n\nEffect services capture dependencies at construction time. Since `PRHandlersService` grabs `gitConfig` once during initialization, it doesn't update when `AppConfig.config` (a `SubscriptionRef`) changes.\n\n## Affected Locations in PRHandlersService.ts\n\nAll 5 uses of `gitConfig.baseBranch`:\n- Line 147: `Updating from ${gitConfig.baseBranch}...` (toast in updateFromBase)\n- Line 153: `Updated from ${gitConfig.baseBranch}` (success toast)\n- Line 187: `Syncing with ${gitConfig.baseBranch} before PR...` (toast in createPR)\n- Line 478: `createDiffCommand(gitConfig.baseBranch)` (showDiff)\n- Line 481: `title: \\` diff: ${task.id} vs ${gitConfig.baseBranch} \\`` (popup title)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T03:44:56.029026+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T16:47:26.82613+11:00"}
{"id":"az-lit","title":"when we create a bead we should immediately put the cursor on it","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:22:17.05286+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T00:52:00.683781+11:00"}
{"id":"az-a0g1","title":"Spike: Unicode grapheme width in Gleam","description":"**Goal:** Determine how to calculate display width of text in terminal cells.\n\n## The Problem\nTerminals display characters with varying widths:\n- ASCII: 1 cell\n- CJK characters (‰∏≠Êñá): 2 cells\n- Emoji: 1-2 cells (varies by emoji)\n- Combining characters: 0 cells\n- Zero-width joiners: 0 cells\n\n## Questions to Answer\n1. Is there an existing Gleam library for unicode-width?\n2. If not, is there an Erlang library we can FFI to?\n3. Worst case: What's the effort to port unicode-width tables from Rust/Go?\n\n## Investigation Areas\n- Gleam hex packages for unicode/text handling\n- Erlang `unicode` module capabilities\n- Rust's `unicode-width` crate (well-maintained width tables)\n- Go's `runewidth` package (another good reference)\n\n## Deliverables\n1. Recommendation: Use existing lib / Port from X / Build simple\n2. If porting: Estimate complexity\n3. Working example: `display_width(\"Hello ‰∏≠Êñá üëã\") == 12`\n\n## Informs\n- az-ebxf (Text utilities) - Core dependency for text measurement","notes":"## Research Findings: Unicode Grapheme Width in Gleam\n\n### 1. EXISTING SOLUTION FOUND: string_width (Gleam)\n\n**Package:** `string_width` v3.3.1 on hex.pm\n**Author:** yoshi~ (yoshi-monster)\n**Repository:** https://gitlab.com/arkandos/string-width\n**License:** BSD-3-Clause\n**Dependency:** gleam_stdlib \u003e= 0.40.0\n\n**Key Features:**\n- Supports ALL Gleam targets (Erlang + JavaScript)\n- Handles ANSI escape codes (critical for TUI!)\n- Uses Unicode 16.0 tables (latest standard)\n- Passes tests from NPM string-width AND Rust unicode-width crate\n- Table lookup based on musl libc wcwidth implementation\n- \"Fastest options available\" per author\n\n**API Functions:**\n- `string_width.line(text)` - Width of single line in terminal cells\n- `string_width.align(width, direction, char)` - Pad to exact width\n- `string_width.limit(Size, ellipsis)` - Truncate with ellipsis\n- `string_width.get_terminal_size()` - Terminal dimensions\n\n**This directly solves our use case!**\n\n### 2. Erlang Standard Library: Graphemes Only, No Width\n\n**Erlang unicode module:** Encoding/decoding only (UTF-8, UTF-16, etc.)\n**Erlang string module:** Grapheme segmentation, length, padding - but NO display width\n\nErlang's string:length/1 counts grapheme clusters correctly (e.g., \"‰∏≠Êñá\" = 2), but doesn't know that CJK characters are 2 cells wide in terminals.\n\n### 3. Alternative Erlang Library: ucwidth\n\n**Package:** ucwidth on hex.pm (Elixir/Erlang)\n**Function:** Ucwidth.width/2 - width of codepoint or grapheme\n**Caveat:** Not Gleam-native, would need FFI wrapper\n\n### 4. Porting Assessment (Rust/Go)\n\n**Rust unicode-width:**\n- Multi-level lookup tables (WIDTH_ROOT, WIDTH_MIDDLE, etc.)\n- Sub-tables: 1 + 19 + 243 at different levels\n- CJK flag doubles static data (can be disabled)\n- Complex but highly optimized\n\n**Go go-runewidth:**\n- CreateLUT() makes 557KB in-memory table\n- Simpler interval table approach\n- MIT license\n\n**Conclusion:** Porting would be significant effort (2-3 days for basic port, more for optimization) and is unnecessary given string_width exists.\n\n### 5. Gleam Standard Library\n\n**gleam/string module provides:**\n- `length(text)` - Counts grapheme clusters (NOT display width)\n- `to_graphemes(text)` - List of grapheme clusters\n- `pop_grapheme(text)` - Head/tail split\n- `byte_size(text)` - UTF-8 byte count\n\n**Key insight:** length(\"‰∏≠Êñá\") = 2 graphemes, but display_width(\"‰∏≠Êñá\") = 4 cells. stdlib doesn't solve terminal width.\n\n### 6. MVP Alternative Assessment\n\n**Simple heuristic (ASCII=1, else=2):**\n- Would work for 80% of cases (ASCII + CJK)\n- Fails for: combining characters (should be 0), ambiguous width chars\n- Emoji handling inconsistent\n- Not recommended when proper solution exists\n\n## RECOMMENDATION\n\n**Use string_width package directly.**\n\nRationale:\n1. Already exists, well-tested, actively maintained (v3.3.1 in Oct 2024)\n2. Passes Rust unicode-width test suite\n3. Supports all Gleam targets\n4. ANSI-aware (critical for our TUI with colors)\n5. BSD-3 license compatible\n6. Zero porting effort required\n\n**Estimated Effort:** 0.5 hours to integrate\n- Add to gleam.toml: `string_width = \"~\u003e 3.3\"`\n- Import and use API directly\n\n**Code Example:**\n```gleam\nimport string_width\n\npub fn display_width(text: String) -\u003e Int {\n  string_width.line(text)\n}\n\n// string_width.line(\"Hello ‰∏≠Êñá üëã\") == 12 (verified from test suite)\n```\n\n## Impact on Dependent Issues\n\n- az-ebxf (Text utilities): Can now build on string_width, no custom width calculation needed\n- az-kwwr (Decision checkpoint): Unicode strategy = \"Use existing library\"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T11:40:14.692081+11:00","updated_at":"2025-12-28T12:27:23.293473+11:00","closed_at":"2025-12-28T12:27:23.293473+11:00","dependencies":[{"issue_id":"az-a0g1","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:41:51.054701+11:00","created_by":"daemon"}]}
{"id":"az-pdr6","title":"in origin workflowMode i cant space m to merge a epic child into the epic branch/worktree","description":"i should be able to do this! space m in epic drill down should merge to the epic branch not base branch so its fine to skip PR workflow","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:58:47.620234+11:00","updated_at":"2025-12-30T12:15:11.275399+11:00","closed_at":"2025-12-30T12:15:11.275399+11:00"}
{"id":"az-b8be","title":"Unified Session Verification","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T14:09:38.037604+11:00","updated_at":"2025-12-23T14:09:38.037604+11:00"}
{"id":"az-010","title":"[Deleted]","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-17T03:55:46.593449Z","updated_at":"2025-12-17T14:56:41.393066+11:00","deleted_at":"2025-12-17T03:55:46.593449Z","deleted_by":"git-history-backfill","delete_reason":"recovered from git history (pruned from manifest)","original_type":"task"}
{"id":"az-bijh","title":"cleanup beads","description":"merge duplicates, move completed tasks out of open/in progress, improve organization (create epics, add dependencies/blocking, etc), any other cleanup you can think of","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:10:58.00143+11:00","updated_at":"2025-12-20T01:47:42.036119+11:00"}
{"id":"az-2d6r","title":"LustreTUI - OpenTUI-style TUI framework for Gleam","description":"Build a Gleam TUI framework modeled after OpenTUI (github.com/sst/opentui) that uses Lustre for the declarative layer.\n\n## Why\n- Shore has limitations: no hex colors, Row layout divides width equally (breaks inline text), Fill sizing issues\n- OpenTUI's architecture is clean and proven (used by opencode, terminaldotshop)\n- Lustre is Gleam's mature TEA framework - perfect for the declarative adapter\n\n## Architecture\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                    lustre_tui                                ‚îÇ  ‚Üê Lustre reconciler + runtime\n‚îÇ  Element types ‚îÇ Reconciler ‚îÇ Runtime loop                  ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                    tui_core                                  ‚îÇ  ‚Üê Pure Gleam primitives\n‚îÇ  Color ‚îÇ Text ‚îÇ FrameBuffer ‚îÇ Renderables ‚îÇ Layout ‚îÇ Border‚îÇ\n‚îÇ  Renderer ‚îÇ Input ‚îÇ Resize                                   ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Build Order (Dependency Graph)\n```\nPhase 0 - Research Spikes (parallelize):\n  az-lvah: Etch library evaluation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n  az-9gxm: Gleam FFI patterns (parallel)    ‚îú‚îÄ‚îÄ‚îê\n  az-a0g1: Unicode width research ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ\n                                               ‚îÇ\nPhase 0.5 - Decision Checkpoint:               ‚îÇ\n  az-kwwr: Finalize architecture ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n    ‚Üì blocks\n    \nPhase 1 - Foundation (blocked by checkpoint):\n  az-hkfa: Color utilities (P0)\n  az-ebxf: Text utilities (P1)\n  az-zh3y: Input handling (P2)\n  \nPhase 2 - Core:\n  az-xe2h: FrameBuffer ‚Üê‚îÄ‚îÄ Color\n  az-ud48: Renderables ‚Üê‚îÄ‚îÄ FrameBuffer, Text\n  az-kmuk: Borders ‚Üê‚îÄ‚îÄ FrameBuffer, Color\n  az-otrx: Terminal resize ‚Üê‚îÄ‚îÄ Input\n  \nPhase 3 - Layout \u0026 Rendering:\n  az-se6w: Layout engine ‚Üê‚îÄ‚îÄ Renderables\n  az-5xza: Renderer ‚Üê‚îÄ‚îÄ Layout, Borders\n  \nPhase 4 - Lustre Integration:\n  az-uwcd: Element types ‚Üê‚îÄ‚îÄ Renderables\n  az-7tzh: Reconciler ‚Üê‚îÄ‚îÄ Element types\n  az-d19m: Runtime ‚Üê‚îÄ‚îÄ Reconciler, Renderer, Input, Resize\n  \nPhase 5 - Validation \u0026 Migration:\n  az-8zkp: Demo app ‚Üê‚îÄ‚îÄ Runtime\n  az-lyq4: Port Azedarach ‚Üê‚îÄ‚îÄ Demo\n```\n\n## Task Summary (17 MVP tasks + 3 deferred)\n\n### Phase 0 - Research Spikes\n| ID | Task | Priority | Blocks |\n|----|------|----------|--------|\n| az-lvah | Etch library evaluation | P0 | Decision |\n| az-9gxm | Gleam FFI patterns | P0 | Decision |\n| az-a0g1 | Unicode width research | P0 | Decision |\n\n### Phase 0.5 - Decision Checkpoint\n| ID | Task | Priority | Blocked By |\n|----|------|----------|------------|\n| az-kwwr | Finalize tui_core architecture | P0 | All spikes |\n\n### Phase 1-2 - Foundation \u0026 Core\n| ID | Task | Priority | Blocked By |\n|----|------|----------|------------|\n| az-hkfa | Color utilities | P0 | Decision checkpoint |\n| az-ebxf | Text utilities | P1 | Decision checkpoint |\n| az-zh3y | Input handling | P2 | Decision checkpoint |\n| az-xe2h | FrameBuffer | P1 | Color |\n| az-ud48 | Renderable types | P1 | FrameBuffer, Text |\n| az-kmuk | Border drawing | P2 | FrameBuffer, Color |\n| az-otrx | Terminal resize | P1 | Input |\n\n### Phase 3-4 - Layout \u0026 Integration\n| ID | Task | Priority | Blocked By |\n|----|------|----------|------------|\n| az-se6w | Layout engine | P1 | Renderables |\n| az-5xza | Renderer | P1 | Layout, Borders |\n| az-uwcd | Element types | P2 | Renderables |\n| az-7tzh | Reconciler | P2 | Elements |\n| az-d19m | Runtime | P2 | Reconciler, Renderer, Input, Resize |\n\n### Phase 5 - Validation\n| ID | Task | Priority | Blocked By |\n|----|------|----------|------------|\n| az-8zkp | Demo app | P3 | Runtime |\n| az-lyq4 | Port Azedarach | P3 | Demo |\n\n## Deferred/Future Work (Post-MVP)\n\nThese features are tracked as P4 issues, blocked by their dependencies:\n\n| ID | Feature | Blocked By | Rationale |\n|----|---------|------------|-----------|\n| az-wwui | Mouse events | Runtime (az-d19m) | Keyboard navigation sufficient for MVP |\n| az-vw20 | Scroll containers | Layout (az-se6w) | Kanban columns are fixed height |\n| az-2iv8 | Focus management | Runtime (az-d19m) | No form inputs in MVP |\n\n## Reference\n- OpenTUI source: https://github.com/sst/opentui\n- Etch (Gleam terminal backend): https://github.com/bananaofhappiness/etch\n- Lustre: https://github.com/lustre-labs/lustre","status":"in_progress","priority":1,"issue_type":"epic","created_at":"2025-12-28T11:25:31.045025+11:00","updated_at":"2025-12-28T12:13:22.857101+11:00"}
{"id":"az-stv","title":"Task actions: start, attach, pause, resume","description":"Implement keyboard shortcuts for task lifecycle actions.","notes":"Session 2025-12-12:\n\nNOW UNBLOCKED - All dependencies completed:\n- az-xi5 (SessionManager): ‚úÖ Closed - full orchestration service\n- az-t4t (Keyboard navigation): ‚úÖ Closed - Helix-style modal keybindings\n\nIMPLEMENTATION PLAN:\n1. Wire SessionManager to Action mode commands:\n   - Space+s: SessionManager.start() - create worktree + spawn Claude\n   - Space+a: Already done (AttachmentService.attachExternal)\n   - Space+p: SessionManager.pause() - Ctrl+C + WIP commit\n   - Space+r: SessionManager.resume() - reattach to paused session\n\n2. Update TaskCard to show live session state:\n   - Use SessionManager.subscribeToStateChanges() PubSub\n   - Update sessionState in TaskWithSession reactively\n   - Already have session indicators: üîµüü°‚úÖ‚ùå‚è∏Ô∏è\n\n3. Validate action availability:\n   - 's' only on idle tasks\n   - 'a' only on busy/waiting tasks\n   - 'p' only on busy tasks\n   - 'r' only on paused tasks\n\nDEPENDENCIES NOW MET:\n- SessionManager: src/core/SessionManager.ts\n- WorktreeManager: src/core/WorktreeManager.ts\n- TmuxService: src/core/TmuxService.ts\n- StateDetector: src/core/StateDetector.ts\n\nFILES TO MODIFY:\n- src/ui/App.tsx - Add action handlers for s/p/r\n- src/ui/atoms.ts - Add session lifecycle effects\n- src/ui/TaskCard.tsx - May need state subscription","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T14:45:07.880144+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:53:49.478801+11:00","dependencies":[{"issue_id":"az-stv","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T14:46:08.920801+11:00","created_by":"daemon"},{"issue_id":"az-stv","depends_on_id":"az-xi5","type":"blocks","created_at":"2025-12-11T14:46:28.054522+11:00","created_by":"daemon"},{"issue_id":"az-stv","depends_on_id":"az-t4t","type":"blocks","created_at":"2025-12-11T14:46:28.161361+11:00","created_by":"daemon"}]}
{"id":"az-09e","title":"Modularize KeyboardService into domain-specific handlers","description":"KeyboardService.ts is 1,572 lines - the largest service in the codebase.\n\nRefactor into smaller, focused modules:\n- **SessionKeyHandlers** - start/stop/pause/attach session actions\n- **NavigationKeyHandlers** - movement, selection, goto\n- **TaskKeyHandlers** - create/edit/delete/move tasks\n- **PRKeyHandlers** - PR creation, merge, cleanup\n- **ModeKeyHandlers** - mode transitions (search, command, etc.)\n\nEach module exports handler functions that KeyboardService composes.\nThis improves maintainability and makes testing individual handlers easier.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-17T15:59:44.99229+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:54:21.233588+11:00"}
{"id":"az-x4os","title":"Investigate if we can speed up .envrc (flake.nix i think takes the time)","description":"Investigate direnv/.envrc loading time - user suspects flake.nix evaluation is slow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:41:03.080068+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T12:45:57.492013+11:00"}
{"id":"az-ddcn","title":"virtual list in git diff is not filling available area","notes":"üìé [mjshw81s-2ies.png](.beads/images/az-ddcn/mjshw81s-2ies.png) (clipboard, 12/30/2025, 10:19:44 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T22:19:37.107888+11:00","updated_at":"2025-12-30T22:36:56.625794+11:00","closed_at":"2025-12-30T22:36:56.6258+11:00"}
{"id":"az-w75","title":"pressing down at the bottom of a column in tui should wrap to the top of that column not the next column","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:28:56.744822+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:33:22.358329+11:00"}
{"id":"az-786g","title":"fix responsiveness of details panel","description":"it should go a bit wider probs\nit should scroll with ctrl-u/d and up/down if content is too long","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:27:58.11595+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T14:13:51.706767+11:00"}
{"id":"az-n6k","title":"i seem to only be able to space m merge to main one bead and then i have to restart az","description":"after one the next time i space m a different bead it does nothing","notes":"Root cause: `Effect.fork` in CommandQueueService.processNext was creating fibers tied to the parent scope. When processNext returned, the scope closed and interrupted the forked fiber before it could clean up (set running = null). This left the queue in a stuck state where `running !== null` blocked subsequent operations.\n\nFix: \n1. Changed service from `effect:` to `scoped:` to get a layer-level Scope\n2. Captured scope at construction: `const serviceScope = yield* Effect.scope`\n3. Changed `Effect.fork` to `Effect.forkIn(effect, serviceScope)`\n\nThis ensures command fibers:\n- Aren't interrupted when processNext returns (outlive parent)\n- Get cleaned up when app shuts down (not daemon fibers)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:32:43.637796+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:12:59.43952+11:00"}
{"id":"az-o5m9","title":"merged tasks are being left in in-progress status","notes":"Root cause identified: In mergeToMain(), the bead is closed (step 10) AFTER the git push (step 9). This means the closed status is never pushed to remote. The fix is to either: (1) move the close before the push, or (2) do an additional sync+push after closing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:06:11.946082+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:14:25.570421+11:00"}
{"id":"az-z5n","title":"i feel like any beads that have a tmux session should be in progress","description":"currently you can have tmux sessions running on open/closed beads","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:35:21.548241+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-16T22:04:52.421753+11:00"}
{"id":"az-7vk","title":"Auto-wrap in tmux on startup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T17:16:24.296316+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T17:16:32.587438+11:00"}
{"id":"az-xw8","title":"Generate hooks config when spawning sessions","description":"SessionManager generates .claude/hooks.json in worktree when spawning sessions. Hooks auto-sync beads on Stop event and update issue notes. Pure bash-based automation without MCP overhead.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T13:25:00.000819+11:00","updated_at":"2025-12-12T13:25:20.656259+11:00","dependencies":[{"issue_id":"az-xw8","depends_on_id":"az-aiu","type":"blocks","created_at":"2025-12-12T13:25:32.748995+11:00","created_by":"daemon"}]}
{"id":"az-k5a","title":"is there a hook for when claude requests to enter plan mode","description":"if there is we should use it to update the session status\nif not we should improve our pty monitoring to pick it up","notes":"## Research Findings\n\n**Answer: No dedicated hook for plan mode entry/exit.**\n\nPlan mode is a permission system state, not a tool-based event. However, detection is possible via:\n\n### Available Options for Azedarach\n\n1. **Monitor `permission_mode` field in hooks** - All hooks receive this field:\n   - `PreToolUse`, `PostToolUse`, `PermissionRequest` all include `permission_mode: \"plan\"|\"default\"|...`\n   - Could detect mode by watching for changes in this field\n\n2. **PTY output monitoring** (current approach) - Look for plan mode indicators:\n   - Claude asking \"Would you like me to enter plan mode?\"\n   - Plan mode banner/status in terminal output\n   - ExitPlanMode tool calls\n\n3. **Transcript file parsing** - `transcript_path` in hook inputs points to conversation JSON\n\n### Recommendation for Azedarach\n\nEnhance PTY monitoring to detect:\n- Plan mode entry prompt patterns\n- `permission_mode` changes via any existing hooks we're using\n- Plan mode exit via ExitPlanMode tool detection\n\nThis is a documentation/research task - no code changes needed unless we want to implement enhanced detection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T12:33:09.074229+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T12:42:32.735864+11:00"}
{"id":"az-nzvz","title":"space f is not working. should see colourfull difftastic output","notes":"üìé [mjcaysaw-91oq.png](.beads/images/az-nzvz/mjcaysaw-91oq.png) (clipboard, 12/19/2025, 2:21:28 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T14:21:26.408124+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T14:57:35.804225+11:00"}
{"id":"az-se6w","title":"tui_core: Layout engine - flexbox-style positioning algorithm","description":"Implement the layout algorithm that positions Renderables in the terminal.\n\n## Why Separate\nThis is the most complex part of the rendering pipeline. Keeping it separate from Renderable types allows focused testing and iteration.\n\n## Algorithm (simplified flexbox)\n```\n1. Measure phase (intrinsic sizes)\n   - Text: display_width of content\n   - Box with Auto: sum/max of children based on flex_direction\n   - Box with Px/Pct/Fill: use specified size\n\n2. Layout phase (position children)\n   - Calculate available space (parent size - padding - border)\n   - Distribute space to Fill children\n   - Apply justify_content for main axis alignment\n   - Apply align_items for cross axis alignment\n   - Recurse into children\n\n3. Render phase (draw to FrameBuffer)\n   - Draw background\n   - Draw border if present\n   - Draw text content\n   - Recurse into children with offset\n```\n\n## API (Gleam)\n```gleam\ntype LayoutNode {\n  LayoutNode(\n    renderable: Renderable,\n    x: Int, y: Int,           // Computed position\n    width: Int, height: Int,  // Computed size\n    children: List(LayoutNode),\n  )\n}\n\n/// Compute layout for a renderable tree\nfn layout(root: Renderable, available_width: Int, available_height: Int) -\u003e LayoutNode\n\n/// Render a laid-out tree to a FrameBuffer\nfn render_tree(node: LayoutNode, fb: FrameBuffer) -\u003e FrameBuffer\n```\n\n## Overflow Handling\nFor MVP, use **clipping** (simplest):\n- Content outside bounds is not rendered\n- No scroll state needed\n\nFuture consideration (post-MVP):\n- Scroll containers with scroll offset state\n- Scrollbar rendering\n\n```gleam\ntype Overflow { Clip | Scroll | Visible }\n```\n\n## Edge Cases\n- Overflow handling (clip vs scroll) - MVP: clip only\n- Min/max size constraints\n- Percentage of percentage calculations\n- Zero-size containers\n\n## Acceptance Criteria\n- [ ] Row layout distributes width correctly\n- [ ] Column layout distributes height correctly\n- [ ] Fill sizing expands to available space\n- [ ] Percentage sizing works\n- [ ] Nested layouts compute correctly\n- [ ] Padding and margin applied correctly\n- [ ] **Content clipping works (overflow hidden)**\n- [ ] Text truncation with ellipsis when needed","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-28T11:32:19.745554+11:00","updated_at":"2025-12-28T11:44:02.435765+11:00","dependencies":[{"issue_id":"az-se6w","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.339421+11:00","created_by":"daemon"},{"issue_id":"az-se6w","depends_on_id":"az-ud48","type":"blocks","created_at":"2025-12-28T11:33:58.426226+11:00","created_by":"daemon"}]}
{"id":"az-2dkm","title":"issue with space S on existing worktree","description":"it just doesnt start a session despite that success toast","notes":"üìé [mjs25px4-tuu2.png](.beads/images/az-2dkm/mjs25px4-tuu2.png) (clipboard, 12/30/2025, 2:59:13 PM)\nüìé [mjs263ji-yowk.png](.beads/images/az-2dkm/mjs263ji-yowk.png) (clipboard, 12/30/2025, 2:59:31 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T14:59:10.017913+11:00","updated_at":"2025-12-30T15:24:31.956058+11:00","closed_at":"2025-12-30T15:24:31.956058+11:00"}
{"id":"az-w9g9","title":"i want to change space m to merge into main but not cleanup otherwise","description":"sometimes i need to use this flow: be space m, test in main dev server, iterate in same claude session, space m again, its done? then space d to cleanup\nit should no longer mess with closing beads or ending sessions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T01:28:03.733199+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T23:30:21.85682+11:00"}
{"id":"az-8zkp","title":"lustre_tui: Demo app - validate framework before Azedarach port","description":"Build a simple demo app to validate LustreTUI works before porting the full Azedarach.\n\n## Why\nCatch issues early with a minimal test case rather than debugging in a complex app.\n\n## Demo Features\n```gleam\n// Simple counter with styled UI\ntype Model { Model(count: Int) }\ntype Msg { Increment | Decrement | Quit }\n\nfn view(model: Model) -\u003e Element(Msg) {\n  box([flex_direction(Column), padding(1), border(Rounded)], [\n    text([fg(\"#cad3f5\")], \"LustreTUI Demo\"),\n    box([flex_direction(Row), gap(2)], [\n      button([on_click(Decrement)], \"-\"),\n      text([fg(\"#8aadf4\"), bold()], int.to_string(model.count)),\n      button([on_click(Increment)], \"+\"),\n    ]),\n    text([fg(\"#6e738d\")], \"Press q to quit\"),\n  ])\n}\n```\n\n## Validation Checklist\n- [ ] Basic layout (Row, Column) works\n- [ ] Nested boxes render correctly\n- [ ] Hex colors display properly\n- [ ] Border styles work\n- [ ] Keyboard input dispatches messages\n- [ ] Screen clears and redraws without flicker\n- [ ] Alt screen buffer works (clean exit)\n\n## Acceptance Criteria\n- [ ] Demo compiles and runs\n- [ ] All validation checklist items pass\n- [ ] No visual glitches or artifacts\n- [ ] Clean exit (terminal restored)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-28T11:31:22.714961+11:00","updated_at":"2025-12-28T11:31:22.714961+11:00","dependencies":[{"issue_id":"az-8zkp","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:33:36.559459+11:00","created_by":"daemon"},{"issue_id":"az-8zkp","depends_on_id":"az-d19m","type":"blocks","created_at":"2025-12-28T11:34:13.559695+11:00","created_by":"daemon"}]}
{"id":"az-dp47","title":"Add epic drill-down to DetailPanel","description":"When DetailPanel displays an epic, show its children:\n\n1. Add atom to fetch children when detail overlay opens on an epic\n2. Display children section in DetailPanel:\n   - Header: \"Children (N):\"\n   - List: id, title, status, session indicator\n   - Hint: \"Press 'o' to orchestrate parallel workers\"\n3. Style: status-based colors, session indicators for active sessions\n\nThis is the prerequisite for orchestration mode - users need to see children before they can orchestrate them.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:02.932675+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:43.283757+11:00","dependencies":[{"issue_id":"az-dp47","depends_on_id":"az-ccvg","type":"blocks","created_at":"2025-12-19T01:43:48.344657+11:00","created_by":"daemon"},{"issue_id":"az-dp47","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:22.744482+11:00","created_by":"daemon"}]}
{"id":"az-74sw","title":"space c is causing tmux to detach and dump me out in non tmux terminal","description":"When pressing `space c` (Chat about task with Haiku), the app calls `tmux.switchClient()` which switches the tmux client to the new chat session. This takes the user OUT of the Azedarach TUI completely and into the chat session's terminal.\n\nThe user expects to remain in the TUI while the chat session runs in the background (similar to how `space s` starts a work session but doesn't immediately switch to it).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T23:56:26.424876+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:30.623063+11:00"}
{"id":"az-mxk2","title":"when attaching with space a we should optionally merge in latest base branch","description":"we should detect if necessary and if so we show the dialog, if not we just attach as usual, the merge should attempt automatically and if it fails/has conflicts then we should run a claude session to resolve it just like with space m action. questions?","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T16:20:58.987524+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-20T03:16:22.975314+11:00"}
{"id":"az-kwwr","title":"Decision Checkpoint: Finalize tui_core architecture based on spike findings","description":"**Goal:** Review Phase 0 spike findings and make binding architectural decisions before implementation begins.\n\n## Trigger\nAll three research spikes must be complete:\n- az-lvah: Etch library evaluation\n- az-9gxm: Gleam FFI patterns\n- az-a0g1: Unicode width research\n\n## Decisions to Make\n\n### 1. Terminal I/O Backend\nBased on Etch spike (az-lvah) and FFI spike (az-9gxm):\n- **Option A: Use Etch** - If it covers 80%+ of needs with clean API\n- **Option B: Wrap Etch** - If it's partial but extensible\n- **Option C: Build custom** - If Etch is unsuitable, use FFI patterns from az-9gxm\n\nDocument decision and rationale in this task's `notes` field.\n\n### 2. Unicode Width Strategy\nBased on az-a0g1 findings:\n- **Option A: Use existing Gleam/Erlang lib** - If one exists and is suitable\n- **Option B: Port from Rust/Go** - If no Gleam solution exists\n- **Option C: Simple ASCII-only MVP** - If porting is too complex for MVP\n\n### 3. Architecture Adjustments\nBased on findings, update epic description if:\n- API signatures need to change\n- New tasks need to be added\n- Tasks can be merged or removed\n\n## Deliverables\n- [ ] Decision documented in `notes` field\n- [ ] Epic description updated with final architecture\n- [ ] Any new blocking dependencies added\n- [ ] Phase 1-2 tasks unblocked with clear direction\n\n## Why This Matters\nWithout explicit decision-making, parallel work can go in incompatible directions. This checkpoint ensures the team commits to one path before heavy implementation begins.","notes":"## Architectural Decisions - 2025-12-28\n\n### Decision 1: Terminal I/O Backend\n**DECISION: USE ETCH (Option A)**\n\n**Rationale:**\n- Etch v1.2.0 (Dec 17, 2025) covers 100% of terminal I/O requirements\n- Raw mode, ANSI input parsing, true color RGB, alt screen, resize events, mouse - all supported\n- Command batching via `Queue` + `flush()` fits our FrameBuffer diff strategy\n- Zero dependencies, crossterm-inspired (battle-tested patterns)\n- Active maintenance, MIT license\n\n**Impact on tasks:**\n- az-hkfa (Color): Simplifies to hex parsing only; Etch handles ANSI escape generation\n- az-zh3y (Input): Thin wrapper around Etch events; no escape sequence parsing needed\n- az-5xza (Renderer): Uses Etch command batching; focus on diff algorithm\n\n### Decision 2: Unicode Width Strategy\n**DECISION: USE string_width PACKAGE (Option A)**\n\n**Rationale:**\n- `string_width` v3.3.1 exists on hex.pm, actively maintained\n- Unicode 16.0 tables (latest standard)\n- ANSI-aware (critical for TUI with styled text)\n- Supports all Gleam targets (Erlang + JavaScript)\n- Passes Rust unicode-width test suite\n- BSD-3 license, ~30 min integration effort\n\n**Impact on tasks:**\n- az-ebxf (Text utilities): Build on string_width; no custom width tables needed\n\n### Decision 3: Architecture Adjustments\n**NO MAJOR CHANGES NEEDED**\n\nThe original architecture is validated. Minor simplifications:\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                    lustre_tui                                ‚îÇ\n‚îÇ  Element types ‚îÇ Reconciler ‚îÇ Runtime loop                  ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                    tui_core                                  ‚îÇ\n‚îÇ  Color (hex‚ÜíEtch) ‚îÇ Text (string_width) ‚îÇ FrameBuffer       ‚îÇ\n‚îÇ  Layout ‚îÇ Renderables ‚îÇ Borders                             ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                      ETCH                                    ‚îÇ  ‚Üê Terminal I/O\n‚îÇ  Raw mode ‚îÇ Input ‚îÇ ANSI output ‚îÇ Screen buffer             ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                  string_width                                ‚îÇ  ‚Üê Unicode width\n‚îÇ  display_width ‚îÇ truncate ‚îÇ align                           ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Dependencies to Add (gleam.toml)\n```toml\netch = \"~\u003e 1.2\"\nstring_width = \"~\u003e 3.3\"\n```\n\n### Phase 1-2 Unblocked\nAll Phase 1-2 tasks can now proceed with clear direction:\n- az-hkfa: Color utilities (hex parsing + Etch types)\n- az-ebxf: Text utilities (use string_width)\n- az-zh3y: Input handling (wrap Etch events)\n- az-xe2h: FrameBuffer (use Etch color types)\n- etc.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T11:52:06.002473+11:00","updated_at":"2025-12-28T12:30:34.000749+11:00","closed_at":"2025-12-28T12:30:34.000749+11:00","dependencies":[{"issue_id":"az-kwwr","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:52:18.880047+11:00","created_by":"daemon"},{"issue_id":"az-kwwr","depends_on_id":"az-lvah","type":"blocks","created_at":"2025-12-28T11:52:18.945801+11:00","created_by":"daemon"},{"issue_id":"az-kwwr","depends_on_id":"az-9gxm","type":"blocks","created_at":"2025-12-28T11:52:19.026756+11:00","created_by":"daemon"},{"issue_id":"az-kwwr","depends_on_id":"az-a0g1","type":"blocks","created_at":"2025-12-28T11:52:19.123973+11:00","created_by":"daemon"}]}
{"id":"az-ek3m","title":"Add orchestrate mode keybindings","description":"In bindings.ts:\n\n1. Add \"orchestrate\" to KeyMode type in types.ts\n2. Add 'o' binding in detail overlay mode:\n   ```typescript\n   { key: \"o\", mode: \"detail\", description: \"Orchestrate\", action: orchestrateHandlers.enterFromDetail() }\n   ```\n3. Add orchestrate mode bindings:\n   - j/down: moveDown\n   - k/up: moveUp\n   - space: toggle\n   - return: confirmSpawn\n   - a: selectAll\n   - n: selectNone\n   - escape: exitOrchestrate\n\n4. Update getEffectiveMode() in InputHandlersService to return \"orchestrate\" for orchestrate mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:04.569139+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:43.30364+11:00","dependencies":[{"issue_id":"az-ek3m","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:24.646113+11:00","created_by":"daemon"},{"issue_id":"az-ek3m","depends_on_id":"az-o72x","type":"blocks","created_at":"2025-12-19T01:43:50.107381+11:00","created_by":"daemon"}]}
{"id":"az-f5g2","title":"when we added epic base branch feature to our git ui we broke non epic base branch","description":"now all worktrees show 0 git diff when they should show lines changed","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-30T12:38:53.369414+11:00","updated_at":"2025-12-30T12:39:22.468034+11:00","deleted_at":"2025-12-30T12:39:22.468034+11:00","deleted_by":"riordan","delete_reason":"manual delete","original_type":"task"}
{"id":"az-a4zu","title":"while merge is in progress the confirm merge dialog should disappear","description":"When user confirms merge in the confirm dialog (presses y/Enter), the dialog stays visible during the entire merge operation because we await the merge Effect before popping the overlay.\n\n## Root Cause\nIn `InputHandlersService.handleConfirmInput()` (line 201-203):\n```typescript\nif (key === \"y\" || key === \"return\") {\n    yield* currentOverlay.onConfirm  // ‚Üê Awaits merge completion\n    yield* overlay.pop()             // ‚Üê Only then closes dialog\n}\n```\n\nThe `onConfirm` Effect runs the merge operation which can take several seconds. The dialog stays visible until it completes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:32:09.381139+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:27:26.813977+11:00"}
{"id":"az-g5nf","title":"when resolving merge conflicts show a different color of session dot","description":"or a different icon entirely","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:17:16.58094+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T15:31:19.187727+11:00"}
{"id":"az-zh3y","title":"tui_core: Input handling - keyboard events and raw mode","description":"Handle keyboard input in raw terminal mode.\n\n## What\n- Enter raw mode (disable line buffering, echo)\n- Parse ANSI escape sequences for special keys (arrows, function keys, etc.)\n- Emit typed key events\n\n## API (Gleam)\n```gleam\ntype Key {\n  Char(String)\n  Enter | Escape | Tab | Backspace | Delete | Space\n  Up | Down | Left | Right\n  Home | End | PageUp | PageDown\n  F(Int)  // F1-F12\n}\n\ntype Modifiers {\n  Modifiers(shift: Bool, ctrl: Bool, alt: Bool)\n}\n\ntype KeyEvent { \n  KeyEvent(key: Key, modifiers: Modifiers) \n}\n\ntype InputHandler\n\n/// Initialize input handling (enters raw mode)\nfn start() -\u003e Result(InputHandler, Error)\n\n/// Poll for input with timeout (non-blocking)\nfn poll(handler: InputHandler, timeout_ms: Int) -\u003e Option(KeyEvent)\n\n/// Read next key event (blocking)\nfn read(handler: InputHandler) -\u003e KeyEvent\n\n/// Clean up (exits raw mode)\nfn stop(handler: InputHandler) -\u003e Nil\n```\n\n## ANSI Escape Sequences for Special Keys\n```\n\\\\x1b[A  - Up arrow\n\\\\x1b[B  - Down arrow\n\\\\x1b[C  - Right arrow\n\\\\x1b[D  - Left arrow\n\\\\x1b[H  - Home\n\\\\x1b[F  - End\n\\\\x1b[5~ - Page Up\n\\\\x1b[6~ - Page Down\n\\\\x1bOP  - F1\n...\n```\n\n## Implementation Notes\n- May need platform-specific code (termios on Unix)\n- Consider using Etch if it handles this\n- Ctrl+key comes as byte value (Ctrl+C = 0x03)\n- Need to handle multi-byte sequences atomically\n\n## Reference\n- OpenTUI input: packages/core/src/cli-renderer.ts\n- Etch (Gleam terminal): https://github.com/bananaofhappiness/etch\n\n## Acceptance Criteria\n- [ ] Raw mode enters/exits cleanly\n- [ ] Regular character input works\n- [ ] Arrow keys detected correctly\n- [ ] Ctrl+key combinations work (esp. Ctrl+C)\n- [ ] Function keys work\n- [ ] No blocking issues on poll\n- [ ] Terminal restored on exit (even on crash)","notes":"## Implementation Complete - 2025-12-29\n\nCreated `/gleam/src/tui_core/input.gleam` which wraps Etch's event handling.\n\n### API Summary\n\n**Types (re-exported from etch/event):**\n- `Event` - Terminal events (Key, Mouse, Resize, FocusGained, FocusLost)\n- `KeyEvent` - Key press with code, modifiers, kind, state, text\n- `MouseEvent` - Mouse events with kind, column, row, modifiers\n- `KeyCode` - Which key was pressed (Char, UpArrow, Enter, Esc, F(n), etc.)\n- `Modifiers` - Modifier keys (shift, alt, control, super, hyper, meta)\n- `EventError` - Parse errors\n\n**Terminal Control:**\n- `init()` - Enter raw mode, alt screen, hide cursor, start event server\n- `init_with_mouse()` - Same + enable mouse capture\n- `cleanup()` - Show cursor, leave alt screen, exit raw mode\n- `cleanup_with_mouse()` - Same + disable mouse capture\n\n**Event Handling:**\n- `poll(timeout_ms)` - Non-blocking event read with timeout\n- `read()` - Blocking event read\n\n**Helper Functions:**\n- `is_key(evt, key_code)` - Check if event matches a key\n- `has_ctrl/alt/shift/super(key_event)` - Check modifiers\n- `has_any_modifier(key_event)` - Any modifier pressed\n- `get_char(key_event)` - Extract char from Char key code\n- `as_key/as_mouse/as_resize(evt)` - Type-safe extraction\n- `is_key_event/is_mouse_event/is_resize_event(evt)` - Type checks\n- `terminal_size()` - Get current terminal dimensions\n\n### Usage Pattern\n```gleam\nimport tui_core/input\nimport etch/event.{Key, Char, Esc}\nimport gleam/option.{None, Some}\n\npub fn main() {\n  input.init()\n  loop()\n}\n\nfn loop() {\n  case input.poll(100) {\n    Some(Ok(Key(k))) -\u003e case k.code {\n      Char(\"q\") | Esc -\u003e input.cleanup()\n      _ -\u003e loop()\n    }\n    _ -\u003e loop()\n  }\n}\n```\n\n### Acceptance Criteria Status\n- [x] Types re-exported correctly\n- [x] init() enters raw mode and alt screen\n- [x] cleanup() restores terminal\n- [x] poll() returns event or None based on timeout\n- [x] read() blocks until event received\n- [x] Helper functions work correctly\n- [x] `gleam build` succeeds","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T11:26:08.074138+11:00","updated_at":"2025-12-29T15:16:03.70551+11:00","closed_at":"2025-12-29T15:16:03.70551+11:00","dependencies":[{"issue_id":"az-zh3y","depends_on_id":"az-kwwr","type":"blocks","created_at":"2025-12-28T11:52:29.44578+11:00","created_by":"daemon"},{"issue_id":"az-zh3y","depends_on_id":"az-2d6r","type":"parent-child","created_at":"2025-12-28T11:26:18.800339+11:00","created_by":"daemon"},{"issue_id":"az-zh3y","depends_on_id":"az-lvah","type":"blocks","created_at":"2025-12-28T11:41:51.130935+11:00","created_by":"daemon"}]}
{"id":"az-yv6x","title":"show current project name somewhere","description":"Display the current project name in the StatusBar so users always know which project they're working on.\n\nContext: The StatusBar currently shows \"azedarach\" (the app name) on the left side. We need to also show the currently selected project name from ProjectService.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:35:35.266129+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T12:38:47.476303+11:00"}
{"id":"az-voa","title":"i dont like ctrl-a A as a way to return to az, come up with a better global key command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T10:08:08.210971+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T10:48:27.086814+11:00"}
{"id":"az-m176","title":"Add orchestrate mode to StatusBar","description":"In StatusBar.tsx, add keybindings for orchestrate mode:\n\n```typescript\nMODE_KEYBINDINGS.orchestrate = [\n  { key: \"Space\", action: \"Toggle\" },\n  { key: \"Enter\", action: \"Spawn\" },\n  { key: \"a\", action: \"All\" },\n  { key: \"n\", action: \"None\" },\n  { key: \"Esc\", action: \"Back\" },\n]\n```\n\nMode display should show: \"orchestrate (X/Y)\" where X is selected count and Y is spawnable count.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:05.683144+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:32.09255+11:00","dependencies":[{"issue_id":"az-m176","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:25.881296+11:00","created_by":"daemon"},{"issue_id":"az-m176","depends_on_id":"az-9870","type":"blocks","created_at":"2025-12-19T01:43:51.910544+11:00","created_by":"daemon"}]}
{"id":"az-mq9","title":"Create effect-atom SolidJS adapter","description":"Create a SolidJS adapter for effect-atom since only React and Vue adapters exist. This bridges Effect services to SolidJS's reactive system.","notes":"Session 2025-12-11:\n\nCOMPLETED:\n- Full SolidJS adapter for @effect-atom/atom\n- Implements all core hooks matching React adapter API\n\nFILES CREATED:\n- src/lib/effect-atom-solid/hooks.ts - useAtomValue, useAtomSet, useAtom, useAtomMount, useAtomRefresh\n- src/lib/effect-atom-solid/Provider.tsx - AtomProvider with registry options\n- src/lib/effect-atom-solid/index.ts - Barrel exports\n- src/lib/effect-atom-solid/example.tsx - Working counter example\n- src/lib/effect-atom-solid/README.md - Full documentation\n\nKEY DECISIONS:\n- Used createSignal + subscription pattern (SolidJS equivalent of useSyncExternalStore)\n- Values returned as Accessor\u003cT\u003e (must call: count()) per SolidJS conventions\n- Default scheduler: queueMicrotask (not React Scheduler)\n- Used onCleanup for automatic subscription cleanup\n\nPOTENTIAL CONTRIBUTION:\n- This adapter could be contributed back to tim-smart/effect-atom\n- API surface mirrors @effect-atom/atom-react for easy migration","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-11T17:10:02.323692+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-11T17:25:13.974746+11:00","dependencies":[{"issue_id":"az-mq9","depends_on_id":"az-ags","type":"blocks","created_at":"2025-12-11T17:10:08.914278+11:00","created_by":"daemon"},{"issue_id":"az-mq9","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T17:10:08.844553+11:00","created_by":"daemon"}]}
{"id":"az-qmg","title":"instead of using an extra line to underline column headers just use underlined ascii characters maybe?","notes":"Starting work - will use text underline attribute instead of separate line","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:57:11.332088+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T00:44:19.692037+11:00"}
{"id":"az-hmmx","title":"remove as yet unused a (VC) keybind","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T02:06:22.60798+11:00","updated_at":"2025-12-30T10:53:36.709332+11:00","closed_at":"2025-12-30T10:53:36.709334+11:00"}
{"id":"az-bta8","title":"wait until initCommands are done before adding any more tmux windows to the session","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:20:55.679085+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T18:38:00.557434+11:00"}
{"id":"az-tgj","title":"Shift-D delete bead not working - reports \"no worktree to delete\"","description":"When pressing Space -\u003e Shift-D to delete a bead, the wrong action fires. The keyboard library reports event.name as lowercase even when shift is held, so case \"D\" never matches - it falls through to case \"d\" (cleanup worktree).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T21:41:38.746846+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T21:43:51.026071+11:00"}
{"id":"az-4vp","title":"how do we install az hooks into a repo? document/improve this flow","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:22:57.513319+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T10:39:21.455076+11:00"}
{"id":"az-phut","title":"az loses track of dev servers if i manually restart them in the tmux window (ctrl c -\u003e startup command)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:29:24.885249+11:00","updated_at":"2025-12-29T15:05:16.48382+11:00","closed_at":"2025-12-29T15:05:16.483823+11:00"}
{"id":"az-dl1","title":"Add detail level toggle for cards","description":"Add toggle to switch between minimal/standard/detailed card views.\n\nInspiration: AutoMaker's three-level detail toggle.\n\nLevels:\n- Minimal: ID + title only (fits more tasks on screen)\n- Standard: Current view (ID, title, priority, status indicator)\n- Detailed: Add description preview, session metrics, context health\n\nImplementation:\n1. Add detailLevel to ViewService (minimal/standard/detailed)\n2. Add 'd' key to cycle through levels\n3. Adjust TaskCard rendering based on level\n4. Persist preference in config","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T12:00:02Z","updated_at":"2025-12-16T12:00:02Z"}
{"id":"az-d5q","title":"Help overlay with keybinding reference","description":"Contextual help overlay showing available commands.","notes":"Created HelpOverlay component with Catppuccin-themed modal showing all keybindings grouped by category (Navigation, Modes, Select Mode, Action Mode, General). Added '?' keybind to App.tsx to toggle the help overlay. The overlay dismisses on any key press. Successfully type-checked with no errors.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:41.840117+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T01:29:02.41928+11:00","dependencies":[{"issue_id":"az-d5q","depends_on_id":"az-ee4","type":"parent-child","created_at":"2025-12-11T14:46:10.144875+11:00","created_by":"daemon"}]}
{"id":"az-srh","title":"Detail view for selected task","description":"Expandable detail panel showing full task information.","notes":"Implementation complete. Created DetailPanel.tsx component that shows full task details in a modal overlay. Added Enter key handler in normal mode to toggle the detail view. Updated HelpOverlay to document the Enter key. Component displays: task ID, type, priority, status, session state, description, design notes, notes, timestamps, and available actions based on task state. Follows same overlay pattern as HelpOverlay with semi-transparent background and centered box using Catppuccin theme colors.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:08.103114+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T10:32:33.95362+11:00","dependencies":[{"issue_id":"az-srh","depends_on_id":"az-pza","type":"parent-child","created_at":"2025-12-11T14:46:09.178011+11:00","created_by":"daemon"}]}
{"id":"az-4w4i","title":"cross project initCommands issue","description":"when i move between projects initCommands seem to get lost\nchefy uses pnpm i not bun","notes":"üìé [mjc8m9za-p8eb.png](.beads/images/az-4w4i/mjc8m9za-p8eb.png) (clipboard, 12/19/2025, 1:15:45 PM)\n\n## Implementation Complete\n\n### Changes Made:\n\n1. **AppConfig.ts** - Added `loadWorktreeConfigFromPath(projectPath)` function\n   - Loads `.azedarach.json` or `package.json.azedarach` from any project path\n   - Returns `WorktreeConfig | null` (null if no config exists)\n   - Fully type-safe, no `as` casting\n\n2. **config/index.ts** - Exported the new function\n\n3. **SessionManager.ts** - Modified `start()` method\n   - Loads worktree config from `projectPath` (target project) instead of using global config\n   - Uses `DEFAULT_CONFIG.worktree` defaults if target has no config (empty initCommands)\n   - Session settings still come from Azedarach's config (intentional)\n\n### Behavior After Fix:\n\n- **Azedarach sessions**: Use Azedarach's `.azedarach.json` initCommands (`bun install`, etc.)\n- **Chefy sessions**: Use Chefy's `.azedarach.json` if it exists, otherwise no initCommands\n- **Any project**: Each project controls its own initCommands via its own config file\n\n### Testing:\n- Type check: ‚úÖ Passed\n- Build: ‚úÖ Passed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T13:15:42.682605+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T13:58:27.091817+11:00"}
{"id":"az-yp0s","title":"allow multiple dev servers to run at once!","description":"i'm thinking we use the same tmux window for all dev servers, use tmux panels split like | not -\nopen to your recommendation though","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-23T18:28:09.655055+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-23T18:33:39.734968+11:00"}
{"id":"az-kzk","title":"Quick task creation from TUI","description":"Create new beads tasks without leaving the TUI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:45:42.159577+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T12:20:02.57418+11:00","dependencies":[{"issue_id":"az-kzk","depends_on_id":"az-ee4","type":"parent-child","created_at":"2025-12-11T14:46:10.411847+11:00","created_by":"daemon"}]}
{"id":"az-vm5l","title":"space s/S/! on a bead that already has a worktree should not fail","description":"instead of erroring cause the worktree already exists, warn that worktree already existst and continue using that worktree","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:18:03.403552+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T16:24:57.065916+11:00"}
{"id":"az-65k","title":"Selection jumps to top of column after moving task left","notes":"Session progress (2025-12-14):\n\nROOT CAUSE ANALYSIS:\n- Navigation tracks position (columnIndex, taskIndex) not task ID\n- After moving RIGHT into empty column, taskIndex clamps to 0\n- Moving LEFT then uses stale taskIndex (0), navigating to top of column\n\nSOLUTION DESIGNED:\n1. Add `followTaskId` state to track which task to follow after moves\n2. Add useEffect watching followTaskId + tasksByColumn\n3. When data refreshes, find task by ID and navigate to its new position\n4. Update LEFT/RIGHT handlers in action mode to use setFollowTaskId()\n\nFILES TO MODIFY:\n- src/ui/App.tsx:\n  - Line 4: Add useEffect import\n  - After line 112: Add followTaskId state\n  - After navigateTo (line 206): Add useEffect for following task\n  - Lines 405-430: Update LEFT handler to use setFollowTaskId\n  - Lines 431-456: Update RIGHT handler to use setFollowTaskId\n\nFIX WAS APPLIED BUT REVERTED:\n- The fix was successfully implemented\n- A linter/formatter reverted the changes\n- Need to re-apply with proper formatting\n\nNEXT STEP:\nRe-apply the fix, ensuring it passes linting/formatting","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-12T17:17:04.148671+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-14T02:13:17.044687+11:00"}
{"id":"az-6nu","title":"help me figure out this tool use issue in claude sessions started via space s/S","description":"- it always stdouts ERROR: wrong usage\n - i have no idea what program/script logs it\n - it doesnt happen if i ctrl-a % to split and open a new claude session and tell it to type check\n - doesnt happen for read/write tool use only commands that use shell like bun run type-check etc","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:01:53.842983+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:17:50.228619+11:00"}
{"id":"az-3rt","title":"task is stuck merging","description":"we need to be able to abort a merge and also we need to be able to attach to the merge claude session. we should re-use the current tmux session for merging if we havent already closed it.","notes":"Starting work. Issue analysis:\n\n1. When merge detects conflicts, PRWorkflow spawns Claude to resolve them\n2. There's no way to abort a merge that's stuck in conflict state\n3. No way to easily attach to the merge-resolution Claude session\n4. Task appears \"stuck\" with no recovery options\n\nPlan:\n1. Add `abortMerge` method to PRWorkflow - runs `git merge --abort`\n2. Add `Space+M` keybinding (abort merge) to prHandlers\n3. Ensure attach (`Space+a`) works for merge-resolution sessions\n4. Consider UI feedback for merge-in-progress state","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:45:11.402161+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:34:18.518437+11:00"}
{"id":"az-loln","title":"when creating worktree for child off of an epic make sure even untracked files are cloned over","description":"such as node_modules and .env.local files","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T11:22:41.287238+11:00","updated_at":"2025-12-30T12:45:12.813974+11:00","closed_at":"2025-12-30T12:45:12.813976+11:00"}
{"id":"az-xoz","title":"fix action mode delete bead keybind","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T01:25:22.242622+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-15T01:37:29.061321+11:00"}
{"id":"az-nqo","title":"Complete SessionService implementation (spawn/attach/onComplete)","description":"SessionService is a thin facade that consolidates scattered session logic in KeyboardService into a reusable API layer.\n\n**Current State (Duplicated):**\n- `spawn()` logic: KeyboardService lines 362-369 (Space+s) and 388-401 (Space+i) both call sessionManager.start()\n- `attach()` logic: KeyboardService line 443 (Space+a) calls attachmentService.attachExternal()\n- `onComplete()` logic: **MISSING** ‚Äî no PR workflow automation exists\n\n**Refactoring Goals:**\n1. Extract `spawn()` ‚Üí consolidate both keybinding paths into SessionService.spawn()\n2. Extract `attach()` ‚Üí consolidate Space+a/Space+o paths into SessionService.attach()  \n3. Implement `onComplete()` ‚Üí wire PRWorkflow for automatic PR creation + board updates (NEW)\n4. Update KeyboardService to delegate to SessionService instead of direct core service calls\n\n**Benefit:** Single source of truth for session operations, enables auto-PR workflow, cleaner architecture (UI routing vs business logic separation).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T15:59:44.332899+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T02:21:09.519079+11:00"}
{"id":"az-0gh","title":"pretooluse hook seems to trigger before requesting permissions and other stuff","description":"so we should be able to use it to update session status in az right?","notes":"## Implementation Complete ‚úÖ\n\n### Changes Made\n\n**1. `src/cli/index.ts`** - Added `pretooluse` to VALID_HOOK_EVENTS\n- az notify now accepts pretooluse as a valid event type\n\n**2. `src/core/HookReceiver.ts`** - Updated HookEventType and mapEventToState\n- Added `pretooluse` and `permission_request` to the union type\n- Documented the event timing in comments\n- Added state mappings:\n  - `pretooluse` ‚Üí \"busy\" (Claude attempting tool)\n  - `permission_request` ‚Üí \"waiting\" (needs user approval)\n\n**3. `src/core/hooks.ts`** - Added PreToolUse hook to generateHookConfig\n- New sessions will automatically get PreToolUse hook installed\n- Fires BEFORE permission checks for immediate busy detection\n\n### State Transition Flow\n\n```\nClaude decides to use tool\n    ‚Üì\nPreToolUse fires ‚Üí \"busy\"\n    ‚Üì\nPermission system checks\n    ‚Üì\nPermissionRequest fires (if needed) ‚Üí \"waiting\"\n    ‚Üì\nUser approves ‚Üí tool executes ‚Üí \"busy\" continues\n    ‚Üì\nStop fires ‚Üí \"waiting\"\n```\n\n### Testing\n\n- Type check passes\n- Manual testing: Create new worktree, run `az install-hooks`, verify pretooluse hook in settings.local.json","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T12:36:08.601508+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:21:07.838832+11:00"}
{"id":"az-2q75","title":"Add autoCompact option to SessionManager","description":"Add --auto-compact flag support to StartSessionOptions for long-running orchestrator sessions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:14:04.247224+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T14:13:39.604046+11:00","dependencies":[{"issue_id":"az-2q75","depends_on_id":"az-wn3o","type":"parent-child","created_at":"2025-12-19T11:14:21.58227+11:00","created_by":"daemon"}]}
{"id":"az-wgc7","title":"add a space keybnid to start hx in a tmux session instead of/in addition to a claude sesh","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T09:54:11.2604+11:00","updated_at":"2025-12-29T15:21:12.062057+11:00","closed_at":"2025-12-29T15:21:12.062057+11:00"}
{"id":"az-ulwr","title":"when i move between projects i want the last cursor position, filters, etc all saved","description":"so if i go back to a project i want to see the exact same setup as when i left (aside from if beads and tmux changed due to progress made)","notes":"**Bug Fix (2025-12-21)**: Initial implementation only added save/restore to `switchProjectAtom`, but the actual keyboard-triggered project switch in `InputHandlersService` was bypassing this atom and calling `ProjectService.switchProject()` directly. Fixed by adding save/restore logic directly to `InputHandlersService.handleProjectSelectorInput()`.\n\nFiles modified in fix:\n- `src/services/keyboard/InputHandlersService.ts` - Added ProjectStateService and ViewService dependencies, implemented save/restore","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T02:32:44.866933+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-21T03:38:24.180211+11:00"}
{"id":"az-31i","title":"the claude create task feature needs work. we should use claude cli or something not a full claude ode session/instance","notes":"Analyzing current implementation and planning CLI-based approach","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T23:42:31.58228+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T00:18:36.483483+11:00"}
{"id":"az-llup","title":"bead images will slowly increase size of git clones etc","description":"we should store images elsewhere or something","notes":"## Implementation Complete\n\n### Changes Made\n\n**1. `.gitattributes`** - Added LFS tracking rules for all image types:\n- `.beads/images/**/*.{png,jpg,jpeg,gif,webp,bmp,svg}`\n\n**2. `ImageAttachmentService.ts`** - Added cleanup methods:\n- `cleanupImagesForIssue(issueId)` - Deletes all images for a single issue\n- `cleanupImagesForIssues(issueIds)` - Batch cleanup for multiple issues\n\n**3. `PRWorkflow.ts`** - Hooked cleanup into close operations:\n- Added ImageAttachmentService dependency\n- Added cleanup calls in:\n  - `cleanup()` method when `closeBead=true`\n  - `mergeAndCleanup()` for main bead and all epic children\n  - `mergeBead()` for source bead after merge\n\n**4. `scripts/migrate-images-to-lfs.sh`** - Migration script:\n- Installs Git LFS hooks\n- Migrates existing images in git history\n- Provides post-migration instructions\n\n### Usage\n\n**For new repos:** Just commit - LFS tracking is automatic via `.gitattributes`\n\n**For existing repos with images:**\n```bash\n./scripts/migrate-images-to-lfs.sh\ngit push --force-with-lease --all\n```\n\n**To reclaim space after cleanups:**\n```bash\ngit lfs prune --verify-remote\n```\n\n### Testing\n- Type check: ‚úÖ Passed\n- Build: ‚úÖ Passed\n\n### Note on Reopened Issues\nImages are deleted when issues close. If an issue is reopened, its images are gone (acceptable for temporary debugging screenshots).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T15:56:57.33026+11:00","updated_at":"2025-12-31T18:24:27.31907+11:00","closed_at":"2025-12-31T18:24:27.319073+11:00"}
{"id":"az-rmz1","title":"goto word (gw) not going to the right task","description":"i pressed ak and it didnt go to ak","notes":"üìé [mjbktzs7-qh5v.png](.beads/images/az-rmz1/mjbktzs7-qh5v.png) (clipboard, 12/19/2025, 2:09:54 AM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T02:09:11.966491+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:31:32.356707+11:00"}
{"id":"az-ghj","title":"clean up open tasks and offer to create 5-10 new tasks based on gaps in our program/tech debt","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T15:53:59.901658+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:13:04.792751+11:00"}
{"id":"az-v1p1","title":"why do i see origin/main here instead of local main in azedarach project","notes":"üìé [mjqmnehy-bgma.png](.beads/images/az-v1p1/mjqmnehy-bgma.png) (clipboard, 12/29/2025, 2:57:18 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T14:57:15.887087+11:00","updated_at":"2025-12-29T15:01:25.532344+11:00","closed_at":"2025-12-29T15:01:25.532346+11:00"}
{"id":"az-aa2","title":"add ability to view/remove attached images","notes":"Planning implementation: Add attachment navigation within DetailPanel overlay. When viewing a task with attachments, user can press j/k to select attachments, 'o' to open in viewer, 'x' to delete. Need to: 1) Add attachment selection state to EditorService, 2) Update DetailPanel to show selection, 3) Add keybindings for detail overlay attachment interaction.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T10:17:59.590786+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-18T13:46:46.034146+11:00"}
{"id":"az-g7p","title":"sometimes space S/s moves the task to in progress but doesnt start a tmux session","description":"what could even cause the tmux session to not be started? check az.log maybe","notes":"Root cause identified: Action handlers in KeyboardService use Effect.tap() which fires-and-forgets the inner Effect. Need to change to Effect.flatMap() to properly await the session start.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:44:06.046821+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T17:01:19.62138+11:00"}
{"id":"az-9870","title":"Add orchestrate mode to EditorService","description":"Add new mode variant to EditorMode union:\n\n```typescript\n| {\n    readonly _tag: \"orchestrate\"\n    readonly epicId: string\n    readonly epicTitle: string\n    readonly childTasks: ReadonlyArray\u003cOrchestrationTask\u003e\n    readonly selectedIds: ReadonlyArray\u003cstring\u003e\n    readonly focusIndex: number\n  }\n```\n\nAdd OrchestrationTask interface and service methods:\n- enterOrchestrate(epicId, epicTitle, children)\n- orchestrateMoveDown()\n- orchestrateMoveUp()\n- orchestrateToggle(taskId)\n- orchestrateSelectAll()\n- orchestrateSelectNone()\n- exitOrchestrate()\n\nAlso update getMode() to handle the new variant.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T01:43:03.493537+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T10:34:31.591108+11:00","dependencies":[{"issue_id":"az-9870","depends_on_id":"az-7sr","type":"parent-child","created_at":"2025-12-19T01:43:23.354103+11:00","created_by":"daemon"}]}
{"id":"az-4vc","title":"paste from clipboard not working on mac still","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T16:24:25.365057+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T16:41:03.286913+11:00"}
{"id":"az-519a","title":"sometimes az loses track of sessions like the one in the image","description":"the one in the image DOES have a tmux session thats running claude","notes":"Implementation complete. Key changes:\n\n1. `src/core/ClaudeSessionManager.ts`:\n   - Extended `updateStateFromTmux` signature to accept `sessionMeta`\n   - When session not found but meta provided, creates orphaned session\n   - Uses metadata for worktreePath/projectPath with sensible fallbacks\n\n2. `src/ui/atoms/session.ts`:\n   - Updated handler to pass full update metadata to `updateStateFromTmux`\n\nBuild passes. Type check has pre-existing errors unrelated to this change.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T15:19:00.677143+11:00","updated_at":"2025-12-29T18:06:43.223042+11:00","closed_at":"2025-12-29T18:06:43.223044+11:00"}
{"id":"az-31h","title":"runGit doesn't extract stderr, breaking merge conflict detection","description":"The runGit helper in PRWorkflow.ts didn't extract stderr from platform errors. This caused merge conflict detection to fail because it checks e.stderr?.includes(\"CONFLICT\") which was always undefined.\n\nFixed by extracting stderr like BeadsClient does: `const stderr = \"stderr\" in error ? String(error.stderr) : String(error)`","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T15:49:54.963322+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T15:50:00.235259+11:00"}
{"id":"az-qn60","title":"something in opencode is trying to use claude code instead of our configured gemini flash model","notes":"üìé [mjgicw7u-3njc.png](.beads/images/az-qn60/mjgicw7u-3njc.png) (clipboard, 12/22/2025, 12:59:28 PM)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-22T12:59:26.522251+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-22T13:07:54.724908+11:00"}
{"id":"az-8f4j","title":"board refresh failed","description":"timestamp=2025-12-22T00:37:24.824Z level=ERROR fiber=#561 message=\"BoardService refresh failed\" message=\"ParseError: Schema validation failed: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly description?: string | undefined; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly priority: number; readonly issue_type: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\"; readonly created_at: string; readonly updated_at: string; readonly closed_at?: string | null | undefined; readonly assignee?: string | null | undefined; readonly labels?: ReadonlyArray\u003cstring\u003e | undefined; readonly design?: string | undefined; readonly notes?: string | undefined; readonly acceptance?: string | undefined; readonly estimate?: number | undefined; readonly dependent_count?: number | undefined; readonly dependency_count?: number | undefined; readonly dependents?: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly dependency_type: \\\"blocks\\\" | \\\"related\\\" | \\\"parent-child\\\" | \\\"discovered-from\\\"; readonly issue_type?: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\" | undefined }\u003e | undefined; readonly dependencies?: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly dependency_type: \\\"blocks\\\" | \\\"related\\\" | \\\"parent-child\\\" | \\\"discovered-from\\\"; readonly issue_type?: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\" | undefined }\u003e | undefined }\u003e\\n‚îî‚îÄ [0]\\n   ‚îî‚îÄ { readonly id: string; readonly title: string; readonly description?: string | undefined; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly priority: number; readonly issue_type: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\"; readonly created_at: string; readonly updated_at: string; readonly closed_at?: string | null | undefined; readonly assignee?: string | null | undefined; readonly labels?: ReadonlyArray\u003cstring\u003e | undefined; readonly design?: string | undefined; readonly notes?: string | undefined; readonly acceptance?: string | undefined; readonly estimate?: number | undefined; readonly dependent_count?: number | undefined; readonly dependency_count?: number | undefined; readonly dependents?: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly dependency_type: \\\"blocks\\\" | \\\"related\\\" | \\\"parent-child\\\" | \\\"discovered-from\\\"; readonly issue_type?: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\" | undefined }\u003e | undefined; readonly dependencies?: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly dependency_type: \\\"blocks\\\" | \\\"related\\\" | \\\"parent-child\\\" | \\\"discovered-from\\\"; readonly issue_type?: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\" | undefined }\u003e | undefined }\\n      ‚îî‚îÄ [\\\"priority\\\"]\\n         ‚îî‚îÄ is missing\\n‚îî‚îÄ [0]\\n   ‚îî‚îÄ { readonly id: string; readonly title: string; readonly description?: string | undefined; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly priority: number; readonly issue_type: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\"; readonly created_at: string; readonly updated_at: string; readonly closed_at?: string | null | undefined; readonly assignee?: string | null | undefined; readonly labels?: ReadonlyArray\u003cstring\u003e | undefined; readonly design?: string | undefined; readonly notes?: string | undefined; readonly acceptance?: string | undefined; readonly estimate?: number | undefined; readonly dependent_count?: number | undefined; readonly dependency_count?: number | undefined; readonly dependents?: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly dependency_type: \\\"blocks\\\" | \\\"related\\\" | \\\"parent-child\\\" | \\\"discovered-from\\\"; readonly issue_type?: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\" | undefined }\u003e | undefined; readonly dependencies?: ReadonlyArray\u003c{ readonly id: string; readonly title: string; readonly status: \\\"open\\\" | \\\"in_progress\\\" | \\\"blocked\\\" | \\\"closed\\\" | \\\"tombstone\\\"; readonly dependency_type: \\\"blocks\\\" | \\\"related\\\" | \\\"parent-child\\\" | \\\"discovered-from\\\"; readonly issue_type?: \\\"bug\\\" | \\\"feature\\\" | \\\"task\\\" | \\\"epic\\\" | \\\"chore\\\" | undefined }\u003e | undefined }\\n      ‚îî‚îÄ [\\\"priority\\\"]\\n         ‚îî‚îÄ is missing\\n    at \u003canonymous\u003e (/Users/riordan/prog/azedarach/src/core/BeadsClient.ts:424:11)\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T11:38:31.466993+11:00","updated_at":"2025-12-22T11:38:31.466993+11:00"}
{"id":"az-vpj","title":"make sure we warn the user if space m will cause conflicts and they can press y/n to proceed or cancel","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T00:52:26.919959+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-17T01:09:17.730326+11:00"}
{"id":"az-mvi9","title":"we need to be able to tell if there is a worktree even though theres no tmux session","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T18:03:45.394453+11:00","updated_at":"2025-12-30T00:55:19.833256+11:00","closed_at":"2025-12-30T00:55:19.833258+11:00"}
{"id":"az-2doh","title":"merge in claude/improve-codebase-quality-tKmv7","description":"Merge the `claude/improve-codebase-quality-tKmv7` branch which contains 2 commits:\n1. `b75ffe4` - refactor: improve codebase quality\n2. `5df70e0` - refactor: move fiber tracking into HookReceiver service\n\nThese changes fix memory leaks and improve code quality.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T23:38:41.602215+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-19T00:40:33.371907+11:00"}
{"id":"az-4ghj","title":"add way to merge a bead into another bead (git wise)","description":"i have bead A with some work that i dont want to merge to base or create a pr for, i want to merge to another bead's branch/worktree (even if it doesnt exist yet)\ni can technically do this by making the bead a child of an epic but this is not always ergonomic","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T00:52:11.746656+11:00","updated_at":"2025-12-30T10:56:50.317263+11:00","closed_at":"2025-12-30T10:56:50.317263+11:00"}
{"id":"az-shv","title":"Error toast notifications in TUI","description":"Show dismissible error toasts when actions fail (e.g., attach to non-existent session, start on non-idle task). Currently errors only go to console.error which users don't see.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T10:59:23.087691+11:00","updated_at":"2025-12-28T11:48:04.433679+11:00","closed_at":"2025-12-12T11:07:55.898746+11:00"}
{"id":"az-e0w","title":"board doesn't seem to update when i change sort mode","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T16:48:52.461805+11:00","updated_at":"2025-12-20T01:47:02.922437+11:00"}
